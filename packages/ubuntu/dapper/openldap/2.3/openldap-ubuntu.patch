diff -urN openldap-2.3.35/debian/changelog openldap-2.3.35_new/debian/changelog
--- openldap-2.3.35/debian/changelog	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/changelog	2007-04-12 17:25:12.000000000 -0300
@@ -0,0 +1,1589 @@
+openldap2.3 (2.3.35-5ubuntu4) dapper; urgency=low
+
+   * Re-enabled the building of the development packages.
+
+ -- Marco Aurelio Graciotto Silva <magsilva@gmail.com>  Thu, 12 Apr 2007 17:24:53 -0300 
+
+openldap2.2 (2.2.26-5ubuntu3.1) edgy-security; urgency=low
+
+  * SECURITY UPDATE: Denial of service possible with a crafted remote 
+    LDAP BIND request due to an assert failure.
+  * libraries/libldap/getdn.c: check for string end conditions, as done
+    in upstream CVS.
+  * References
+    http://www.openldap.org/devel/cvsweb.cgi/libraries/libldap/getdn.c.diff?r1=1.133&r2=1.134
+    CVE-2006-5779
+
+ -- Kees Cook <kees@ubuntu.com>  Sat, 11 Nov 2006 12:55:50 -0800
+
+openldap2.2 (2.2.26-5ubuntu3) edgy; urgency=low
+
+  * SECURITY UPDATE: Crash/arbitrary code execution with crafted host names.
+  * servers/slurpd/st.c, St_read(): 
+    - Do not sprintf arbitrarily long strings into fixed-size tbuf.
+    - Patch ported from upstream CVS commit:
+      http://www.openldap.org/devel/cvsweb.cgi/servers/slurpd/st.c.diff?
+      r1=1.21&r2=1.22&hideattic=1&sortbydate=0&f=u
+    - CVE-2006-2754
+
+ -- Martin Pitt <martin.pitt@ubuntu.com>  Mon, 26 Jun 2006 11:37:55 +0000
+
+openldap2.2 (2.2.26-5ubuntu2) dapper; urgency=low
+
+  * Create /var/run/slapd in the init script.
+
+ -- Scott James Remnant <scott@ubuntu.com>  Tue, 11 Apr 2006 02:18:17 +0100
+
+openldap2.2 (2.2.26-5ubuntu1) dapper; urgency=low
+
+  * Switch default config to use ssl-cert-snakeoil certificates.
+  * Add Depends on ssl-cert.
+
+ -- Fabio M. Di Nitto <fabbione@ubuntu.com>  Mon, 13 Feb 2006 08:48:02 +0100
+
+openldap2.2 (2.2.26-5build1) dapper; urgency=low
+
+  * Rebuild against openssl 0.9.8.
+
+ -- Martin Pitt <martin.pitt@ubuntu.com>  Mon, 30 Jan 2006 10:48:59 +0000
+
+openldap2.2 (2.2.26-5) unstable; urgency=low
+
+  Steve Langasek <vorlong@debian.org>:
+  * debian/slapd.templates: Fix typo durin -> during; re-run
+    debconf-updatepo, fixing up the fuzzies (closes: #319596).
+
+  Torsten Landschoff <torsten@debian.org>:
+  * debian/control: Remove conflicts with ldap-server and ldap-client 
+    virtual packages in preparation for new OpenLDAP packages.
+  * debian/slapd.scripts-common: Wipe the admin password from the 
+    debconf database after installation (closes: #260204).
+  * Semi-automatic update of config.sub and config.guess.
+
+ -- Torsten Landschoff <torsten@debian.org>  Mon, 31 Oct 2005 09:06:46 +0100
+
+openldap2.2 (2.2.26-4) unstable; urgency=low
+
+  * [l10n] Vietnamese translations by Clytie Siddall (closes: #316623).
+  * debian/slapd.templates: Fix typos occured -> occurred (closes: #316624).
+  * libraries/libldap/url.c: Apply patch from upstream CVS to fix URI 
+    parsing (closes: #317100).
+
+ -- Torsten Landschoff <torsten@debian.org>  Tue, 19 Jul 2005 20:52:17 +0200
+
+openldap2.2 (2.2.26-3) unstable; urgency=low
+
+  * [SECURITY] Applied the patch available at 
+      http://bugzilla.padl.com/show_bug.cgi?id=210
+    to force libldap to really use TLS when requested in /etc/ldap/ldap.conf
+    (cf. CAN-2005-2069). Clients still will use libldap2 from openldap2
+    source package so this is only to prepare unleashing the libraries of
+    OpenLDAP 2.2 for unstable...
+
+ -- Torsten Landschoff <torsten@debian.org>  Sun,  3 Jul 2005 10:41:37 +0200
+
+openldap2.2 (2.2.26-2) unstable; urgency=low
+
+  * Assembled changes from patches supplied by Peter Marschall (thanks,
+    Peter):
+  | debian/move_files: Move slapd and slurpd to /usr/sbin and adjust symlinks
+    (closes: #316354).
+    + debian/slapd.links: Remove symlinks from /usr/sbin to /usr/lib.
+  | debian/rules: Don't install cron jobs needed for GnuTLS as long as we are
+    using OpenSSL.
+  | debian/control: Remove build-dependencies needed for GnuTLS 
+    (closes: #316355).
+    + Require libsasl >= 2.1.18 as recommended by OpenLDAP project.
+  | Update quicktool patch from Quanah Gibson-Mount (closes: #316361).
+  | debian/slapd.init: Use /bin/sh as shell when running db_recover
+    (closes: #316350).
+  | debian/configure.options: Enabled dynlist and proxycache overlays
+    (closes: #316351).
+
+  * debian/po/de.po: Apply typo correction patch (closes: #313809).
+  * debian/po/fr.po: Apply updates by Christian Perrier (closes: #315122).
+
+ -- Torsten Landschoff <torsten@debian.org>  Fri,  1 Jul 2005 12:53:18 +0200
+
+openldap2.2 (2.2.26-1) unstable; urgency=low
+
+  * New upstream release. 
+  * debian/slapd.init: Run db_recover as the user configured for slapd
+    (closes: #311331).
+  * debian/po/cs.po: Add Czech translation by Miroslav Kure (closes: #312064).
+  * Run debconf-updatepo, oh my :(
+  * Update configure via libtoolize -cf; aclocal-1.4; autoconf2.50.
+  * configure.in: Try to fix memcmp check (probably does not work anymore, but
+    we should have a working memcmp on all Debian systems anyway).
+  * debian/rules: Remove config.{sub,guess} before installing new versions
+    (just in case there were symlinks for them...).
+
+ -- Torsten Landschoff <torsten@debian.org>  Tue, 21 Jun 2005 12:06:40 +0200
+
+openldap2.2 (2.2.23-8) unstable; urgency=low
+
+  * debian/DB_CONFIG: Fixed the log cache configuration (used the wrong
+    command so there was about no effect).
+
+ -- Torsten Landschoff <torsten@debian.org>  Mon, 30 May 2005 08:48:10 +0200
+
+openldap2.2 (2.2.23-7) unstable; urgency=low
+
+  * debian/slapd.scripts-common: Install the default DB_CONFIG for each
+    database loaded from LDIF which didn't have a DB_CONFIG before.
+  * (automatic) Updated config.sub and config.guess from autotools-dev.
+
+ -- Torsten Landschoff <torsten@debian.org>  Mon, 30 May 2005 08:08:37 +0200
+
+openldap2.2 (2.2.23-6) unstable; urgency=low
+
+  Torsten Landschoff <torsten@debian.org>:
+  * debian/po/ja.po: Merge updates from Kenshi Muto (closes: #303505).
+  * debian/po/fr.po: Merge updates from Christian Perrier (closes: #306229).
+  * debian/slapd.scripts-common: If the user enters the empty value for 
+    the database dumping directory use the default value. Seems like the
+    readline interface does not care about the default value 
+    (closes: #308234).
+  * debian/slapd.postinst: Make sure the debhelper commands are executed 
+    in all cases (closes: #310422).
+  * Merged suggested changes by Eugene Konev to automatically run 
+    db_recover before starting slapd (closes: #255276).
+    + debian/slapd.init: Run db_recover if enabled and available and no 
+      slapd process running.
+    + debian/slapd.default: Add configuration option to disable it.
+  * Applied and improved patch by Matthijs Mohlmann to support migration
+    from ldbm to bdb backend.
+    + debian/slapd.config: Ask if migration is wanted.
+    + debian/slapd.postinst: Update configuration from ldbm to bdb if yes.
+    + debian/slapd.scripts-common: Implemented some parts in their own
+      functions.
+  * Add a README.DB_CONFIG.gz and reference it where referring to BDB 
+    configuration.
+  * Update default DB_CONFIG with some senseful values.
+
+  Steve Langasek <vorlon@debian.org>:
+  * libraries/libldap_r/Makefile.in: make sure the ximian-connector ntlm
+    patch is applied to libldap_r, not just to libldap
+  * debian/move_files: make libldap a symlink to libldap_r, as carrying
+    two versions of this library around is more trouble than it's worth,
+    and can cause glorious segfaults down the line
+
+ -- Torsten Landschoff <torsten@debian.org>  Mon, 30 May 2005 08:07:49 +0200
+
+openldap2.2 (2.2.23-5) unstable; urgency=low
+
+  Torsten Landschoff <torsten@debian.org>:
+  * debian/lintian-overrides: Add. Contains lintian warnings/errors to
+    override for each package (plus comments).
+    + debian/move_files: Automatically install applying overrides into
+      each package.
+
+  Steve Langasek <vorlon@debian.org>:
+  * configure.in: reinstate the remainder of the fix for 195990 from
+    2.1.22-2: give preference to -lpthread over -pthread in configure.in,
+    because some archs (mipsel, at least) don't like -pthread.
+
+ -- Steve Langasek <vorlon@debian.org>  Sun, 24 Apr 2005 05:01:02 -0700
+
+openldap2.2 (2.2.23-4) unstable; urgency=low
+
+  Torsten Landschoff <torsten@debian.org>:
+  * debian/control: Make the requirement for debconf a pre-dependency as
+    we are using it from the maintainer scripts.
+  * debian/slapd.preinst: Always use debconf (don't check for availability).
+  * debian/slapd.scripts-common: Remove the alert_user function which
+    was there to output an error message in case debconf is not available.
+
+  Steve Langasek <vorlon@debian.org>:
+  * debian/fix_ldif: Add code to fix up oddly formatted integer attribs;
+    limited use because it only fixes those attributes that we have
+    prior knowledge of (i.e., those in the default schemas we ship), but
+    it's something at least.  Closes: #302629.
+  * debian/fix_ldif: Also change fix_ldif to not chew up everything that
+    has a # in the line: treat lines beginning with # as comments, but #
+    is a valid character in an attribute value.
+  * debian/rules: Fix the check for missing lib symbols to use
+    LD_LIBRARY_PATH, so the package builds on systems that don't already
+    have libldap-2.2-7 installed.  Closes: #305785.
+  * debian/po/ja.po: Use the partial translation provided by Kenshi Muto.
+
+  Stephen Frost <sfrost@debian.org>:
+  * debian/slapd.scripts-common: Make sure - ends up at the end of the
+    bracket expression given to grep so it's not treated as a range
+    (closes: #302743).
+
+ -- Steve Langasek <vorlon@debian.org>  Sat, 23 Apr 2005 22:01:20 -0700
+
+openldap2.2 (2.2.23-3) unstable; urgency=low
+
+  Steve Langasek <vorlon@debian.org>
+  * libraries/libldap_r/Makefile.in: Code that uses pthreads *must* be
+    linked with -pthread, even if it's a library; without this, the
+    libldap_r library ends up with dangling unversioned reference to
+    pthread_create() which gets resolved to a wrong version that causes
+    segfaults on 64-bit platforms.  Closes: #304549.
+  * debian/rules: error out on build if an installed library has
+    undefined symbols; future-proofing against a repeat of #304549.
+  * debian/slapd.postinst: don't dump and reload directories unless we
+    know we're upgrading from an incompatible version!  Closes: #304840.
+  * debian/slapd.scripts-common: don't use merge_logical_lines for
+    functions that will be writing back to the config; the code is not
+    as pretty now, but the output is much less ugly. Closes: #303243.
+  * debian/slapd.examples, debian/slapd.scripts-common,
+    debian/slapd.links, debian/move_files: install DB_CONFIG in
+    /usr/share/slapd/ instead of /usr/share/doc/slapd/examples/; this
+    simplifies the code, and ensures users who don't install
+    /usr/share/doc aren't penalized.  Create links for the DB_CONFIG and
+    slapd.confg templates to /usr/share/doc/slapd/examples, since these
+    are worthwhile examples as well.
+  * Updated maintainer scripts to keep DB_CONFIG for LDAP databases over
+    upgrades (closes: #265860).
+  * Move slappasswd to the slapd package, since it's now a symlink and
+    isn't actually useful without the slapd binary (closes: #304339).
+
+ -- Torsten Landschoff <torsten@debian.org>  Thu, 21 Apr 2005 01:29:57 +0200
+
+openldap2.2 (2.2.23-2) unstable; urgency=low
+
+  * debian/configure.options: Change localstatedir to /var from /var/run
+    as the current upstream version adds /run to that during runtime for 
+    slapi sockets etc. Problem: The database location is specified relative
+    to localstatedir/openldap-data. Another thing to fix...
+    (closes: #298271, #304491).
+  * debian/slapd.scripts-common (load_databases): Reimplement automatic 
+    fixing of LDIF data via the fix_ldif script. Only tried if an 
+    initial slapadd using the original LDIF data fails. With this change
+    upgrading from woody for some simple cases does work again.
+  * Disabled the version check for Berkeley DB in upstream code. Any 
+    libdb4.2 package should work but of course using the latest will give
+    you the best results (closes: #300851).
+  * debian/slapd.scripts-common (import_database): Removed, no longer used.
+  * debian/slapd.scripts-common: Store the diagnostic output from
+    slapadd and output it before aborting if the command failed.
+  * debian/po/fr.po: Use the translations provided by Christian Perrier
+    (closes: #304141).
+  * debian/slapd.scripts-common: Use the -q option during slapadd to 
+    improve performance.
+  * debian/slapd.templates (slapd/dump_database_destdir): Apply rewording 
+    changes from Thomas Prokosch. Gives the user more information about
+    the usage of that directory.
+    + Run debconf-updatepo to update the translation templates.
+  * debian/slapd.templates: Clean up the debconf templates of the slapd
+    packages by merging the changes suggested by Christian Perrier
+    (closes: #302829). Thanks, Christian!
+    + Changed the wording of some of the templates.
+    + Adapt to the DTSG (Debconf Templates Style Guide).
+    + Removed item slapd/admin which is not used anymore.
+    + Run debconf-updatepo and send new fr.po to Christian Perrier.
+  * debian/slapd.postinst: Make a backup copy of slapd.conf before changing
+    anything (closes: #304485).
+  * Trivial improvements: 
+    + Don't ask to move contents of /var/lib/ldap if it does not even
+      exist (but also is not an empty directory...) in initial config.
+    + Move check for current installation status out of configure_dumping.
+
+ -- Torsten Landschoff <torsten@debian.org>  Thu, 14 Apr 2005 19:57:11 +0200
+
+openldap2.2 (2.2.23-1) unstable; urgency=low
+
+  * debian/slapd.scripts-common: Move all shell functions of the maintainer 
+    scripts here to have it all in one place.
+  * Another pass over the maintainer scripts to remove cruft and tidy up
+    the code a bit. Fixed some bugs on the way.
+  * Test upgrade and installation revealed some bugs, mostly typos:
+    + return in shell actually is "return $?", not "return 0" as I though
+    + Referenced $src where $srcdir was meant.
+    + Only load old directories on upgrade and not during initial 
+      installation.
+
+ -- Torsten Landschoff <torsten@debian.org>  Fri,  1 Apr 2005 18:50:21 +0200
+
+openldap2.2 (2.2.23-0.pre6) experimental; urgency=low
+
+  Torsten Landschoff <torsten@debian.org>:
+  * debian/slapd.postinst: Add a testing interface to test the helper
+    functions.
+  * debian/slapd.postinst: Make sure that debconf actually displays the
+    error message even if the user has already seen it before.
+  * debian/slapd.postinst (compute_backup_path): Make function more robust
+    in case we don't know the old version or the suffix of the database.
+    Converted the backup dir to a more simple scheme which should be save
+    against accidental overwriting.
+  * Rewrote part of the maintainer scripts for correct handling of 
+    directory dumps in preinst. New debconf questions etc.
+  * Move the manpage of slappasswd to ldap-utils where slappasswd itself
+    is included (closes: #300212).
+    + debian/control: Add Replaces: slapd << 2.2.23-0.pre6 to ldap-utils.
+    + debian/move_files: Move slappasswd manpage into ldap-utils.
+  * debian/slapd.config: Don't fail if hostname is unset (pulled from 
+    Ubuntu, thanks to Jeff Bailey). 
+  * Applied patch by Quanah Gibson-Mount (directory administrator of Stanford)
+    to add -q option to some tools for quick operation without updating
+    logs. This is mostly for importing directories from LDIF backups.
+  * Go back to libdb4.2 as OpenLDAP is known to have problems with BDB 4.3.
+    + debian/control: Update dependencies for BDB 4.2.
+    + debian/slapd.scripts-common: Mark all databases before this version
+      as incompatible.
+  * Fix some bashisms in maintainer scripts.
+  * debian/slapd.postinst: Include the version of the backup in the 
+    backup of a database directory.
+  
+  Carlo Contavalli <ccontavalli@debian.org>:
+  * debian/slapd.init: Print command line if starting a daemon failed.
+  * debian/slapd.postinst: Handle hdb backend just as if it was bdb.
+  * debian/README.Debian: Add some notes about DB_CONFIG and how to run
+    slapd under a different uid/gid.
+  * Install an example DB_CONFIG file during initial configuration
+    + slapd.postinst: Add a function to implement this and hook it into
+      create_new_configuration.
+    + debian/DB_CONFIG: Example DB_CONFIG that is installed.
+    + debian/slapd.examples: Mark DB_CONFIG as an example.
+  * servers/slapd/daemon.c: Actually change the permissions of the 
+    unix socket if requested using an ldapi url with x-mod.
+  * debian/slapd.scripts-common: change privileges of upgraded databases
+    as indicated by SLAPD_USER and SLAPD_GROUP variables.
+  * debian/slapd.scripts-common,slapd.postinst: corrected some minor 
+    typos.
+
+ -- Torsten Landschoff <torsten@debian.org>  Fri,  1 Apr 2005 12:26:35 +0200
+
+openldap2.2 (2.2.23-0.pre5) experimental; urgency=low
+
+  * Apply NTLM patch from ximian-connector source package.
+  * debian/slapd.postinst: Fix small typo leading to upgrade failures.
+    Added some notes while wading through maintainer scripts.
+  * debian/slapd.postinst: Make slapadd more noisy, writing the new
+    directory to stderr if something goes wrong (should help for
+    bug #236097).
+  * Make slapd.init idempotent by adding --oknodo to start-stop-daemon
+    invocations (closes: #298741). Kudos to Bill Allombert for this
+    patch.
+  * slapd.postinst: Try to fix slapd.conf for syntactic and semantic changes
+    introduced upstream into 2.2.x.
+  * slapd.scripts-common: Make sure directories before 2.2.23 are dumped
+    and reloaded on upgrade.
+
+ -- Torsten Landschoff <torsten@debian.org>  Fri, 11 Mar 2005 18:54:57 +0100
+
+openldap2.2 (2.2.23-0.pre4) experimental; urgency=low
+
+  * Rename libldap2.2 to libldap-2.2-7 to match soname. Updated 
+    debian/{control,rules,...}.
+  * Checked the usage of the ucdata files shipped with libldap2 before. 
+    Actually they stem from liblunicode which is only linked to slapd. 
+    Therefore those files are shipped with slapd now. This change is 
+    relevant so that multiple libldap-2.2-x packages can coexist later.
+  * debian/control: Updated for slapd replacing files from libldap2.
+  * debian/control: Recommend db4.3-util instead of db4.2-util as we are
+    using the former version now for slapd.
+  * debian/control: Add Build-Depends for libperl-dev, this time for
+    real. I wonder what went wrong last time as it built correctly with
+    pdebuild (closes: #297123).
+
+ -- Torsten Landschoff <torsten@debian.org>  Mon, 28 Feb 2005 15:17:52 +0100
+
+openldap2.2 (2.2.23-0.pre3) experimental; urgency=low
+
+  * debian/slapd.prerm: Reformat and fix double stopping of slapd. Find 
+    out which bug we are working around and document it.
+  * debian/configure.options: Enable ACI support (closes: #101602).
+    Looked through the source code and it seems to be properly 
+    insulated to not make a difference when not used.
+  * .../Makefile.in: Remove -s option from install invocations and let
+    dh_strip handle stripping binaries (closes: #264448). 
+  * debian/slapd.postinst: Code cleanup and reading, unused and duplicate
+    code removed. Main body still needs fixing.
+  * debian/slapd.postinst: Fixed chmod --reference calls to keep the
+    permissions of slapd.conf. Putting data into the file using shell
+    redirection recreates the file with default umask and owner, killing
+    the permissions we applied using chod --reference after creating the
+    file. Instead we change the permissions directly before renaming the
+    file now. Wrapped it into a function and update the owner as well. 
+    How do we do this correctly for ACLs etc.!? Thanks to Carlo Contavalli
+    for pointing this out.
+  * servers/slapd/main.c: Log a warning if writing the pidfile or writing
+    the arguments file fails (closes: #261696).
+  * debian/control: Add missing build dependency for perl development 
+    library (closes: #297123).
+
+ -- Torsten Landschoff <torsten@debian.org>  Sun, 27 Feb 2005 17:44:03 +0100
+
+openldap2.2 (2.2.23-0.pre2) experimental; urgency=low
+
+  * servers/slurpd/slurp.h: Relocate the default spool directory to 
+    /var/spool/slurpd again.
+  * Merged some changes done by Fabio M. Di Nitto for the ubuntu 
+    distribution (thanks, Fabio!):
+    + debian/slapd.{postinst,conf}: Checkpoint BDB databases every 512kb
+      or 30 minutes by default.
+    + debian/slapd.scripts-common: Make is_empty_dir less noisy on first
+      install (cosmetic).
+  * Applied some changes suggested by Ondrej Sury: 
+    + debian/rules: Add MAKEVARS variable and set datadir =
+      /usr/share/libldap2.2/ucdata instead of changing build/top.mk as 
+      suggested.
+    + debian/move_files: Install /usr/share/libldap2.2 into libldap2.2
+      and remove duplicate ldap.conf manpage.
+    + debian/control: Let libldap2.2 dependon libldap2 for config files.
+  * Also in Ondrej's patch: 
+    + doc/man/man8/slapd.8: Refer to slapd.conf instead of ldap.h for
+      loglevel documentation. Changed by ubuntu? I don't know...
+  * debian/slapd.README.Debian: Update TLS/SSL information.
+
+ -- Torsten Landschoff <torsten@debian.org>  Fri, 25 Feb 2005 14:44:59 +0100
+
+openldap2.2 (2.2.23-0.pre1) experimental; urgency=low
+
+  * Merge new upstream release 2.2.23.
+  * Change name of source package to openldap2.2.
+  * configure.in: Fix AC_LIBOBJ for configure2.50.
+  * Run libtoolize, aclocal-1.4 and autoconf2.50 to get a working
+    configure script.
+  * debian/slapd.init: Output failure reasons using "$failure" so that
+    no glob substitution is done. Had a hard time grokking why slapd 
+    would mention the contents of the current directory in its error 
+    message...
+  * debian/rules: Disable building -dev packages as we don't want 
+    other packages to link against the new libraries before sarge.
+    Remove the binary-indep target from the binary dependends list.
+  * debian/control: Move packages that are no longer build into control-dev.
+  * debian/configure.options: Build against OpenSSL with --with-tls
+    (this can only be done for slapd itself, we need GnuTLS support
+    before enabling this for libldap2.2-dev).
+  * debian/control: Update build dependencies for libdb4.3 and OpenSSL.
+
+ -- Torsten Landschoff <torsten@debian.org>  Wed, 23 Feb 2005 19:29:38 +0100
+
+openldap2 (2.2.18-0.pre2) experimental; urgency=low
+
+  * debian/check_config: Make sasl2 check more robust against file 
+    format changes in config.status.
+  * debian/libldap2.shlibs: Remove.
+  * Update configure script using libtoolize, aclocal-1.4 and autoconf2.50
+    to fix wrong shared library dependency in libldap2.2 (depended on 
+    libldap2 by linking against the system's liblber).
+  * debian/libldap2.README.Debian: Move to libldap2.2.README.Debian.
+  * Lintian cleanup:
+    + Run debconf-updatepo for debian/rules clean and manually as
+      requested.
+    + Update config.guess and config.sub in debian/rules clean as well.
+      First update done.
+    + debian/rules (install): Fix the manpage section of the admin commands 
+      from 8C to 8.
+    + debian/rules (binary-arch): Run dh_fixperms to fix the permissions 
+      on shared libraries.
+
+ -- Torsten Landschoff <torsten@pulsar.galaxy>  Thu, 13 Jan 2005 11:53:28 +0100
+
+openldap2 (2.2.18-0.pre1) experimental; urgency=low
+
+  * New upstream release.
+  * Disable TLS for now.
+  * debian/rules: Don't run autoheader and autoconf.
+  * debian/configure.options: Recreated and updated for new setup.
+  * debian/rules: Move slapd, slurpd from /usr/lib to /usr/sbin.
+  * Rename library packages to include the OpenLDAP version.
+  * Remove /etc/ldap/ldap*.conf from libldap2.2 to avoid clash with
+    libldap2. Also add Replaces entry for libldap2 to allow overwriting
+    for now. Needs fixing...
+  * Instead of moving slapd from /usr/lib to /usr/sbin create a symlink.
+    Seems like slapadd etc. are now all included in the slapd binary
+    and all link to its binary.
+  * debian/rules: Run dh_link for arch dependend packages.
+  * configure: Fix broken libdb checking which forced static building of 
+    back-bdb.
+  * debian/slapd.conf: Fix access directive to use "attrs=" instead of
+    "attribute=" which wasn't officially supported anyway.
+
+ -- Torsten Landschoff <torsten@debian.org>  Wed,  3 Nov 2004 09:57:14 +0100
+
+openldap2 (2.1.30-3) unstable; urgency=high
+
+  * Urgeny high since previous releases were hardly usable (at least
+    with TLS).
+  * Roland Bauerschmidt <rb@debian.org>
+    + libraries/libldap/gnutls.c, libraries/libldap/tls.c,
+      include/ldap_pvt_gnutls.h: Use callback with
+      gnutls_certificate_set_params_function to generate dh_params and
+      rsa_params (this is also the way, it's done with OpenSSL). We need
+      GNUTLS 1.0.9 for this. With the new version of libgcrypt, we also
+      need to initialize threading explicitly. The previous
+      segmentation faults resulted from the *global* param structure
+      being recreated and freed for every session. Many thanks to
+      Matthias Urlichs who helped debugging a lot and also packaged
+      GNUTLS 1.0.16 very quickly... Closes: #244827.
+    + debian/control: Add build dependency to libgcrypt11-dev (we're
+      initializing it directly now) and change libgnutls10-dev to
+      libgnutls11-dev.
+    + libraries/libldap/gnutls.c: in tls_gnutls_need_{dh,rsa}_params
+      (formerly ldap_gnutls_need_...), create temp files more securely,
+      doing unlink before opening and opening them with O_EXCL. This is
+      necessary because under Linux 2.6 all threads have the same PID.
+      Thanks to Andrew Suffield for pointing this out.
+    + debian/slapd.cron.daily: cron job to remove GNUTLS rsa_export and
+      dh param cache files every day.
+    + debian/slapd.README.Debian: add note that we use GNUTLS rather
+      than OpenSSL.
+
+ -- Roland Bauerschmidt <rb@debian.org>  Mon, 26 Jul 2004 18:41:23 +0200
+
+openldap2 (2.1.30-2) unstable; urgency=low
+
+  * Roland Bauerschmidt <rb@debian.org>
+    + debian/slapd.scripts-common: add missing space before !
+      Closes: #251036, #253633, #257513.
+  * Torsten Landschoff <torsten@debian.org>
+    + Applied patch by Ralf Hack to support non-standard config file
+      location in /etc/default/slapd (closes: #229195).
+    + Applied patch to fix handling of abandoned commands 
+      (closes: #254183). Thanks to Peter Marschall for submitting it.
+    + Applied patch to fix memory leak after search (closes: #254184).
+      Thanks again, Peter!
+    + Applied trivial patch to support logging to DAEMON facility
+      as well as LOCAL* (closes: #254186). Here you are, Peter ;)
+
+ -- Roland Bauerschmidt <rb@debian.org>  Fri, 09 Jul 2004 15:56:06 +0200
+
+openldap2 (2.1.30-1) unstable; urgency=low
+
+  * Torsten Landschoff <torsten@debian.org>:
+    + debian/control: Have slapd conflict with libltdl3 version 1.5.4-1
+      as with that version loading of .so files is broken which breaks
+      slapd (closes: #249152).
+    + Applied patch to fix Perl backend (closes: #245347). Kudos
+      to Peter Marschall.
+    + debian/configure.options: Enable building of Perl backend.
+
+  * Roland Bauerschmidt <rb@debian.org>
+    + debian/slapd.templates: replace 'domain' with 'DNS domain name'
+      which is little more specific
+    + debian/slapd.config: check if the domain has a valid syntax to
+      prevent slapadd from failing. Closes: #235749.
+    + New upstream version with fix for NS-MTA-MD5 hash length 
+      checking. Closes: #226583.
+
+ -- Torsten Landschoff <torsten@debian.org>  Mon, 24 May 2004 23:33:21 +0200
+
+openldap2 (2.1.29-2) unstable; urgency=low
+
+  * Roland Bauerschmidt <rb@debian.org>
+    + debian/rules: Revert change to install ldapadd as symlink.
+      Somehow, with that change, ldapadd didn't get installed at all.
+      Closes: #243537.
+
+ -- Roland Bauerschmidt <rb@debian.org>  Tue, 13 Apr 2004 19:49:55 +0200
+
+openldap2 (2.1.29-1) unstable; urgency=low
+
+  * Stephen Frost <sfrost@debian.org>
+    + libraries/gnutls.c: Generate and store RSA/DH parameters,
+      based off a patch by Petr Vandrovec (though changed alot).
+      Closes: #234639, #234593
+
+  * Roland Bauerschmidt <rb@debian.org>
+    + Merged new upstream release.
+    + debian/slapd.prerm: add #DEBHELPER# token.
+    + debian/control: have slapd depend on debconf (>= 0.5) to ensure
+      it supports the seen flag.
+    + debian/rules: ldapadd is installed as a hardlink to ldapmodify;
+      use a symlink instead.
+    + debian/slapd.{scripts-common,postinst,preinst,config}: Add new
+      function read_slapd_conf that evaluates include statements.
+
+ -- Torsten Landschoff <torsten@debian.org>  Mon, 12 Apr 2004 15:27:55 +0200
+
+openldap2 (2.1.26-1) unstable; urgency=low
+
+  * Torsten Landschoff <torsten@debian.org>:
+    + Merged new upstream release.
+    + debian/slapd.templates (slapd/purge_database): Set default value to 
+      false.
+    + debian/slapd.config (manual_configuration_wanted): Don't exit
+      from the script directly if the user wants to configure 
+      slapd manually (exit 0 -> return 0).
+    + Build-depend on libgnutls10-dev instead of libgnutls7-dev and 
+      rebuild (closes: #233833).
+    + Move previous content of /var/lib/ldap away during creation of 
+      an initial directory (closes: #228886, #233512).
+    + debian/slapd.postrm: Remove flag files in /var/lib/slapd on purge.
+    + Removed functionality (verbose error messages) from gnutls.c until
+      it compiled with libgnutls10-dev :-((
+    + debian/slapd.postinst: Overwrite existing /etc/ldap/slapd.conf (only
+      reached during initial installation/dpkg-reconfigure).
+    
+ -- Torsten Landschoff <torsten@debian.org>  Mon, 23 Feb 2004 09:36:32 +0100
+
+openldap2 (2.1.25-1) unstable; urgency=low
+
+  * Roland Bauerschmidt <rb@debian.org>:
+    + New upstream version.
+      - Build against libdb4.2. Hopefully, this resolves the BDB
+        lock ups when configured improperly.
+    + debian/control: Have ldap-utils depend on the same version of
+      libldap2, and libldap2 conflict with ldap-utils (<= 2.1.23-1).
+      Closes: #216661.
+    + debian/slapd.{templates,config}: Check if there are slave
+      databases in slapd.conf lacking an updateref option, and warn
+      about it. Closes: #216797.
+    + debian/slapd.{templates,config,postinst,conf}: Ask which
+      database backend to use (BDB or LDBM).
+    + debian/slapd.README.Debian: cleanup
+    + servers/slapd/back-bdb/dbcache.c: Turn off subdatabases. This
+      is an incompatible database format change, but according to
+      Howard Chu "using them (subdatabases) is known to cause deadlocks
+      on multiprocessor machines, among other issues."
+    + debian/control: add Recommends: db4.2-util to slapd
+    + debian/control: add Recommends: libsasl2-modules to slapd and
+      ldap-utils. Closes: #224058.
+    + debian/slapd.{scripts-common,preinst,postinst}: Extended dump
+      and restore code to deal with different versions for different
+      backends.
+    + debian/control: Geez, centipede seems to have vanished a long
+      time ago. So don't claim it's included in the slapd package.
+    + debian/slapd.docs: created with servers/slapd/back-sql/
+      rdbms_depends. Closes: #225807.
+  
+  * Torsten Landschoff <torsten@debian.org>:
+    + debian/move_files: Install slappasswd into ldap-utils instead 
+      of slapd as it's useful without slapd as well (closes: #228705).
+    + debian/control: Make ldap-utils Replaces: slapd < 2.1.25 because
+      of that change.
+    + debian/control: Use libdb4.2-dev instead of libdb4.1-dev as a
+      number of problems seem to be related to DB 4.1.
+
+ -- Torsten Landschoff <torsten@debian.org>  Fri,  6 Feb 2004 20:48:22 +0100
+
+openldap2 (2.1.23-1) unstable; urgency=low
+
+  * Roland Bauerschmidt <rb@debian.org>:
+    + New upstream version.
+    + Applied fix for admin password breakage from Michael Beattie
+      <mjb@debian.org>. Closes: #214270.
+    + Added Dutch Debconf template translation by cobaco@linux.be.
+      Closes: #215373.
+    + Bumped Standards-Version (no changes needed).
+  
+  * Torsten Landschoff <torsten@debian.org>:
+    + debian/move_files: Install slappasswd into ldap-utils instead
+      of slapd (closes: #228705).
+
+ -- Roland Bauerschmidt <rb@debian.org>  Sat, 18 Oct 2003 19:56:54 +0200
+
+openldap2 (2.1.22-3) unstable; urgency=low
+
+  * Call perl -w to run debian/dh_installscripts-common. Closes: #214054.
+
+ -- Roland Bauerschmidt <rb@debian.org>  Sat,  4 Oct 2003 14:22:11 +0200
+
+openldap2 (2.1.22-2) unstable; urgency=high
+
+  * Stephen Frost <sfrost@debian.org>
+    + servers/slapd/daemon.c: Apply patch from head for select handling.
+    + debian/rules: Fix build options to optimize correctly and to use
+      DEB_BUILD_OPTIONS (Policy, 10.1). Closes: #202306
+    + debian/slapd.conf: Add in ACL for root DSE explicitly.
+    + debian/slapd.init: Add --oknodo in stop_slurpd. Closes: #202592
+    + debian/rules: Need quotes around $(CFLAGS) on configure line.
+    + debian/slapd.init: Remove \'s before quotes around pidfile.
+    + debian/slapd.init: Add support for -h slapd flag. Closes: #201991
+    + debian/slapd.default: Add variable $SLAPD_SERVICES for slapd -h.
+    + libraries/libldap/tls.c: Apply patch from asuffield in #202741 to
+      fix subjectAltName usage.  Closes: #202741
+
+  * Torsten Landschoff <torsten@debian.org>:
+    + Fix invocation of "head" in maintainer scripts and replace usage of
+      [ foo -a bar ] by [ foo ] && [ bar ] (closes: #203292).
+    + debian/slapd.postrm: Small cleanup, only remove the directory, not
+      the backups, on purge.
+    + debian/rules: Don't run the upstream install target if we did not
+      rebuild the whole tree. Makes debugging maintainer script much more
+      tolerable.
+    + debian/slapd.config: Cleaned up and restructured for readability.
+    + debian/slapd.templates: Replaced the invalid_suffix template with
+      invalid_config which is more general and can be used for any
+      inconsistency in the initial configuration.
+    + debian/slapd.postinst: Rewritten to eliminate all that spaghetti.
+      Did not yet implement all old features again...
+      - Now the #DEBHELPER# part is always reached so that the daemon
+        will be restarted even if no automatic configuration is wanted
+        (closes: #204008).
+    + Fixed the undefined symbols in libldap_r.so.2 (closes: #195990).
+    | configure.in: Try -lpthread before -pthread to link the thread
+      library. libtool does not pass -pthread through, -lpthread seems
+      to work though.
+    | libraries/libldap_r/Makefile.in: Add $(LTHREAD_LIBS) to
+      UNIX_LINK_LIBS so that pthread is linked when creating a shared library
+      as well.
+
+  * Roland Bauerschmidt <rb@debian.org>:
+    + debian/configure.options: change --localstatedir=/var/lib to
+      --localstatedir=/var/run. Since localstatedir isn't used anywhere
+      in the code, except for the ldapi socket (and examples in the
+      manpages which are correct at the moment anyway), all this change
+      does should be changing the default location of the ldapi socket
+      from /var/lib/ldapi to /var/run/ldapi. Closes: #160965.
+    + libraries/libldap/tls.c: In get_ca_list, walk through CACERTDIR
+      manually if building against GNUTLS (since there is no equivalent
+      to SSL_add_dir_cert_subjects_to_stack). Closes: #205609.
+    + debian/slapd.preinst: create /var/backups/ldap/$oldver with
+      permissions 0700. Also change permissions for /var/backups/ldap
+      to 0700 if it already exists. Closes: #209019.
+    + Added Japanese translation of Debconf templates by Kenshi Muto
+      <kmuto@debian.org>. Closes: #210731.
+    + debian/slapd.{postinst,preinst,config}: Replaced duplicate
+      implementations of the same functions with one version and moved
+      those into debian/slapd.scripts-common which will be included by
+      debian/dh_installscripts-common.
+    + debian/slapd.preinst: before dumping the database, check if the
+      backend is supported
+    + debian/slapd.postinst:
+      - add -q to grep call for allow bind_v2
+      - readded pre-2.1 (woody) upgrade path (that is, dumping, fixing
+        and reimporting the database)
+
+ -- Roland Bauerschmidt <rb@debian.org>  Fri,  3 Oct 2003 15:35:29 +0200
+
+openldap2 (2.1.22-1) unstable; urgency=low
+
+  * Stephen Frost <sfrost@debian.org>:
+    + New upstream version (minor changes).
+    + debian/control: Change build-deps to autoconf2.13, Closes: #201482
+    + debian/rules: Add dh_compress -i for binary-indep.
+    + debian/slapd.postinst: Give variable for read (avoids bashism).
+    + configure/.in: Use upstream's version of back-meta/back-ldap fix.
+
+ -- Stephen Frost <sfrost@debian.org>  Wed, 16 Jul 2003 08:42:23 -0400
+
+openldap2 (2.1.21-2) unstable; urgency=low
+
+  * Stephen Frost <sfrost@debian.org>:
+    + debian/slapd.preinst: slapcat here if possible, if slapcat not
+      available then slapcat in postinst.  Also remove old unused
+      function.
+    + debian/slapd.postinst: Check if slapcat in preinst worked and use
+      those results in preference.  Also moved to using /var/backups/ldap.
+    + servers/slapd/daemon.c: Provide more information on socket/bind 
+      failures. Patch submitted upstream. Closes: #94967.
+    + ./configure, ./configure.in: Fix check for back_ldap in back_meta.
+      back_ldap now included as module.  back_ldap and back_meta appear
+      to load fine, though order may matter.  Closes: #196995.
+    + debian/control: Add versioned Depends on perl, need recent version
+      for migration script.
+    + debian/slapd.{pre,post}inst: Allow for whitespace in postinst 
+      before database definitions
+    + debian/control: Drop the libldap2-dev Depends that aren't actually
+      necessary.
+    + debian/slapd.preinst: Add create_sed_script to create the script to
+      deal with multi-line commands in slapd.conf.  Modify things to use
+      sed script to preprocess slapd.conf before using it.  Remove
+      support for whitespace preceeding commands.
+    + debian/slapd.postinst: Add create_sed_script here too and modify
+      everything to use it as necessary.  Also change everything to
+      reference $SLAPD_CONF instead of /etc/ldap/slapd.conf everywhere.
+      Remove support for whitespace preceeding commands.
+    + debian/slapd.postinst: Removed all tabs.  Changed all sed scripts
+      to used [:space:] instead of [space tab].
+    + debian/slapd.postinst: Removed debugging statements from ldap_v2
+      support handling code.
+    + debian/slapd.preinst: Changed to use mktemp for sed script.
+    + debian/slapd.postinst: Changed to use mktemp for sed script.
+    + debian/slapd.config: If no hostname set just use debian.org.
+    + contrib/ldapc++/config.{sub,guess}: Resync back to upstream, no 
+      reason not to, we don't even build this stuff...
+    + debian/control: Change build-depends to libgnutls7-dev instead of
+      libssl-dev.
+    + debian/rules: Now run autoconf && autoheader to pick up on the
+      configure.in changes needed for GNU TLS.
+    + debian/copyright: Added Steve Langasek (SL) copyright statement.
+    + Patch from Steve Langasek for GNU TLS support, Closes: #198553
+    | include/ldap_pvt_gnutls.h: Added for GNU TLS
+    | configure.in: Now uses GNU TLS where available.
+    | servers/slapd/schema_init.c: Modified for GNU TLS- some functions
+      removed because GNU TLS layer does not support them yet.
+    | build/install-sh: Added for new autoconf.
+    | libraries/libldap/Makefile.in: Changed to compile GNU TLS portions.
+    | libraries/libldap/getdn.c: Stub function added, GNU TLS layer does 
+      not support TLS certificates for authentication yet.
+    | libraries/libldap/tls.c: Now calls GNU TLS functions instead of
+      OpenSSL.
+    | libraries/libldap/gnutls.c: Added to support GNU TLS in place of
+      OpenSSL for TLS connections.
+    | libraries/libldap_r/Makefile.in: Changed to compile GNU TLS portions.
+    + debian/slapd.postinst: remove temp file if upgrading or doing a
+      reconfigure but the OLDSUFFIX and basedn match so that we do not
+      move an empty file overtop of slapd.conf.  Closes: #190797.
+    + debian/slapd.init: Inform user when not starting slapd due to
+      no configuration file found.  Deals with users who select to not
+      configure slapd during installation.
+    + debian/slapd.init: Removed cat <<-EOF and got rid of associated
+      tabs; best to not depend on tab vs. space distinction.
+    + debian/slapd.config: Change debconf question names to be fully
+      qualified in the $var from the for loop- organization is under
+      shared/ and domain is under slapd/, not both under slapd/.
+    + debian/slapd.postrm: Can not depend on debconf being around in
+      postrm so check before attempting to source it.  Also protect
+      against failure from db_get.
+    + debian/slapd.postinst: Check for old directory and move it out
+      of the way if it exists on new configure or reconfigure.
+    + debian/slapd.postinst: Fix db_input's for error messages,
+      should be high priority and need to || true them.
+    + debian/slapd.postinst: Do not error exit once we've told the
+      user about the problem, if there was one, with slapcat/slapadd.
+    + debian/slapd.postinst: Make sure we get the organization before
+      we attempt to fix_ldif on old slapcat output.  Default to unknown
+      if the organization is not set.
+    + debian/slapd.postinst: Be sure that slapd has been stopped before
+      attempting to fix and slapadd old slapcat.
+    + debian/slapd.postinst: Do not use --exec with s-s-d in postinst.
+    + debian/slapd.postinst: grep calls need to be || true'd when no
+      matching lines found is possible (this case is handled).
+    + debian/slapd.postinst: Be very sure slapd has stopped before
+      attempting to upgrade database.
+    + debian/slapd.preinst: Use either the pidfile or exec if pidfile
+      is not available when stopping.  Do not put \"\" around pidfile.
+      Use $oldver instead of $2.
+    + debian/slapd.config: Reask questions on a reconfigure.  Use the
+      same logic as slapd.postinst for when to ask questions regarding
+      the db.  Be sure to db_go after db_input's.
+    + debian/slapd.templates: Fix allow_bind_v2 short description to
+      make more sense since the default is off.
+    + debian/slapd.preinst: Use perl instead of sed for handling conf.
+    + debian/slapd.postinst: Use perl instead of sed for handling conf,
+      use old sed method to insert \n's, user invoke-rc.d when slapd
+      needs to be stopped.  Assume preinst shuts slapd down for upgrade.
+    + debian/slapd.postinst: Only stop slapd on reconfigure.
+
+  * Torsten Landschoff <torsten@debian.org>:
+    + doc/man/man8/slapd.8: Refer to slapd.conf(5) for a description of 
+      the debugging level (closes: #176980).
+    + debian/move_files: Kill of the static archives of our backend 
+      modules as they are of absolutely no use.
+
+  * Steve Langasek <vorlon@debian.org>:
+    + debian/slapd.postinst: Add a new function, get_database_list, that
+      prints out the list of configured databases from slapd.conf
+      one row at a time. Move all of the upgrade handling into a
+      loop, and iterate through the configured databases.  Since the
+      while loop is in fact a subshell, be sure to handle errors
+      correctly.  We also have to look at the configured directory
+      for each database, instead of assuming /var/lib/ldap.
+      Closes: #190155, #190156.
+    + debian/slapd.preinst: Simplify the handling of error status: if
+      the slapcat fails, just remove the ldif file.  Also, add the
+      suffix to the name of the output file, and add the
+      get_database_list function here as well.
+
+  * Roland Bauerschmidt <rb@debian.org>:
+    + debian/rules: call dh_makeshlibs with -plibldap2 rather than just
+      with libldap2
+    + debian/slapd.postinst: Add question about no configuration.
+    + debian/slapd.templates: Add template for no config question.
+    + debian/slapd.templates: Add template for invalid suffix.
+    + debian/slapd.config: Add no configuration option.  Closes: #87986
+    + debian/slapd.config: Complain to the user on invalid domain/org.
+
+ -- Stephen Frost <sfrost@debian.org>  Tue, 15 Jul 2003 12:37:05 -0400
+
+openldap2 (2.1.21-1) unstable; urgency=low
+
+  * Torsten Landschoff <torsten@debian.org>:
+    + Merged new upstream release.
+  
+  * Stephen Frost <sfrost@debian.org>:
+    + debian/control: Add libbind-dev and bind-dev to the conflicts for 
+      slapd, the libs in them can end up being used even when not 
+      compiled against causing getaddrinfo() to fail. Closes: #166777
+    + debian/copyright: Flush out the copyright file to include all found 
+      copyrights and updates to those.
+    + debian/copyright: Add clarification of MA license
+    + debian/copyright: Add clarification of JC license
+    + debian/slapd.templates: More clearly inform users of important 
+      config change.  Closes: #194192.
+    + debian/control: Remove patch from build-depends (dpkg-dev depends on it)
+    + debian/fix_ldif: Correctly handle base64-encoded DNs.  Closes: #197014.
+    + debian/slapd.templates: Added templates for asking about LDAPv2 support 
+      and telling the user of slapcat/slapadd failures during upgrade. 
+    + debian/slapd.postinst: Added support for adding LDAPv2 support
+    + debian/slapd.postinst: Modified to handle slapcat/slapadd failure.
+      In the event of an upgrade failure the database will be left untouched
+      and the user notified.  Closes: #192431
+    + debian/slapd.postinst: Use ldif_dump_location in more places...
+    + debian/slapd.prerm: Check if upgrade failed and assume bad old init.d
+      script was used and attempt to shut down slapd with --oknodo in case
+      slapd isn't running.  Closes: #193854. (Again)
+    + debian/slapd.conf: Add commented out allow line
+    + debian/rules: Tell dh_installinit to not touch slapd.prerm now.
+    + debian/slapd.postinst: Do a dry-run with slapadd first and check if
+      that worked or not.  If it did not work then tell the user, otherwise
+      do a real slapadd which should work.
+    + debian/slapd.postinst: Make sure slapd is stopped before doing
+      slapadd/slapcat's and the like. (Note: The woody version does not
+      stop slapd).  Closes: #189777.
+    + debian/slapd.postinst: Check if directories exist before attempting
+      to mkdir them.  Closes: #189947
+    + debian/slapd.README.debian: Add note about runlevel issue. 
+      Closes: #175736
+    + debian/move_files: Copy ldiftopasswd into /usr/share/slapd for users
+      to use, if they find it useful.  Closes: #94963.
+    + debian/slapd.README.Debian: Added note about ldiftopasswd.
+
+  * Roland Bauerschmidt <rb@debian.org>:
+    + debian/slapd.postinst: fixed typos and check for the existence of
+      slapd.conf before reading it.
+
+ -- Torsten Landschoff <torsten@debian.org>  Thu, 19 Jun 2003 17:35:32 +0200
+
+openldap2 (2.1.17-3) unstable; urgency=low
+
+  * Stephen Frost <sfrost@debian.org>:
+    + debian/slapd.init: Add --oknodo for stopping slapd. Closes: #192423, #193854.
+    + debian/slapd.init: Change START_SLURPD to SLURPD_START. Closes: #190724.
+    + debian/libldap2.shlibs: Bump to 2.1.17- 2.1.12 never hit the archive.
+      These should only be bumped when new symbols are added so we should
+      figure out a way to handle checking that.
+    + debian/slapd.dirs: Added /var/run/slapd for pidfile
+    + debian/slapd.conf: Moved pidfile to /var/run/slapd; Needed if running
+      non-root.
+    + debian/slapd.conf: Clean up config file, be more explicit about what
+      directives are 'general', 'backend', and 'database'.  Moved and
+      commented out 'replogfile' since it is database specific, wasn't doing
+      anything where it was and use of it depends on slurpd usage.
+      I consider this solving #151511 since we don't ask if you want to use
+      replication anymore anyway. Closes: #151511
+    + debian/copy_slapd_dev_files: Added to copy the include files for
+      building slapd back-ends.
+    + debian/control: Add warning about libslapd2-dev
+    + debian/control: Add build-depend on po-debconf for dh_installdebconf
+    + debian/slapd.default: Add option for settings SLAPD_CONF file
+    + debian/slapd.init: Changed to use SLAPD_CONF, setting it to
+      /etc/ldap/slapd.conf if it is not specified. Closes: #91318
+    + debian/control: Added libslapd2-dev to control file. Closes: #192163.
+    + debian/rules: Added binary-indep to the binary: build line and flushed
+      it out to build the libslapd2-dev deb.  Added -k to dh_clean since we're
+      building arch and indep debs now.
+    + Maintainer upload, acknowledge NMU. Closes: #98039.
+    + Add debian/po/fr.po from 194740.  Closes: #194740
+    + Add space before ']' on line 113 of postinst. Closes: #194192, #194943
+
+  * Torsten Landschoff <torsten@debian.org>:
+    + debian/control: Enforce libldap2 to be the same version as slapd
+      as slapd (legitimately) uses internal functions of that library
+      (closes: #190164).
+    + debian/slapd.postinst: Fix the regexp for finding the database
+      definitions.
+
+  * Steve Langasek <vorlon@debian.org>:
+    + debian/slapd.preinst: don't use debconf or ldapsearch in the
+      preinst, as this is a policy violation (even if a previous
+      version was installed, it could've been removed-but-not-purged).
+      Closes: #189811, #195029.
+    + debian/slapd.{pre,post}inst: dump & fix up the directory in the
+      postinst, not in the preinst -- using slapcat/slapadd, not
+      ldapmodify.  This ensures that the dump will succeed whenever the
+      database is present, rather than depending on access to an admin
+      dn.  Closes: #190085.
+    + debian/fix_ldif, debian/move_files, debian/copyright: add Dave
+      Horsfall's dn-fixing script, to handle objectClass upgrading
+    + debian/slapd.postinst: Skip the duplicate prompting for the
+      organization name; we're guaranteed to always have one.
+
+ -- Torsten Landschoff <torsten@debian.org>  Fri,  6 Jun 2003 16:56:16 +0200
+
+openldap2 (2.1.17-2) unstable; urgency=low
+
+  * The who-says-slavery-is-dead upload.
+  * Steve Langasek <vorlon@debian.org>:
+    + debian/slapd.postinst: Fix the database regexp.
+    + debian/slapd.postinst: Only add moduleload lines *once* on upgrade
+      from 2.0.  Wrap the backup code with a check for
+      /var/lib/slapd/upgrade_2.0, to guarantee idempotency.
+      Closes: #190401.
+    + debian/slapd.{config,templates,postinst}: On dpkg-reconfigure,
+      don't wipe out an existing config; only merge in any requested
+      changes.  Also, prompt before wiping out the existing db.
+      Closes: #190799.
+    + debian/slapd.{postinst,examples},debian/rules: Move slapd.conf
+      from doc/slapd/examples to /usr/share/slapd, per policy.
+    + debian/slapd.postinst: make sure slapd.conf is always created
+      atomically.
+    + debian/slapd.postrm: If removing databases on package purge,
+      remove any database backups as well.
+  
+  * Torsten Landschoff <torsten@debian.org>:
+    + debian/configure.options: Disable ACIs because they are still 
+      experimental.
+    + debian/control: Change section and priority of libldap2-dev to
+      libdevel and extra respectively (dinstall message).
+    + debian/slapd.preinst: Only query the object classes of the root
+      dn if there was no error parsing the config.
+    + Update templates for po-debconf using the patch submitted by 
+      Andre Luis Lopes (closes: #189933).
+    + Use [[:space:]] instead of [\t ] in sed invocations since the 
+      latter does not seem to work (reported by Daniel Lutz).
+    + debian/control: Add Replaces: entry for openldapd since ldif.5.gz
+      was included in the potato package of that name (closes: #190660).
+    + debian/control: Tighten the build dependency on libtldl3-dev as
+      versions before 1.4.3 required the .la file for dynamic binding
+      (thanks to Josip Rodin for pointing this out).
+
+ -- Torsten Landschoff <torsten@debian.org>  Sat, 19 Apr 2003 02:28:32 +0200
+
+openldap2 (2.1.17-1) unstable; urgency=low
+
+  * New upstream release.
+  * Torsten Landschoff <torsten@debian.org>:
+    + debian/slapd.init: Improve the error reporting. If nothing is output
+      by the failing command don't leave the user alone but print a hint
+      to look into the logfile etc.
+    + debian/control: Require at least version 2.1.3 of libsasl2-dev
+      as this is what the configure script checks for. Pointed out by
+      Norbert Tretkowski.
+    + debian/slapd.{pre,post}inst: Small cleanups, added some comments, 
+      adapted for the removal of the .la files in slapd package. 
+
+ -- Torsten Landschoff <torsten@debian.org>  Sat, 19 Apr 2003 01:59:26 +0200
+
+openldap2.1 (2.1.16-1) unstable; urgency=low
+
+  * New upstream release.
+    + build/top.mk: Remove patch to omit "-static" at linking time. Upstream
+      now respects the --enable-shared flag used at configuration time.
+    + debian/slapd.postinst: Automagically add the module load directives
+      after upgrade as needed.
+    + debian/slapd.config: 
+      - Only ask questions to create a new directory on fresh install.
+      - Ask wether the right modules should automatically be loaded in 
+        slapd.conf.
+    + debian/slapd.templates: Add the templates for autoloading modules
+      and fixing the directory.
+    + debian/slapd.preinst: New script to support upgrading from 2.0. 
+      The old prerm did not stop the daemon so we have to do it here. 
+      Also a first attempt to fix broken LDAP directories not acceptable
+      to 2.1.
+      - Conditionally load debconf when upgrading as it only has to 
+        be available in that case.
+    + debian/slapd.preinst: Dump database before upgrade.
+    + debian/slapd.postinst: Recreate database from dump after upgrade. 
+      Move old database out of the way.
+
+  * Roland Bauerschmidt <rb@debian.org>
+    + debian/slapd.README.Debian: mention that backend database modules are
+      now compiled as shared objects
+
+  * Stephen Frost <sfrost@debian.org>
+    + debian/slapd.conf: Drop the '.la' file extension
+    + debian/move_files: Drop and rm the .la files, they aren't necessary.
+    + debian/slapd.README.Debian: Dropped the .la from the module_load line.
+    + servers/slapd/daemon.c: check slapd_srvurls is not NULL before
+      deref; included in upstream CVS.
+    + servers/slapd/back-*/init.c: Change the munged symbol names to 
+      init_module, they do not need to be munged, and cause problems when
+      they are and not using .la files (which cause other problems)
+    + servers/slapd/module.c: Change to use lt_dlopenext() so we don't
+      need the .la files
+
+ -- Torsten Landschoff <torsten@debian.org>  Wed, 26 Mar 2003 20:34:35 +0100
+
+openldap2.1 (2.1.12-1) experimental; urgency=low
+
+  * Initial release of OpenLDAP 2.1 packages. Closes: #167566, #178014.
+    - this includes support for the >= and <= operators. Closes: #159078.
+    - fixes various upstream bugs. Closes: #171008.
+
+  * Torsten Landschoff <torsten@debian.org>
+    - debian/check_config: Added script to check if OpenLDAP was configured
+      the way we want it.
+    - Don't build special TLS packages anymore - SSL is enabled in the
+      stock ldap library. Everything else will just give me more headaches.
+    - Build against libsasl2 instead of libsasl1. Closes: #176462.
+    - debian/control:
+      - Build-depend on debhelper 4.0 as debian/rules uses DH_COMPAT=4.
+      - Depend on coreutils | fileutils. Closes: #175704, #185676.
+      - Make libldap2 conflict with libldap2-tls which is obsolete now.
+    - debian/rules: Move the long list of configure options to a new
+      file debian/configure.options and read $(CONFIG) from that file.
+    - configure with --enable-aci. Closes: #101602.
+    - debian/slapd.init: Rewrite and add comments.
+      - Add support for running as non-root (closes: #111765, #157037).
+    - servers/slapd/main.c (main): Remove pid file on exit (closes: #162284).
+    - servers/slurpd/slurp.h: Change the default spool directory to
+      /var/spool/slurpd (avoids passing it via -t in init.d).
+    - servers/{slapd,slurpd}/Makefile.in: Install binaries into sbindir
+      instead of libexecdir.
+    - debian/control: Add Stephen Frost to the Uploaders field. Thanks
+      for your help, Stephen!
+    - contrib/ldapc++/config.{guess,sub}: Replaced with current files from
+      autotools-dev (lintian). Not actually neccessary since this part of
+      the package is not currently built but I think this is the best way
+      to shut up lintian :)
+    - build/mod.mk: Use -m 644 instead of -m 755 in installing shared
+      libraries. Shared libraries should not be marked as executable
+      (lintian).
+    - debian/libldap2.conffiles: Remove, since we are using version 4
+      of debhelper which tags everything in /etc as conffile by default.
+    - debian/rules: Change the mode of everything upstream installed into
+      /etc to 0644 as required by policy (lintian).
+    - debian/rules: Call dh_installdeb later in the binary target so that
+      the conffiles are already there for listing. Without this nothing in
+      /etc gets tagged as conffile... (lintian).
+    - debian/rules: Pass the start and stop priority of slapd to
+      dh_installinit in preparation for a postinst supported by debhelper.
+    - debian/rules: Call dh_installdirs again.
+    - Rewrite slapd.config, slapd.postinst, slapd.templates - a first try
+      in getting slapd to configure itself. Way to go.
+
+  * Roland Bauerschmidt <rb@debian.org>
+    - debian/control:
+      - build-depend on libdb4.1-dev instead of libdb4.0-dev
+      - conflict, replace, and provide libldap2-tls (libldap2)
+      - removed ldap-gateways binary package
+      - drop suggestion to obsolete openldap-guide. Closes: #171894, #146968.
+    - debian/rules:
+      - build with BDB backend
+      - run dh_installdeb
+      - only run dh_makeshlibs for libldap2
+    - debian/slapd.dirs: added to create /var/lib/ldap and /var/spool/slurpd
+    - debian/slapd.postinst:
+      - properly remove temporary files on errors. Closes: #160412.
+      - install init.d link if slapd.conf already exists. Closes: #159542.
+      - run db_stop even if package isn't configured for the first time. This
+        prevents hanging during upgrades.
+    - added debian/slapd.default and use it from debian/slapd.init.
+      Closes: #160964, #176832.
+    - added debian/slapd.README.Debian
+    - added versioned dependency on coreutils to make lintian quiet.
+    - added debian/slapd.postrm
+      - remove slapd.conf when package is purged
+      - remove /var/lib/ldap when slapd/purge_database is true
+      - remove /etc/ldap/schema if empty. Closes: #185173.
+    - debian/templates: added slapd/purge_database template
+    - build/top.mk: link against libcrypt before other SECURITY_LIBS
+    - debian/libldap2.shlibs: tighten dependencies. Closes: #181168.
+
+  * Stephen Frost <sfrost@debian.org>
+    - debian/control: added libltdl2-dev and libslp-dev to the build-depends
+    - Correct typo for back-sql init routine; already in OpenLDAP upstream
+      CVS
+    - Correct free of SASL interact results; already in OpenLDAP upstream CVS
+    - Duplicate the DN from SASL to ensure '\0' termination; already in
+      OpenLDAP upstream CVS
+    - debian/control: added Replaces: slapd (<< 2.1) for ldap-utils due to
+      ldif.5 move.
+    - Add modulepath /usr/lib/ldap to default slapd config
+    - Add moduleload back_bdb to default slapd config
+    - Changed libexecdir to ${prefix}/lib
+    - Add usr/lib/ldap to slapd portion of move_files
+    - Modified backend types to be built as modules for dynamic loading
+    - Fixed pt_BR translation
+
+ -- Roland Bauerschmidt <rb@debian.org>  Sat, 15 Mar 2003 21:35:24 +0100
+
+openldap2 (2.0.27-3) unstable; urgency=high
+
+  * [SECURITY]: Apply the patch used by SuSE in SuSE-SA:2002:047
+    (or rather the parts of it not yet included upstream).
+
+ -- Torsten Landschoff <torsten@debian.org>  Fri, 20 Dec 2002 04:47:15 +0100
+
+openldap2 (2.0.27-2) unstable; urgency=low
+
+  * debian/control: Make libldap2-dev depend on libssl-dev and 
+    libsasl-dev, since those libs are pulled via the libldap.la file
+    (closes: #164791).
+  * debian/control: Add shlibs:Depends to libldap2-tls as well. Most 
+    of those depends are pulled via libldap2 but of course libssl 
+    is not among those. (closes: #169950).
+  * debian/libldap2-tls: Remove old divertions on "configure" and not
+    on "upgrade" - the latter is not really called.
+
+ -- Torsten Landschoff <torsten@debian.org>  Fri, 22 Nov 2002 00:35:29 +0100
+
+openldap2 (2.0.27-1) unstable; urgency=low
+
+  * New upstream release.
+
+ -- Torsten Landschoff <torsten@debian.org>  Wed,  6 Nov 2002 01:12:06 +0100
+
+openldap2 (2.0.23-14) unstable; urgency=low
+
+  * debian/rules: Remove search paths from .la files using some perl 
+    trickery (closes: #110479).
+  * debian/libldap2.README.debian: Document the NSS problem which stops /usr
+    from being unmounted cleanly when using libnss-ldap (for more info
+    see bug#159771).
+  
+  * Started cleaning up the maintainer scripts: 
+    - Remove creation of the /usr/doc symlinks (lintian).
+    - Don't run ldconfig in prerm scripts (lintian).
+
+ -- Torsten Landschoff <torsten@debian.org>  Mon, 30 Sep 2002 12:10:05 +0200
+
+openldap2 (2.0.23-13) unstable; urgency=low
+
+  * As Ashley Clark found out the preinst of libldap-tls fails for a new
+    install. My fault - I did not check that (removing ldap is cumbersome
+    if you are using it... :) and the scripts were only checked without
+    "set -e" in effect. 
+    + debian/libldap2-tls.preinst: Apply Ashley's patch (thanks a lot, 
+      Ashley. closes: #162123).
+    + Coincidently the other installation scripts seem to be okay, the
+      failing command is in the middle of a pipe and therefore ignored.
+
+ -- Torsten Landschoff <torsten@debian.org>  Tue, 24 Sep 2002 12:56:18 +0200
+
+openldap2 (2.0.23-12) unstable; urgency=low
+
+  * Apply the patch from upstream ITS#2012 to support MD5 hashes. Problem
+    is that OpenSSL comes with its own version of the crypt() function
+    which is linked in instead of the system's version from libcrypt. 
+    The patch changes the link order so that slapd takes the system's
+    implementation.
+  * debian/rules: Pass --enable-crypt-first to configure to enable the
+    patch (closes: #160763).
+  * Fix the diversion handling of libldap2-tls:
+    - preinst:  Only install diversions that are not there.
+    - postrm:   Remove this package's diversions.
+    - postinst: Remove obsolete diversions after upgrade.
+    - Removal of diversions is done in reverted order of the installation.
+  
+  * Enable DNSSRV support as requested by Turbo. No Kerberos for now, sorry.
+  * debian/control: Updates Standards-Version to 3.5.7 and fix running
+    of ldconfig in maintainer scripts.
+
+ -- Torsten Landschoff <torsten@debian.org>  Mon, 23 Sep 2002 12:18:40 +0200
+
+openldap2 (2.0.23-11) unstable; urgency=low
+
+  * debian/rules: Build with --with-tls (closes: #80591, #155937).
+  * debian/control: 
+    + Add build dependency on libssl-dev.
+    + Specify Roland Bauerschmidt as co maintainer.
+  * Added the trickery to have libldap2 without TLS and libldap2-tls
+    with the TLS stuff. Otherwise we have to change the base system, 
+    and god knows how long that would take. 
+  
+    Most of the changes done by Roland Bauerschmidt. We now build the 
+    source two times - with and without ssl. We mostly use the ssl enabled
+    stuff with the exception of a libldap2 package which does not have 
+    support for that. If you need TLS support you have to install 
+    libldap2-tls, which diverts the libraries from libldap2 out of the
+    way and replaces them with the TLS enabled version.
+
+ -- Torsten Landschoff <torsten@debian.org>  Thu, 29 Aug 2002 13:35:39 +0200
+
+openldap2 (2.0.23-10) unstable; urgency=low
+
+  * debian/control: Build depend on libdb4.0-dev instead of libdb3-dev.
+    This should fix the index corruption problems (closes: #152959).
+
+ -- Torsten Landschoff <torsten@debian.org>  Sun, 18 Aug 2002 19:47:02 +0200
+
+openldap2 (2.0.23-9) unstable; urgency=low
+
+  * debian/slapd.init: Wait for the daemons to actually terminate for
+    the stop action (which is used for restart) and trap all errors 
+    (closes: #148033).
+  * debian/rules: Build with -D_FILE_OFFSET_BITS=64 to support files
+    bigger than 2GB on all architectures (closes: #155197). As off_t is
+    about never used in the source that should not create any problems.
+  * debian/control: Make libldap2-dev depend on libsasl-dev 
+    (closes: #135223, #96957).
+  * doc/man/man1/ldapmodify.1: Fix typo (closes: #105905).
+  * debian/rules: Create symlinks for some manpages (closes: #99547).
+  * Fix spelling error in description of ldap-gateways (closes: #124859).
+  * debian/copyright: Include the full content of the LICENSE file
+    (closes: #151222).
+
+ -- Torsten Landschoff <torsten@debian.org>  Thu,  8 Aug 2002 15:54:46 +0200
+
+openldap2 (2.0.23-8) unstable; urgency=low
+
+  * New maintainer.
+  * debian/control: Build-Conflict with libbind-dev to use the right
+    resolver library everywhere (closes: #112459). Of course, the 
+    real solution must be to fix the configure script to not detect
+    libbind-dev and use the right resolver all the time. But a work around
+    is better than nothing I would say...
+
+ -- Torsten Landschoff <torsten@debian.org>  Wed,  7 Aug 2002 14:53:39 +0200
+
+openldap2 (2.0.23-7) unstable; urgency=low
+
+  * Add Brazilian translation for debconf templates. Closes: Bug#114021
+  * Fix hostless LDAP URLs, patch from Lamont Jones. Closes: Bug#140387
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Sat,  4 May 2002 20:05:32 +0200
+
+openldap2 (2.0.23-6) unstable; urgency=high
+
+  * Make slapd.config idempotent, so that calling it once (during
+    preconfiguration) and again (during postinst) doesn't break things.
+    Patch from Anthony Towns. Closes: Bug#137552).
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Sun, 14 Apr 2002 19:10:50 +0200
+
+openldap2 (2.0.23-5) unstable; urgency=high
+
+  * Fix slurpd invocation in slapd.init. Closes: Bug#141959
+  * Ask for admin DN when using LDIF initialization as well.
+    Lets hope this finally Closes: Bug#137552
+  * Merge German translation for debconf templates. Closes: Bug#141712
+  * Add Build-Depends on debconf-utils since we use debconf-mergetemplate
+  * Remove bogus error from slapd.init. Closes: Bug#137718
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Tue,  9 Apr 2002 14:49:27 +0200
+
+openldap2 (2.0.23-4) unstable; urgency=high
+
+  * Only show already-configured note on initial installs. Closes: Bug#137100
+  * Supply -t option to slurpd when starting it, not when stopping it.
+    Closes: Bug#136240
+  * Use db_input instead of db_get for notes in the slapd postinst.
+  * Only fetch password from debconf when not using ldif initialization.
+    Closes: Bug#138558,#137552
+  * Check if slapd.conf exists in slapd postinst. Closes: Bug#138136
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Sat,  6 Apr 2002 23:02:42 +0200
+
+openldap2 (2.0.23-3) unstable; urgency=high
+
+  * If can not get a password for the admin entry when installing slapd
+    generate one randomly. Closes: Bug#134774
+  * Bump shlibs dependency to 2.0.23
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Thu, 21 Feb 2002 23:23:57 +0100
+
+openldap2 (2.0.23-2) unstable; urgency=high
+
+  * Create /var/spool/slurpd and tell slurpd to use that as temporary
+    directory. Closes: Bug#134564
+  * Improve debconf prompts a bit. Closes: Bug#134945
+  * Properly set default value for domain
+  * Clear crypted password from debconf after creating the LDAP directory
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Sun, 17 Feb 2002 16:07:18 +0100
+
+openldap2 (2.0.23-1) unstable; urgency=high
+
+  * Upstream updated config.{guess,sub} so we are back to zero patches
+    again.
+  * Apply fix from Klaus Duscher for the missing password problem: the
+    config script did not check if it was run twice without slapd.conf
+    being generated in between and would abort with a missing password
+    error. Closes: Bug#132566
+  * Change slapd priority for boot sequence to start earlier and stop
+    later so people can use LDAP for NSS purposes. Closes: Bug#130277
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Sun, 17 Feb 2002 16:07:18 +0100
+
+openldap2 (2.0.22-2) unstable; urgency=low
+
+  * Update config.{guess,sub} again. Closes: Bug#131469
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Thu,  7 Feb 2002 22:33:01 +0100
+
+openldap2 (2.0.22-1) unstable; urgency=low
+
+  * New upstream version
+  * Build properly as non-native package
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Wed,  6 Feb 2002 00:17:20 +0100
+
+openldap2 (2.0.21-3) unstable; urgency=high
+
+  * Add logic to config and postinst to configure replication as well
+  * Don't fail in slapd postinst if we can't stop slapd. Closes: Bug#131617
+  * Change localstatedir to /var/lib
+  * Remove /var/lib/ldap when purging slapd
+  * Don't remove user-supplied ldif file after creating the directory
+  * Set default replogfile
+  * Fix typo in severity for no_password note
+  * Encrypt admin password and remove it from the debconf database
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Thu, 31 Jan 2002 17:03:36 +0100
+
+openldap2 (2.0.21-2) unstable; urgency=medium
+
+  * Update config.{guess,sub} and forwarded upstream (ITS#1567).
+    Closes: Bug#131469
+  * Remove -x from slapd postinst. Closes: Bug#131502
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Wed, 30 Jan 2002 10:53:45 +0100
+
+openldap2 (2.0.21-1) unstable; urgency=high
+
+  * New upstream version,
+  * Update copyright
+  * Update config.guess and config.sub
+  * Redone packaging, no more dbs or debhelper
+  * Drop all patches, they are either unnecessary or alternatives have
+    been made upstream
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Tue, 29 Jan 2002 17:04:10 +0100
+
+openldap2 (2.0.14-1) unstable; urgency=high
+
+  * New upstream version, which includes a billion second bug.
+    Closes: Bug#111833
+  * Drop 005_libldbm_dbopen, upgrading the database in place no longer works
+    with the new db-env code.
+  * Redo 008_porting_maxpathlen
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Sat, 15 Sep 2001 13:39:46 +0200
+
+openldap2 (2.0.11-2) unstable; urgency=low
+
+  * Test if /etc/init.d/slapd is executable when purging slapd.
+    Closes: Bug#100938
+  * Update 008_porting_maxpathlen. Closes: Bug#100584
+  * Don't use four11 as referral example anymore. Closes: Bug#99998
+  * Fix synopsis of slapindex manpage. Added to 002_man_fixes.
+    Closes: Bug#98805
+  * Removed stray backup file from 002_man_fixes
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Tue, 19 Jun 2001 01:01:17 +0200
+
+openldap2 (2.0.11-1) unstable; urgency=low
+
+  * New upstream version
+  * Add autoconf to Build-Depends. Closes: Bug#99440
+  * Fix new db upgrade patch. Closes: Bug#98853
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Sun,  3 Jun 2001 00:25:47 +0200
+
+openldap2 (2.0.10-2) unstable; urgency=low
+
+  * Tighten shlibs dependency to >= 2.0.1-1. Closes: Bug#98683
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Fri, 25 May 2001 16:32:35 +0200
+
+openldap2 (2.0.10-1) unstable; urgency=low
+
+  * New upstream version
+  * New maintainer
+  * Remove useless LINE_WIDTH bit from patch 000_clients
+  * Patch 004_ssl_fix has been merged upstream, removed
+  * Redo 005_db3_upgrade 
+  * Rediff all other patches
+
+ -- Wichert Akkerman <wakkerma@debian.org>  Thu, 24 May 2001 14:56:02 +0200
+
+openldap2 (2.0.7-6) unstable; urgency=low
+
+  * Make sure autoconf is run if configure.in is changed (for Hurd patch),
+    closes: #96145
+  * Fix slapd.postinst in the case of using an ldif file, closes: #95600
+  * Use a var for slapd.conf in slapd init script. Partially fixes bug
+    91318.
+  * Fixed hurd patch for strrchr in replog.c, closes: #93605
+
+ -- Ben Collins <bcollins@debian.org>  Mon,  7 May 2001 23:00:27 -0400
+
+openldap2 (2.0.7-5) unstable; urgency=low
+
+  * Fixed db3 upgrade code, closes: #92331, #92916
+  * m68k should compile fine with db3 now, closes: #90165
+  * Included provided patch for Hurd compilation, closes: #88079
+
+ -- Ben Collins <bcollins@debian.org>  Wed,  4 Apr 2001 17:46:47 -0400
+
+openldap2 (2.0.7-4) unstable; urgency=low
+
+  * slapd.conf is no longer a conffile, and not provided by the package.
+    Instead, it is only generated. closes: #81359
+  * Fixed by previous upload, closes: #71852, #78950, #82491
+  * Actually install the netscape schema, closes: #90323
+  * Add comment to README.Debian about being compiled with libwrap,
+    closes: #84954
+  * Provide example sasl config file, closes: #90855
+  * Conflict replace openldap-utils (ldap-utils), and libopenldap-dev
+    (libldap2-dev), closes: #71471
+  * Revert to using some code to upgrade previous db's. Remove slapd's dep
+    on db3-util, and remove postinst code that upgrades the db's.
+
+ -- Ben Collins <bcollins@debian.org>  Sat, 24 Mar 2001 21:59:20 -0500
+
+openldap2 (2.0.7-3) unstable; urgency=low
+
+  * netscape-profile.schema: new schema for old roaming support
+  * 004_ssl_fix.diff: Fix for SSL support (not compiled in, but some
+    people use it).
+  * slapd.config: FINALLY fix the "dc=" base bug.
+  * Build-Depend on libdb3-dev now that it is available.
+  * Now that we use db3, make sure we upgrade existing databases to the
+    db3 format with db3_upgrade.
+
+ -- Ben Collins <bcollins@debian.org>  Sun, 11 Mar 2001 23:36:34 -0500
+
+openldap2 (2.0.7-2) unstable; urgency=low
+
+  * slapd.postinst: fix debhelper wraper so it gets the right @argv,
+    closes: #71854
+  * sendmail appears to be compiled against glibc2.2/libdb2 now,
+    closes: #71602
+  * %strace ldapsearch cn=admin | & grep /etc | grep ldap
+    open("/etc/ldap/ldap.conf", O_RDONLY)   = 3
+    closes: #71716
+  * ldap_first_attribute.3: s/ber_free(3)/ber_free/. closes: #76719
+  * init.d/slapd: fix reference to pidfile, and also remove the pidfile
+    after killing the daemon, closes: #77633, #77635
+  * Fix fgets buffer size thinko in slurpd. closes: #78003
+  * slapd.8: s/ldap.h/slapd.conf(5)/. closes: #80457
+
+ -- Ben Collins <bcollins@debian.org>  Sun, 31 Dec 2000 00:02:46 -0500
+
+openldap2 (2.0.7-1) unstable; urgency=low
+
+  * New upstream
+  * Removed hack for shlibs now that dpkg 1.7 is available, added dpkg-dev
+    1.7.1 to build-depends.
+  * start using DH_COMPAT=2
+
+ -- Ben Collins <bcollins@debian.org>  Fri, 10 Nov 2000 18:53:25 -0500
+
+openldap2 (2.0.2-2) unstable; urgency=low
+
+  * Recompile against libdb2/glibc 2.1.94/sasl
+
+ -- Ben Collins <bcollins@debian.org>  Wed, 27 Sep 2000 11:31:59 -0400
+
+openldap2 (2.0.2-1) unstable; urgency=low
+
+  * New upstream version, includes some patches from me that fix some
+    stability issues
+  * debian/control:Build-Depends: change libwrap-dev to libwrap0-dev for
+    clarity, closes: #71366
+  * debian/rules: make sure mail500 docs do not get installed under bogus
+    subdirs, closes: #71473
+  * debian/README.build,debian/scripts/dbs-build.mk: Fix and document
+    build system better, closes: #71584
+  * debian/local/slapd.conf: Setup default ACL's to work with openldap2
+    correctly, closes: #71127, #71131
+  * debian/README: document how to access OpenLDAP 1 servers via
+    ldap-utils, closes: #71469
+  * debian/rules:CFLAGS: add -I/usr/include/db2 to make sure we get the
+    right <db.h> header, closes: #71470
+  * I cannot reproduce this. In debian/rules I have done exactly what is
+    needed to keep it from happening, and sparc, i386 and powerpc builds
+    do not show it, closes: #71472
+
+ -- Ben Collins <bcollins@debian.org>  Wed, 13 Sep 2000 22:32:35 -0400
+
+openldap2 (2.0.1-2) unstable; urgency=low
+
+  * Fixed up depend for libldap2 on itself
+
+ -- Ben Collins <bcollins@debian.org>  Wed,  6 Sep 2000 13:24:06 -0400
+
+openldap2 (2.0.1-1) unstable; urgency=low
+
+  * New upstream version
+  * Added libsasl-dev to build-deps, closes: #70923
+
+ -- Ben Collins <bcollins@debian.org>  Tue,  5 Sep 2000 06:49:05 -0400
+
+openldap2 (2.0-1) unstable; urgency=low
+
+  * Initial release of OpenLDAP 2 test code
+
+ -- Ben Collins <bcollins@debian.org>  Tue, 29 Aug 2000 14:28:39 -0400
diff -urN openldap-2.3.35/debian/check_config openldap-2.3.35_new/debian/check_config
--- openldap-2.3.35/debian/check_config	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/check_config	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,17 @@
+#! /usr/bin/perl -w
+
+$| = 1;
+
+print "Reading configuration... ";
+open CONF, "<debian/build/config.status" or 
+	die "Can't open debian/build/config.status: $!";
+@CONF = <CONF>;
+close CONF;
+print "done\n";
+
+print "Checking if sasl2 was found... ";
+if (not grep /SASL_LIBS.*-lsasl2/, @CONF) {
+	print "no\n";
+	die "SASL2 support not enabled";
+}
+print "okay\n";
diff -urN openldap-2.3.35/debian/check_upgradepath openldap-2.3.35_new/debian/check_upgradepath
--- openldap-2.3.35/debian/check_upgradepath	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/check_upgradepath	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,171 @@
+#! /bin/sh
+
+set -e
+
+# WARNING: This script is in sometimes-works-for-me state. Only use if 
+# you understand what's going on. 
+
+# Setup
+: ${chroot_dir:=../chroot}
+: ${debmirror:=http://ftp.de.debian.org/debian}
+: ${proxy:=http://proxy.galaxy:3128/}
+unset LC_ALL
+unset LC_CTYPE
+unset LC_MESSAGES
+# XXX: comment out when testing new versions. Needed so libc6 does not
+# ask for restarting services.
+export DEBIAN_FRONTEND=noninteractive
+
+woodytar=$chroot_dir/woody_base.tar.gz
+
+# List our packages
+list_packages() {
+	local p ver
+	ver=`dpkg-parsechangelog|sed -ne 's/^Version: //p'`
+	for p in `dh_listpackages`; do
+		(cd .. && echo ${p}_$ver*deb)
+	done
+}
+
+# Run a command inside the chroot
+
+in_target() {
+	chroot $chroot_dir/woody "$@"
+}
+
+# Set a debconf variable inside the chroot
+
+debconf_set() {
+	local name=$1
+	shift
+	cat >>$chroot_dir/woody/var/cache/debconf/config.dat <<EOF
+Name: $name
+Template: $name
+Flags: seen
+Value: $@
+
+EOF
+}
+
+# Setup a woody chroot
+
+setup_chroot() {
+	# Kill an existing chroot
+	rm -Rf $chroot_dir/woody
+
+	# If there is a tar archive with a base system we use it
+	if [ -e $woodytar ]; then
+		mkdir $chroot_dir/woody
+		echo -n "Unpacking system from $woodytar"
+		tar -C $chroot_dir/woody -xzf $woodytar
+		echo "done."
+	# Otherwise we need to create a new base system and save it
+	# to a tar for the next time
+	else
+		debootstrap woody $chroot_dir/woody $debmirror | \
+		  shtool prop -p "Creating base system from $debmirror"
+		tar -C $chroot_dir/woody -czvf $woodytar . | \
+			shtool prop -p "Saving system to $woodytar"
+	fi
+
+	# Install a suitable apt configuration
+	echo "deb $debmirror woody main" \
+		> $chroot_dir/woody/etc/apt/sources.list
+	echo "Acquire::HTTP::Proxy \"$proxy\";" \
+		> $chroot_dir/woody/etc/apt/apt.conf
+	in_target apt-get update
+	in_target mount -t proc none /proc
+
+	# We don't want any debconf interaction
+	#debconf_set debconf/frontend Noninteractive
+}
+
+# These are our example configurations for testing the upgrade
+
+conf_domain_or_host() {
+	debconf_set slapd/fill_method auto
+	debconf_set slapd/suffix_type "domain or host"
+	debconf_set slapd/domain "some.example.net"
+	debconf_set slapd/replicate false
+	debconf_set shared/organization Some Organization
+}
+
+
+check_domain_or_host() {
+	sleep 2  # wait for slapd to startup
+	in_target ldapsearch -h localhost -b dc=some,dc=example,dc=net -x \
+		objectclass=\*
+}
+
+conf_location() {
+	debconf_set slapd/fill_method auto
+	debconf_set slapd/suffix_type "location"
+	debconf_set shared/locale/countrycode de
+	debconf_set shared/organization "Sample Organization"
+	debconf_set slapd/replicate false
+	debconf_set shared/organization Some Organization
+}
+
+check_location() {
+	sleep 2  # wait for slapd to startup
+	in_target ldapsearch -h localhost -b "o=Some Organization, c=de" \
+		-x objectclass=\*
+}
+# Install slapd inside the chroot
+
+install_slapd() {
+	in_target apt-get -y install slapd ldap-utils
+}
+
+# Do an upgrade of our packages inside the chroot
+
+upgrade() {
+	# Link our packages into the chroot
+	for p in `list_packages`; do 
+		ln ../$p $chroot_dir/woody/root/
+	done
+
+	# Create a packages file
+	(cd $chroot_dir/woody/root && dpkg-scanpackages . /dev/null >Packages)
+
+	# Switch to unstable
+	echo "deb $debmirror unstable main" \
+		> $chroot_dir/woody/etc/apt/sources.list
+	echo "deb file:/root ./" >> $chroot_dir/woody/etc/apt/sources.list
+
+	# Update package lists
+	in_target apt-get update
+
+	# Tell our scripts to fix the config
+	debconf_set slapd/fix_directory true
+	debconf_set slapd/password1 foobar
+	debconf_set slapd/autoconf_modules true
+	debconf_set slapd/allow_ldap_v2
+
+	# Do an upgrade of our packages
+	in_target apt-get install -y `dh_listpackages`
+}
+
+# Checks if upgrading a woody system with slapd configured with the
+# command given works.
+
+check_upgrade() {
+	setup_chroot
+	conf_$1
+	debconf_set slapd/password1 foobar
+	debconf_set slapd/password2 foobar
+	install_slapd
+	check_$1
+	upgrade
+	check_$1
+	in_target /etc/init.d/slapd stop
+	in_target umount /proc
+}
+
+# Try upgrading our example setups
+
+for i in location domain_or_host; do
+	check_upgrade $i
+done
+
+echo "SUCCESS testing upgrading from woody"
diff -urN openldap-2.3.35/debian/configure.options openldap-2.3.35_new/debian/configure.options
--- openldap-2.3.35/debian/configure.options	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/configure.options	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,152 @@
+#Copyright 1998-2004 The OpenLDAP Foundation. All rights reserved.
+#	Restrictions apply, see COPYRIGHT and LICENSE files.
+#Usage: configure [options] [host]
+#Options: [defaults in brackets after descriptions]
+#Configuration:
+#  --cache-file=FILE       cache test results in FILE
+#  --help                  print this message
+#  --no-create             do not create output files
+#  --quiet, --silent       do not print `checking...' messages
+#  --version               print the version of autoconf that created configure
+#Directory and file names:
+#  --prefix=PREFIX         install architecture-independent files in PREFIX
+#                          [/usr/local]
+--prefix=/usr
+#  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
+#                          [same as prefix]
+#  --bindir=DIR            user executables in DIR [EPREFIX/bin]
+#  --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]
+#  --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]
+--libexecdir='${prefix}/lib'
+#  --datadir=DIR           read-only architecture-independent data in DIR
+#                          [PREFIX/share]
+#  --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]
+--sysconfdir=/etc
+#  --sharedstatedir=DIR    modifiable architecture-independent data in DIR
+#                          [PREFIX/com]
+#  --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]
+--localstatedir=/var
+#  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
+#  --includedir=DIR        C header files in DIR [PREFIX/include]
+#  --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]
+#  --infodir=DIR           info documentation in DIR [PREFIX/info]
+#  --mandir=DIR            man documentation in DIR [PREFIX/man]
+--mandir='${prefix}/share/man'
+#  --srcdir=DIR            find the sources in DIR [configure dir or ..]
+#  --program-prefix=PREFIX prepend PREFIX to installed program names
+#  --program-suffix=SUFFIX append SUFFIX to installed program names
+#  --program-transform-name=PROGRAM
+#                          run sed PROGRAM on installed program names
+#Host type:
+#  --build=BUILD           configure for building on BUILD [BUILD=HOST]
+#  --host=HOST             configure for HOST [guessed]
+#  --target=TARGET         configure for TARGET [TARGET=HOST]
+#Features and packages:
+#  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
+#  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
+#  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
+#  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
+#  --x-includes=DIR        X include files are in DIR
+#  --x-libraries=DIR       X library files are in DIR
+#--enable and --with options recognized:
+#  --with-subdir=DIR       change default subdirectory used for installs
+--with-subdir=ldap
+#  --enable-debug 	  enable debugging [yes]
+## Our users might want to use the -d option
+--enable-debug
+#  --enable-dynamic	  enable linking built binaries with dynamic libs [no]
+--enable-dynamic
+#  --enable-syslog	  enable syslog support [auto]
+--enable-syslog
+#  --enable-proctitle	  enable proctitle support [yes]
+--enable-proctitle
+#  --enable-ipv6 	  enable IPv6 support [auto]
+## Debian tries to fully support IPv6 so we need this
+--enable-ipv6
+#  --enable-local	  enable AF_LOCAL (AF_UNIX) socket support [auto]
+--enable-local
+#  --with-cyrus-sasl	  with Cyrus SASL support [auto]
+--with-cyrus-sasl
+#  --with-fetch		  with fetch(3) URL support [auto]
+#  --with-threads	  with threads [auto]
+--with-threads
+#  --with-tls		  with TLS/SSL support [auto]
+## XXX: Use OpenSSL for now - need a new GNUTLS patch
+--with-tls
+#  --with-yielding-select  with implicitly yielding select [auto]
+#
+#SLAPD (Standalone LDAP Daemon) Options:
+#  --enable-slapd	  enable building slapd [yes]
+--enable-slapd
+#    --enable-aci	  enable per-object ACIs (experimental) [no]
+--enable-aci
+#    --enable-cleartext	  enable cleartext passwords [yes]
+--enable-cleartext
+#    --enable-crypt	  enable crypt(3) passwords [no]
+--enable-crypt
+#    --enable-lmpasswd	  enable LAN Manager passwords [no]
+## XXX: disabled, needs OpenSSL
+#    --enable-spasswd	  enable (Cyrus) SASL password verification [no]
+--enable-spasswd
+#    --enable-modules	  enable dynamic module support [no]
+--enable-modules
+#    --enable-rewrite	  enable DN rewriting in back-ldap and the rwm overlay [auto]
+--enable-rewrite
+#    --enable-rlookups	  enable reverse lookups of client hostnames [no]
+--enable-rlookups
+#    --enable-slapi        enable SLAPI support (experimental) [no]
+#    --enable-slp          enable SLPv2 support [no]
+--enable-slp
+#    --enable-wrappers	  enable tcp wrapper support [no]
+--enable-wrappers
+#
+#SLAPD Backend Options:
+#    --enable-bdb	  enable Berkeley DB backend no|yes|mod [yes]
+--enable-bdb=mod
+#    --enable-dnssrv	  enable dnssrv backend no|yes|mod [no]
+--enable-dnssrv=mod
+#    --enable-hdb	  enable Hierarchical DB backend no|yes|mod [no]
+# XXX: new, let's see if it builds  -- Torsten
+--enable-hdb=mod
+#    --enable-ldap	  enable ldap backend no|yes|mod [no]
+# XXX: build statically because meta and ldap depend on each other
+--enable-ldap=yes
+#    --enable-ldbm	  enable ldbm backend no|yes|mod [no]
+--enable-ldbm=mod
+#      --with-ldbm-api     with LDBM API auto|berkeley|bcompat|mdbm|gdbm [auto]
+--with-ldbm-api=berkeley
+#      --with-ldbm-type	  use LDBM type auto|btree|hash [auto]
+#    --enable-meta	  enable metadirectory backend no|yes|mod [no]
+--enable-meta=mod
+#    --enable-monitor	  enable monitor backend no|yes|mod [yes]
+--enable-monitor=mod
+#    --enable-null	  enable null backend no|yes|mod [no]
+--enable-null=mod
+#    --enable-passwd	  enable passwd backend no|yes|mod [no]
+--enable-passwd=mod
+#    --enable-perl	  enable perl backend no|yes|mod [no]
+--enable-perl=mod
+#    --enable-shell	  enable shell backend no|yes|mod [no]
+--enable-shell=mod
+#    --enable-sql	  enable sql backend no|yes|mod [no]
+--enable-sql=mod
+#
+#SLAPD Overlay Options:
+#    --enable-dyngroup	  Dynamic Group overlay no|yes|mod [no]
+--enable-dyngroup=mod
+#    --enable-proxycache	  Proxy Cache overlay no|yes|mod [no]
+--enable-proxycache=mod
+#
+#SLURPD (Replication Daemon) Options:
+#  --enable-slurpd	  enable building slurpd [auto]
+--enable-slurpd
+#
+#Library Generation & Linking Options
+#  --enable-static[=PKGS]  build static libraries [default=yes]
+#  --enable-shared[=PKGS]  build shared libraries [default=yes]
+#  --enable-fast-install[=PKGS]  optimize for fast installation [default=yes]
+#  --with-gnu-ld           assume the C compiler uses GNU ld [default=no]
+#  --disable-libtool-lock  avoid locking (might break parallel builds)
+#  --with-pic              try to use only PIC/non-PIC objects [default=use both]
+#
+#See INSTALL file for further details.
diff -urN openldap-2.3.35/debian/control openldap-2.3.35_new/debian/control
--- openldap-2.3.35/debian/control	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/control	2007-04-12 17:25:53.000000000 -0300
@@ -0,0 +1,71 @@
+Source: openldap2.3
+Section: net
+Priority: optional
+Maintainer: Torsten Landschoff <torsten@debian.org>
+Uploaders: Roland Bauerschmidt <rb@debian.org>, Stephen Frost <sfrost@debian.org>, Steve Langasek <vorlon@debian.org>
+Build-Depends: libdb4.2-dev, libwrap0-dev, libiodbc2-dev, libsasl2-dev (>= 2.1.18-1), dpkg-dev (>= 1.7.1), libncurses5-dev, autoconf2.13, debconf-utils, debhelper (>= 4.1.16), libltdl3-dev (>= 1.4.3), libslp-dev, po-debconf, libssl-dev (>= 0.9.7), libperl-dev (>= 5.8.0)
+Standards-Version: 3.6.1
+
+Package: slapd
+Section: net
+Priority: optional
+Architecture: any
+Pre-Depends: debconf (>= 0.5)
+Depends: ${shlibs:Depends}, coreutils (>= 4.5.1-1) | fileutils (>= 4.0i-1), psmisc, libldap2.3 (= ${Source-Version}), perl (>> 5.8.0) | libmime-base64-perl, ssl-cert (>= 1.0-11ubuntu1)
+Recommends: db4.2-util, libsasl2-modules
+Suggests: ldap-utils
+Conflicts: umich-ldapd
+Provides: ldap-server
+Description: OpenLDAP server (slapd)
+ This is the OpenLDAP (Lightweight Directory Access Protocol) standalone
+ server (slapd). The server can be used to provide a standalone directory
+ service and also includes the slurpd replication server.
+
+Package: ldap-utils
+Section: net
+Priority: optional
+Architecture: any
+Depends: ${shlibs:Depends}, libldap2.3 (= ${Source-Version})
+Recommends: libsasl2-modules
+Conflicts: umich-ldap-utils
+Provides: ldap-client, openldap-utils
+Description: OpenLDAP utilities
+ Utilities from the OpenLDAP (Lightweight Directory Access Protocol)
+ package. These utilities can access a local or remote LDAP server
+ and contain all the client programs required to access LDAP servers.
+
+Package: libldap2.3
+Section: libs
+Priority: important
+Architecture: any
+Depends: ${shlibs:Depends}
+Replaces: libldap2
+Description: OpenLDAP libraries 
+ These are the run-time libraries for the OpenLDAP (Lightweight Directory
+ Access Protocol) servers and clients.
+
+Package: libldap2.3-dev
+Section: libdevel
+Priority: extra
+Architecture: any
+Conflicts: libldap-dev, libopenldap-dev
+Replaces: libopenldap-dev
+Provides: libldap-dev
+Depends: libldap2.3 (= ${Source-Version})
+Description: OpenLDAP development libraries
+ This package allows development of LDAP applications using the OpenLDAP
+ libraries. It includes headers, libraries and links to allow static and
+ dynamic linking.
+
+Package: libslapd2.3-dev
+Section: libdevel
+Priority: extra
+Architecture: all
+Depends: libldap2.3 (= ${Source-Version})
+Description: OpenLDAP slapd back-end development headers
+ This package allows development of back-ends for the OpenLDAP slapd.
+ It includes headers used when developing a back-end for slapd.
+ These headers are, per upstream, *not* intended to be used outside of
+ their build system so you are on your own with them.  Things can and
+ probably will break, feel free to file bugs about them but don't expect
+ them to be fixed.
diff -urN openldap-2.3.35/debian/copyright openldap-2.3.35_new/debian/copyright
--- openldap-2.3.35/debian/copyright	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/copyright	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,467 @@
+Copyright 1998-2001 The OpenLDAP Foundation
+All rights reserved.
+
+Redistribution and use in source and binary forms, with or without
+modification, are permitted only as authorized by the OpenLDAP
+Public License.  A copy of this license is available at
+http://www.OpenLDAP.org/license.html or in file LICENSE in the
+top-level directory of the distribution (included at the end of
+this file).
+
+OpenLDAP is a registered trademark of the OpenLDAP Foundation.
+
+Individual files and/or contributed packages may be copyright by
+other parties and subject to additional restrictions.
+
+This work is derived from the University of Michigan LDAP v3.3
+distribution.  Information concerning this software is available
+at: http://www.umich.edu/~dirsvcs/ldap/
+
+This work also contains materials derived from public sources.
+
+The fix_ldif script is Copyright (c) Dave Horsfall and is available
+under the terms of the BSD license.  On Debian GNU/Linux systems, the
+complete text of the BSD license can be found in
+/usr/share/common-licenses/BSD.
+
+Additional Information about OpenLDAP can be obtained at:
+    http://www.openldap.org/
+
+or by sending e-mail to:
+    info@OpenLDAP.org
+
+---
+
+The OpenLDAP Public License
+  Version 2.7, 7 September 2001
+
+Redistribution and use of this software and associated documentation
+("Software"), with or without modification, are permitted provided
+that the following conditions are met:
+
+1. Redistributions of source code must retain copyright statements
+   and notices,
+
+2. Redistributions in binary form must reproduce applicable copyright
+   statements and notices, this list of conditions, and the following
+   disclaimer in the documentation and/or other materials provided
+   with the distribution, and
+
+3. Redistributions must contain a verbatim copy of this document.
+
+The OpenLDAP Foundation may revise this license from time to time.
+Each revision is distinguished by a version number.  You may use
+this Software under terms of this license revision or under the
+terms of any subsequent revision of the license.
+
+THIS SOFTWARE IS PROVIDED BY THE OPENLDAP FOUNDATION AND ITS
+CONTRIBUTORS ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
+INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
+AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT
+SHALL THE OPENLDAP FOUNDATION, ITS CONTRIBUTORS, OR THE AUTHOR(S)
+OR OWNER(S) OF THE SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
+INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
+BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
+ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGE.
+
+The names of the authors and copyright holders must not be used in
+advertising or otherwise to promote the sale, use or other dealing
+in this Software without specific, written prior permission.  Title
+to copyright in this Software shall at all times remain with
+copyright holders.
+
+---
+Noted above is that various files can be copyrighted individually.
+The licenses found in the OpenLDAP tree are as follows:
+
+SL
+-----------------------------------
+ * Copyright 2003 Steve Langasek
+ *
+ * This library is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2.1 of the License, or (at your option) any later version.
+ *
+ * This library is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this library; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307  USA
+-----------------------------------
+
+CRL
+-----------------------------------
+# Copyright 1999 Computing Research Labs, New Mexico State University
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included in
+# all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE COMPUTING RESEARCH LAB OR NEW MEXICO STATE UNIVERSITY BE LIABLE FOR ANY
+# CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT
+# OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR
+# THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+-----------------------------------
+
+
+FSF
+-----------------------------------
+# Copyright (C) 1994, 1995-8, 1999, 2001 Free Software Foundation, Inc.
+# This Makefile.in is free software; the Free Software Foundation
+# gives unlimited permission to copy and/or distribute it,
+# with or without modifications, as long as this notice is preserved.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
+# PARTICULAR PURPOSE.
+
+-----------------------------------
+
+
+HC
+-----------------------------------
+ * Permission is granted to anyone to use this software for any purpose
+ * on any computer system, and to alter it and redistribute it, subject
+ * to the following restrictions:
+ *
+ * 1. The author is not responsible for the consequences of use of this
+ *    software, no matter how awful, even if they arise from flaws in it.
+ *
+ * 2. The origin of this software must not be misrepresented, either by
+ *    explicit claim or by omission.  Since few users ever read sources,
+ *    credits should appear in the documentation.
+ *
+ * 3. Altered versions must be plainly marked as such, and must not be
+ *    misrepresented as being the original software.  Since few users
+ *    ever read sources, credits should appear in the
+ *    documentation.
+ *
+ * 4. This notice may not be removed or altered.
+
+-----------------------------------
+
+
+IBM
+-----------------------------------
+ * Portions Copyright (c) 1995 by International Business Machines, Inc.
+ *
+ * International Business Machines, Inc. (hereinafter called IBM) grants
+ * permission under its copyrights to use, copy, modify, and distribute this
+ * Software with or without fee, provided that the above copyright notice and
+ * all paragraphs of this notice appear in all copies, and that the name of IBM
+ * not be used in connection with the marketing of any product incorporating
+ * the Software or modifications thereof, without specific, written prior
+ * permission.
+ *
+ * To the extent it has a right to do so, IBM grants an immunity from suit
+ * under its patents, if any, for the use, sale or manufacture of products to
+ * the extent that such products are used for performing Domain Name System
+ * dynamic updates in TCP/IP networks by means of the Software.  No immunity is
+ * granted for any product per se or for any other function of any product.
+ *
+ * THE SOFTWARE IS PROVIDED "AS IS", AND IBM DISCLAIMS ALL WARRANTIES,
+ * INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
+ * PARTICULAR PURPOSE.  IN NO EVENT SHALL IBM BE LIABLE FOR ANY SPECIAL,
+ * DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER ARISING
+ * OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE, EVEN
+ * IF IBM IS APPRISED OF THE POSSIBILITY OF SUCH DAMAGES.
+
+-----------------------------------
+
+
+IS
+-----------------------------------
+# Full Copyright Statement
+# 
+#    Copyright (C) The Internet Society (1999).  All Rights Reserved.
+# 
+#    This document and translations of it may be copied and furnished to
+#    others, and derivative works that comment on or otherwise explain it
+#    or assist in its implementation may be prepared, copied, published
+#    and distributed, in whole or in part, without restriction of any
+#    kind, provided that the above copyright notice and this paragraph are
+#    included on all such copies and derivative works.  However, this
+#    document itself may not be modified in any way, such as by removing
+#    the copyright notice or references to the Internet Society or other
+#    Internet organizations, except as needed for the purpose of
+#    developing Internet standards in which case the procedures for
+#    copyrights defined in the Internet Standards process must be
+#    followed, or as required to translate it into languages other than
+#    English.
+# 
+#    The limited permissions granted above are perpetual and will not be
+#    revoked by the Internet Society or its successors or assigns.
+# 
+#    This document and the information contained herein is provided on an
+#    "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
+#    TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
+#    BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
+#    HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
+#    MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
+
+-----------------------------------
+
+
+ISC
+-----------------------------------
+ * Copyright (c) 1996, 1998 by Internet Software Consortium.
+ *
+ * Permission to use, copy, modify, and distribute this software for any
+ * purpose with or without fee is hereby granted, provided that the above
+ * copyright notice and this permission notice appear in all copies.
+ *
+ * THE SOFTWARE IS PROVIDED "AS IS" AND INTERNET SOFTWARE CONSORTIUM DISCLAIMS
+ * ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL INTERNET SOFTWARE
+ * CONSORTIUM BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
+ * DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
+ * PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS
+ * ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS
+ * SOFTWARE.
+
+-----------------------------------
+
+
+JC
+-----------------------------------
+ * This software is not subject to any license of Silicon Graphics 
+ * Inc. or Purdue University.
+ *
+ * Redistribution and use in source and binary forms are permitted
+ * without restriction or fee of any kind as long as this notice
+ * is preserved.
+
+The following is additional information from Juan C. Gomez on how 
+this license is to be interpreted:
+-----
+Local-Date: Fri, 06 Jun 2003 13:18:52 -0400
+Date: Fri, 6 Jun 2003 10:18:52 -0700
+From: Juan Gomez <juang@us.ibm.com>
+To: Stephen Frost <sfrost@debian.org>
+X-Mailer: Lotus Notes Release 5.0.2a (Intl) 23 November 1999
+Subject: Re: Juan C. Gomez license in OpenLDAP Source
+
+Stephen,
+
+"There is no restriction on modifications and derived works" on the work I
+did for the openldap server as long as this is consistent with the openldap
+license. Please forward this email to Kurt so he does the appropriate
+changes to the files to reflect this.
+
+
+Regards, Juan                                                                                       
+-----------------------------------
+
+
+MA
+-----------------------------------
+ * Copyright (c) 2000, Mark Adamson, Carnegie Mellon.  All rights reserved.
+ * This software is not subject to any license of Carnegie Mellon University.
+ *
+ * Redistribution and use in source and binary forms are permitted without 
+ * restriction or fee of any kind as long as this notice is preserved.
+ *
+ * The name "Carnegie Mellon" must not be used to endorse or promote
+ * products derived from this software without prior written permission.
+
+The following is additional information from Mark Adamson on how this license
+is to be interpreted:
+------
+Local-Date: Thu, 05 Jun 2003 16:53:32 -0400
+Date: Thu, 5 Jun 2003 16:53:32 -0400 (EDT)
+From: Mark Adamson <adamson@andrew.cmu.edu>
+To: Stephen Frost <sfrost@debian.org>
+Subject: Re: Mark Adamson license in OpenLDAP source
+
+Hi Stephen,
+
+  I don't see how this conflicts with the Debian FSG. The first statement
+in the copyright pertaining to CMU say only that we don't license out the
+software.  The second mention denies the right to say things like,
+"Now! Powered by software from Carnegie Mellon!"   There is no restriction
+on modifications and derived works.
+
+-Mark
+------
+-----------------------------------
+
+
+MIT
+-----------------------------------
+# Copyright 1991 by the Massachusetts Institute of Technology
+#
+# Permission to use, copy, modify, distribute, and sell this software and its
+# documentation for any purpose is hereby granted without fee, provided that
+# the above copyright notice appear in all copies and that both that
+# copyright notice and this permission notice appear in supporting
+# documentation, and that the name of M.I.T. not be used in advertising or
+# publicity pertaining to distribution of the software without specific,
+# written prior permission.  M.I.T. makes no representations about the
+# suitability of this software for any purpose.  It is provided "as is"
+# without express or implied warranty.
+
+-----------------------------------
+
+
+OL2
+-----------------------------------
+Copyright 1999-2001 The OpenLDAP Foundation, Redwood City,
+California, USA.  All Rights Reserved.  Permission to copy and
+distribute verbatim copies of this document is granted.
+-----------------------------------
+
+
+PM
+-----------------------------------
+ * Copyright (C) 2000 Pierangelo Masarati, <ando@sys-net.it>
+ * All rights reserved.
+ *
+ * Permission is granted to anyone to use this software for any purpose
+ * on any computer system, and to alter it and redistribute it, subject
+ * to the following restrictions:
+ *
+ * 1. The author is not responsible for the consequences of use of this
+ * software, no matter how awful, even if they arise from flaws in it.
+ *
+ * 2. The origin of this software must not be misrepresented, either by
+ * explicit claim or by omission.  Since few users ever read sources,
+ * credits should appear in the documentation.
+ *
+ * 3. Altered versions must be plainly marked as such, and must not be
+ * misrepresented as being the original software.  Since few users
+ * ever read sources, credits should appear in the documentation.
+ *
+ * 4. This notice may not be removed or altered.
+ *
+-----------------------------------
+
+
+PM2
+-----------------------------------
+ * Redistribution and use in source and binary forms are permitted only
+ * as authorized by the OpenLDAP Public License.  A copy of this
+ * license is available at http://www.OpenLDAP.org/license.html or
+ * in file LICENSE in the top-level directory of the distribution.
+-----------------------------------
+
+
+UoC
+-----------------------------------
+ * Redistribution and use in source and binary forms are permitted
+ * provided that the above copyright notice and this paragraph are
+ * duplicated in all such forms and that any documentation,
+ * advertising materials, and other materials related to such
+ * distribution and use acknowledge that the software was developed
+ * by the University of California, Berkeley.  The name of the
+ * University may not be used to endorse or promote products derived
+ * from this software without specific prior written permission.
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR
+ * IMPLIED WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED
+ * WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.
+
+NOTE: The Regents have since retroactively removed the advertising
+clause from above.
+
+-----------------------------------
+
+
+UoC2
+-----------------------------------
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer.
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in the
+ *    documentation and/or other materials provided with the distribution.
+ * 3. All advertising materials mentioning features or use of this software
+ *    must display the following acknowledgement:
+ *      This product includes software developed by the University of
+ *      California, Berkeley and its contributors.
+ * 4. Neither the name of the University nor the names of its contributors
+ *    may be used to endorse or promote products derived from this software
+ *    without specific prior written permission.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
+ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
+ * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+ * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+ * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+ * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+
+NOTE: The Regents have since retroactively removed the advertising
+clause from above.
+See:
+ftp://ftp.cs.berkeley.edu/pub/4bsd/README.Impt.License.Change
+
+-----------------------------------
+
+
+UoM
+-----------------------------------
+ * Redistribution and use in source and binary forms are permitted
+ * provided that this notice is preserved and that due credit is given
+ * to the University of Michigan at Ann Arbor. The name of the University
+ * may not be used to endorse or promote products derived from this
+ * software without specific prior written permission. This software
+ * is provided ``as is'' without express or implied warranty.
+---
+After discussing this license with the OpenLDAP Foundation we received
+clarification on it:
+---
+
+  * To: Stephen Frost <sfrost@snowman.net>
+  * Subject: Re: OpenLDAP Licenseing issues
+  * From: "Kurt D. Zeilenga" <Kurt@OpenLDAP.org>
+  * Date: Wed, 28 May 2003 10:55:44 -0700
+  * Cc: Steve Langasek <vorlon@netexpress.net>,debian-legal@lists.debian.org, openldap-devel@OpenLDAP.org
+  * In-reply-to: <20030528162613.GB8524@ns.snowman.net>
+  * Message-id: <5.2.0.9.0.20030528094229.02924780@127.0.0.1>
+  * Old-return-path: <Kurt@OpenLDAP.org>
+
+Steven,
+
+The OpenLDAP Foundation believes it the Regents' statement grants a
+license to redistribute derived works and is confident that the University,
+who is quite aware of our actions (as they actively participate in them),
+does not consider our actions to infringe on their rights.  You are
+welcomed to your opinions. I suggest, however, that before you rely
+on your or other people's opinions (including ours), that you consult
+with a lawyer familiar with applicable law and the particulars of your
+situation.
+
+The Foundation sees no reason for it to expend its limited resources
+seeking clarifications which it believes are unnecessary.  You are,
+of course, welcomed to expend time and energy seeking clarifications
+you think are necessary.  I suggest you contact University's general
+counsel office (http://www.umich.edu/~vpgc/).
+
+Regards, Kurt
+-----------------------------------
+
+
diff -urN openldap-2.3.35/debian/copy_slapd_dev_files openldap-2.3.35_new/debian/copy_slapd_dev_files
--- openldap-2.3.35/debian/copy_slapd_dev_files	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/copy_slapd_dev_files	2007-04-12 17:29:49.000000000 -0300
@@ -0,0 +1,16 @@
+#! /bin/sh
+
+set -e
+
+echo -n "Installing: "
+target=libslapd2.3-dev
+echo -n " $target"
+find include -name "*.h" -print | sed -e 's:^include/::' |
+while read line; do
+  dir="`dirname $line`"
+  name="`basename $line`"
+
+  mkdir -p debian/libslapd2.3-dev/usr/include/slapd/$dir
+  cp include/$dir/$name debian/libslapd2.3-dev/usr/include/slapd/$dir/
+done
+echo "."
diff -urN openldap-2.3.35/debian/DB_CONFIG openldap-2.3.35_new/debian/DB_CONFIG
--- openldap-2.3.35/debian/DB_CONFIG	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/DB_CONFIG	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,78 @@
+# WARNING: Before tuning the following parameters, _PLEASE READ_
+#   /usr/share/doc/slapd/README.DB_CONFIG.gz
+
+# Set the database in memory cache size.
+#
+# set_cachesize <gbytes> <bytes> <ncache>
+#   Sets the database in memory cache size. 
+#   Database entries and indexes will be stored in this cache to 
+#   avoid disk access during database read and write operations. 
+#   Tuning this value can greatly effect your database performance. 
+#   The parameters are:
+#      <gbytes>: The number of gigabytes of memory to allocate to the cache.
+#      <bytes>: The number of bytes of memory to allocate to the cache.
+#      <ncache>: The number of cache segments to use. If this value is set to 
+#          0 or 1 then Berkeley DB will try to allocate one contiguous section 
+#          of memory for the cache. If this value is greater than 1, the cache 
+#          will be split into that number of segments.
+#set_cachesize   0       52428800        0
+
+# For the Debian package we use 2MB as default but be sure to update this
+# value if you have plenty of RAM
+set_cachesize 	0	2097152		0
+
+# Sets the database startup flags.
+#
+# set_flags <flag>
+#   There are various flag options that may be set. The DB_TXN_NOSYNC flag 
+#   tells the database not to immediately flush transaction buffers to disk. 
+#   Setting this flag can help speed up database access during periods of 
+#   database write activity BUT at expense of data safety. Enable it only
+#   to load data with slapadd, while slapd is not running.
+#set_flags       DB_TXN_NOSYNC
+
+
+# Set the maximum in memory cache in <bytes> for database file name caching.
+#
+# set_lg_regionmax <bytes>
+#   This value should be increased as the number of database files increases 
+#   (tables and indexes).
+#set_lg_regionmax        1048576
+
+# Set the maximum size of log files in <bytes>.
+#
+# set_lg_max <bytes>
+#   Logs will be rotated when <bytes> amount of data have been written to 
+#   one log file. This value should be at least four times the size of 
+#   set_lg_bsize.
+#set_lg_max              10485760
+
+# Set the in memory cache for log information.
+#
+# set_lg_bsize <bytes>
+#   When <bytes> amount of logging information have been written to this 
+#   cache it will be flushed to disk.
+#set_lg_bsize            2097152
+# For the Debian package we use 512kByte which should suffice for typical
+# directory usage (read often, write seldom)
+set_lg_bsize	524288
+
+# Set the log file directory to <directory>. 
+#
+# set_lg_dir              /usr/local/var/openldap-logs
+#   Log files should preferably be on a different disk than the 
+#   database files. This both improves reliability (for disastrous
+#   recovery) and speed of the database.
+#set_lg_dir <directory>
+
+
+# Sven Hartge reported that he had to set this value incredibly high
+# to get slapd running at all. See http://bugs.debian.org/303057
+# for more information.
+
+# Number of objects that can be locked at the same time.
+set_lk_max_objects      5000
+# Number of locks (both requested and granted)
+set_lk_max_locks        5000
+# Number of lockers
+set_lk_max_lockers	5000
diff -urN openldap-2.3.35/debian/dh_installscripts-common openldap-2.3.35_new/debian/dh_installscripts-common
--- openldap-2.3.35/debian/dh_installscripts-common	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/dh_installscripts-common	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,22 @@
+#!/usr/bin/perl -w
+
+use strict;
+use Debian::Debhelper::Dh_Lib;
+
+init();
+
+foreach my $package (@{$dh{DOPACKAGES}}) {
+	my $tmp=tmpdir($package);
+	my $ext=pkgext($package);
+
+	if (! -d "$tmp/DEBIAN") {
+		next;
+	}
+
+	foreach my $file (qw{postinst preinst prerm postrm config}) {
+		my $f="$tmp/DEBIAN/$file";
+		if ($f) {
+			complex_doit("perl -pe 's~#SCRIPTSCOMMON#~qx{cat debian/${ext}scripts-common}~eg' -i $f");
+		}
+	}
+}
diff -urN openldap-2.3.35/debian/fix_ldif openldap-2.3.35_new/debian/fix_ldif
--- openldap-2.3.35/debian/fix_ldif	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/fix_ldif	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,658 @@
+#!/usr/bin/perl -w
+# Copyright (c) Dave Horsfall.
+# All rights reserved.
+# 
+# Redistribution and use in source and binary forms, with or without
+# modification, are permitted provided that the following conditions
+# are met:
+# 1. Redistributions of source code must retain the above copyright
+#    notice, this list of conditions and the following disclaimer.
+# 2. Redistributions in binary form must reproduce the above copyright
+#    notice, this list of conditions and the following disclaimer in the
+#    documentation and/or other materials provided with the distribution.
+# 3. Neither the name of the University nor the names of its contributors
+#    may be used to endorse or promote products derived from this software
+#    without specific prior written permission.
+# 
+# THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
+# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+# ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
+# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
+# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+# SUCH DAMAGE.
+# 
+# 
+# @(#)$Id: rdnchk.e,v 1.12 2003-05-09 15:40:51+10 daveh Exp $
+# $Log: rdnchk.e,v $
+# Revision 1.12  2003-05-09 15:40:51+10  daveh
+# Enforce single-value attributes for CI stuff.
+#
+# Revision 1.11  2003-05-08 16:46:47+10  daveh
+# Add missing attributes when auto-fixing.
+#
+# Revision 1.10  2003-05-02 11:46:55+10  daveh
+# Sort DNs before writing out, and minor mods.
+#
+# Revision 1.9  2003-04-24 10:39:19+10  daveh
+# Always encode the userPassword attribute on output.
+#
+# Revision 1.8  2003-04-16 15:21:49+10  daveh
+# Don't use non-core LDIF module; treat values as case-insensitive; binary.
+#
+# Revision 1.7  2003-04-02 11:16:20+10  daveh
+# Delete ciComment (it's an attribute, not an objclass) and add ciLdapConfig
+#
+# Revision 1.6  2003-04-01 17:52:04+10  daveh
+# Fix errors on request, and minor mods.
+#
+# Revision 1.5  2003-03-28 17:15:34+11  daveh
+# More minor mods.
+#
+# Revision 1.4  2003-03-28 09:19:21+11  daveh
+# Use reference to ARGV typeglob for input.
+#
+# Revision 1.3  2003-03-27 16:08:57+11  daveh
+# Use Net::LDAP::LDIF, and minor speedups.
+#
+# Revision 1.2  2003-03-11 11:17:03+11  daveh
+# Look for orphan DNs.
+#
+# Revision 1.1  2003-02-27 14:28:09+11  daveh
+# Initial revision
+#
+#
+# RDNCHK
+#
+# Given a slapcat input file, check for mismatched DN/RDN pairs etc.
+# Optionally make fixes (use with care).
+#
+# The data structure is a hash of references to hashes of anonymous lists:
+#
+#   $entries{$dn} =	# $dn has been normalised
+#   {
+#     origDN => "original DN",
+#     attr1 => [ "value1-a", "value1-b" ],
+#     attr2 => [ "value2" ]
+#   }
+#
+# which is accessed as (e.g):
+#
+#   @{entries{$dn}{"attr1"}}
+#
+# to return an array of the value(s) of $dn's attr1.
+#
+# Note that this structure is optimised for access to the DNs, *not*
+# for searches.
+#
+# The DN is low-cased and leading/trailing/multiple spaces stripped
+# (and the original stored for posterity).
+#
+# I assume that caseIgnoreMatch applies across the board, as otherwise
+# it's too damned difficult.  This only fails, in practice, for encoded
+# fields such as passwords, but I'm not looking at those (passwords are
+# rarely, if ever, a candidate for being an RDN).  Remember: the specific
+# purpose of this program is to perform a quick but reasonably thorough
+# check for DN/RDN consistency, and it sorta grew from there.
+#
+# We can't use Perl Net::LDAP::LDIF, because it's not a core module
+# (too hard to maintain our remote branches when upgrading).
+#
+# TODO:
+#	Check custom stuff:
+#
+#	    ciDefPrinter is single-value per ciPrinterClass.
+#	    Fundamentally difficult, because these are keys
+#	    into printcap, not LDAP.
+#
+
+use Data::Dumper;
+use Getopt::Long;
+use MIME::Base64;
+
+my $origDN = '.origDN';	# Attribute stores original DN
+
+&parse_options;
+$opt_write = 1 if $opt_fix;
+
+#
+# Process each entry.
+# A list (returned in @_) holds each line, with the DN first.
+#
+while (@_ = &GetEntry)	# Loop per entry (exit on EOF)
+{
+    my $dn = shift @_;
+    # Check if base64 encoded
+    next if ! $dn =~ /^dn::? /i;
+    if($dn =~ /^dn:: /i) {
+      $dn =~ s/dn:: (.*)/$1/;
+      $dn = decode_base64($dn);
+      $dn =~ s/\s$//;
+      $encoded = 1;
+    } else {
+      $dn =~ s/dn: (.*)/$1/;
+      $encoded = 0;
+    }
+    my $cdn = &canon($dn);
+    $entries{$cdn}{$origDN} = $dn;
+    $entries{$cdn}{"encoded"} = $encoded;
+
+    #
+    # Infer the suffix.
+    # Assume it's the shortest DN.
+    #
+    if (!$opt_suffix)
+    {
+	$suffix = $cdn
+	    if (!defined $suffix) || (length $cdn < length $suffix);
+    }
+
+    #
+    # Extract the first component (the RDN)
+    # for later tests.
+    #
+    ($rdn, undef) = split(/,/, $cdn);
+    ($rdnattr, $rdnval) = split(/=/, $rdn);
+
+    #
+    # Get the attributes/values.
+    # Attributes are low-cased.
+    #
+    for (@_)
+    {
+	($attr, $val) = split(/\s/, $_, 2);	# In case of "::"
+	$attr =~ s/://;
+	if ($attr =~ /:/)			# Must be binary (base-64)
+	{
+	    $attr =~ s/://;
+	    $val = &demime($val);
+	}
+	push @{$entries{$cdn}{lc $attr}}, $val;
+    }
+
+    #
+    # Does the RDN exist?
+    #
+    if (!defined @{$entries{$cdn}{$rdnattr}})
+    {
+	print STDERR "dn: $dn\nMissing RDN";
+	if ($opt_fix)
+	{
+	    push @{$entries{$cdn}{$rdnattr}}, $rdnval;
+	    print STDERR "; inserted \"$rdnattr=$rdnval\"";
+	}
+	print STDERR "\n\n";
+    }
+
+    #
+    # And how many?  Multiples are permitted
+    # in some contexts, but not in ours.
+    #
+    my $attrs = $entries{$cdn}{$rdnattr};	# Actually a reference
+    my $nrdn = @{$attrs};
+    if ($nrdn > 1)
+    {
+	print STDERR "dn: $dn\nMultiple RDNs: \"@{$attrs}[0]\"";
+	for (my $i = 1; $i < $nrdn; $i++)
+	{
+	    print STDERR ", \"@{$attrs}[$i]\"";
+	}
+	if ($opt_fix)
+	{
+	    print STDERR "; using \"$rdnval\"";
+	    $entries{$cdn}{$rdnattr} = [ $rdnval ];
+	}
+	print STDERR "\n\n";
+    }
+
+    #
+    # Do they match?
+    #
+    if (defined @{$attrs} && $rdnval ne &canon(@{$attrs}[0]))
+    {
+	print STDERR "dn: $dn\nMismatched RDN: \"$rdnattr=@{$attrs}[0]\"";
+	if ($opt_fix)
+	{
+	    print STDERR "; using \"$rdnval\"";
+	    $entries{$cdn}{$rdnattr} = [ $rdnval ];
+	}
+	print STDERR "\n\n";
+    }
+
+    #
+    # Check single-value attributes.
+    #
+    foreach my $attr (@single)
+    {
+	my $nval = 0;
+	my $attrs = $entries{$cdn}{lc $attr};
+	$nval = @{$attrs} if defined @{$attrs};
+	if ($nval > 1)
+	{
+	    print STDERR "dn: $dn\nMultiple attrs for \"$attr\": \"@{$attrs}[0]\"";
+	    for (my $i = 1; $i < $nval; $i++)
+	    {
+		print STDERR ", \"@{$attrs}[$i]\"";
+	    }
+	    if ($opt_fix)
+	    {
+		print STDERR "; using \"@{$attrs}[0]\"";
+		$entries{$cdn}{lc $attr} = [ @{$attrs}[0] ];
+	    }
+	    print STDERR "\n\n";
+	}
+    }
+
+    #
+    # Check the objectclass inheritance.
+    #
+    if ($opt_inheritance)	# Will soon be mandatory
+    {
+	foreach my $i (@{$entries{$cdn}{"objectclass"}})
+	{
+	    next if $i eq "top";	# top is topless :-)
+	    if (!defined $sup{$i})
+	    {
+		print STDERR "dn: $dn\nUnknown objectclass: \"$i\"";
+		if ($opt_fix)
+		{
+		    print STDERR "; ignored";
+		    &remove($i, \@{$entries{$cdn}{"objectclass"}});
+		}
+		print STDERR "\n\n";
+	    }
+	    if (defined $sup{$i} &&
+		!&present($sup{$i}, \@{$entries{$cdn}{"objectclass"}}))
+	    {
+		print STDERR "dn: $dn\nNo sup for \"$i\": \"$sup{$i}\"";
+		if ($opt_fix)
+		{
+		    print STDERR "; inserted";
+		    push @{$entries{$cdn}{"objectclass"}}, $sup{$i};
+		}
+		print STDERR "\n\n";
+	    }
+	} # each objectclass
+    } # inheritance
+
+    #
+    # Check required attributes.
+    # Can't do in above loop, because the keys
+    # may have changed from inserting new classes.
+    #
+    foreach my $i (@{$entries{$cdn}{"objectclass"}})
+    {
+	&checkattrs($cdn, $i);
+    }
+} # main loop
+
+#
+# Make sure each entry has a parent.
+# For now, we kill orphans on sight...
+#
+$suffix = $opt_suffix if $opt_suffix;
+foreach my $thisdn (keys %entries)
+{
+    my $i = $thisdn;
+    $i =~ s/[^,]*,//;
+    if (!$entries{$i} && $thisdn ne &canon($suffix))
+    {
+	print STDERR "dn: $thisdn\nOrphan";
+	if ($opt_fix)
+	{
+	    print STDERR "; deleted";
+	    delete $entries{$thisdn};
+	}
+	print STDERR "\n\n";
+    }
+
+    # Fix up the suffix dn if it's our mess, adding a structural objectclass.
+    if ($thisdn eq &canon($suffix)) {
+	if (@{$entries{$thisdn}{'objectclass'}} == 1
+	    && lc $entries{$thisdn}{'objectclass'}[0] eq 'dcobject')
+	{
+		if (defined($opt_org))
+		{
+			push(@{$entries{$thisdn}{'objectclass'}}, 'organization');
+			push(@{$entries{$thisdn}{'o'}}, $opt_org);
+		} else {
+			push(@{$entries{$thisdn}{'objectclass'}}, 'domain');
+		}
+	}
+	# check for $classes == dcObject.
+    }
+}
+
+print STDERR Dumper(%entries) if $opt_dump;
+
+#
+# Write out (possibly fixed) file if requested.
+#
+# The DN keys are sorted by length, which ensures that
+# parents come before children.
+#
+if ($opt_write)
+{
+    foreach my $dn (sort { length($a) <=> length($b) } keys %entries)
+    {
+	&write_out($dn)
+    }
+}
+
+exit 0;
+
+###########################################################################
+
+#
+# Canonicalise a string.
+# Delete leading/trailing blanks around commas, and lowcase.
+#
+sub canon
+{
+    ($_) = @_;
+    s/\s+/ /g;	# Catch tabs as well
+    s/ ,/,/g;
+    s/, /,/g;
+    lc;
+}
+
+#
+# Check required attributes, and fix up known attributes for which the
+# syntax has changed
+# Bad hack: the "fix up" should be replaced by something which knows
+# about schemas and can fix all instances for all attributes of the
+# relevant attribute syntax (1.3.6.1.4.1.1466.115.121.1.27).  For now,
+# we only check the most commonly affected attributes, which we also
+# happen to know are SINGLE-VALUE (with the exception of
+# mailPreferenceOption and ipServiceProtocol).
+#
+sub checkattrs
+{
+    (my $dn, $class) = @_;
+    foreach my $attr (@{$reqd{lc $class}})
+    {
+	if (!defined @{$entries{$dn}{lc $attr}})
+	{
+	    my $odn = $entries{$dn}{$origDN};
+	    print STDERR "dn: $odn\nMissing reqd \"$class\" attr \"$attr\"";
+	    if ($opt_fix)
+	    {
+		# Quick hack for CI
+		my $fix = "UNKNOWN";
+		if ($attr eq "cn" && $fix ne "")
+		{
+		    $fix = $entries{$dn}{"givenname"}[0];
+		}
+		push @{$entries{$dn}{$attr}}, $fix;
+		print STDERR "; inserted \"$fix\"";
+	    }
+	    print STDERR "\n\n";
+	}
+    }
+    foreach my $attr (@integer) {
+	$entries{$dn}{lc $attr}[0] = 0
+	    if ($entries{$dn}{lc $attr} && $entries{$dn}{lc $attr}[0] =~ /^0+$/);
+    }
+}
+
+#
+# Write an entry to standard output.
+#
+# Ought to wrap at 78 cols as well.
+#
+sub write_out
+{
+    my ($dn) = @_;
+    my $odn = $entries{$dn}{$origDN};
+    if ($entries{$dn}{"encoded"} == 1) {
+      $encoded = encode_base64($odn,"");
+      print "dn:: $encoded\n";
+    } else {
+      print "dn: $odn\n";
+    }
+    foreach my $attr (keys %{$entries{$dn}})
+    {
+	next if $attr eq $origDN;
+	foreach my $value (@{$entries{$dn}{$attr}})
+	{
+	    print "$attr:";
+	    if ($attr =~ /userpassword/i
+		|| $value =~ /(^[ :]|[\x00-\x1f\x7f-\xff])/)
+	    {
+		print ": ", &enmime($value, "");
+	    }
+	    else
+	    {
+		print " $value";
+	    }
+	    print "\n";
+	}
+    }
+    print "\n";
+}
+
+#
+# Test for presence of element in list.
+#
+sub present
+{
+    my ($element, $list) = @_;
+    my $found = 0;
+
+    foreach my $i (@$list)
+    {
+        if ($i eq $element)
+        {
+            $found = 1;
+            last;
+        }
+    }
+    return $found;
+}
+
+#
+# Remove specified element from list.
+# It's a unique element, but multiple
+# occurances will be removed.  It will
+# change the order of the list.
+#
+sub remove
+{
+    my ($element, $list) = @_;
+
+    for (my $i = 0; $i < @$list; $i++)
+    {
+        if ($element eq @$list[$i])
+        {
+	    @$list[$i] = @$list[$#$list];
+            pop @$list;
+        }
+    }
+}
+
+#
+# Initialise some stuff (automatically called).
+#
+sub INIT
+{
+    #
+    # Initialise the superior objectclasses.
+    # Ought to get this from the schema.
+    #
+    $sup{"dcObject"} = "top";
+    $sup{"inetOrgPerson"} = "organizationalPerson";
+    $sup{"organizationalPerson"} = "person";
+    $sup{"organizationalRole"} = "top";
+    $sup{"organizationalUnit"} = "top";
+    $sup{"person"} = "top";
+    $sup{"posixAccount"} = "top";
+    $sup{"room"} = "top";
+    $sup{"simpleSecurityObject"} = "top";
+
+    #
+    # These are incomplete/wrong/WIP.
+    #
+    $sup{"ciAdministrator"} = "top";
+    $sup{"ciApplication"} = "top";
+    $sup{"ciEmployee"} = "inetOrgPerson";
+    $sup{"ciLdapConfig"} = "top";
+    $sup{"ciPrinter"} = "top";
+    $sup{"ciServer"} = "top";
+
+    #
+    # Required attributes.
+    #
+    $reqd{"person"} = [ "sn", "cn" ];	# Special - can be autofixed
+    $reqd{"ciadministrator"} = [ "uid", "userPassword" ];
+    $reqd{"ciapplication"} = [ "ciApp", "ciAppType", "ciHost", "ciStatus", "ciPortNum" ];
+    $reqd{"ciemployee"} = [ "employeeNumber", "sn" ];
+    $reqd{"cildapconfig"} = [ "ciHost" ];
+    $reqd{"ciprinter"} = [ "ciPrinterName" ];
+    $reqd{"ciserver"} = [ "name" ];
+
+    #
+    # Single-value attributes.
+    #
+    @single =
+    (
+	"ciAppType",
+	"ciDBPath",
+	"ciDomainName", 
+	"ciLdapEnabled",
+	"ciLdapServer",
+	"ciOSType",
+	"ciPortNum",
+	"ciPrinterClass",
+	"ciRegion",
+	"ciStatus",
+    );
+
+    #
+    # Integer attributes
+    #
+    @integer =
+    (
+	'uidNumber',
+	'gidNumber',
+	'mailPreferenceOption',
+	'shadowLastChange',
+	'shadowMin',
+	'shadowMax',
+	'shadowWarning',
+	'shadowInactive',
+	'shadowExpire',
+	'shadowFlag',
+	'ipServicePort',
+	'ipServiceProtocol',
+	'ipProtocolNumber',
+	'oncRpcNumber',
+    );
+
+    #
+    # Random stuff.
+    #
+    $/ = "";		# Read input in paragraph mode
+}
+
+#
+# Process options.
+#
+sub parse_options
+{
+    $SIG{'__WARN__'} = sub { die $_[0] };	# Exit on bad options
+
+    Getopt::Long::Configure("bundling");	# Old-style (-xyz, --word)
+    GetOptions
+    (
+	"--dump"	=> \$opt_dump,		# Dump data structure
+	"-D"		=> \$opt_dump,
+
+	"--fix"		=> \$opt_fix,		# Fix errors if possible
+	"-f"		=> \$opt_fix,		# (also implies "write")
+
+	"--inheritance"	=> \$opt_inheritance,	# Check obj inheritance
+	"-i"		=> \$opt_inheritance,	# (too many false alarms)
+
+	"--suffix=s"	=> \$opt_suffix,	# Specify directory suffix
+	"-s=s"		=> \$opt_suffix,
+
+	 "--write"	=> \$opt_write,		# Write ordered file
+	 "-w"		=> \$opt_write,
+
+	 "--org=s"	=> \$opt_org,		# Organization to use for
+	 "-o=s"		=> \$opt_org,		# fixing up the suffix
+    )
+}
+
+#
+# Get a complete entry as a list of lines.
+# We use the trick of setting the input delimiter
+# to "", to read a paragraph at a time, so we can
+# join continued lines.
+#
+sub GetEntry
+{
+    my @a;
+    do
+    {
+	$_ = (<>);
+	return () if !defined;	# EOF
+	s/$/\n/;	# In case we strip last newline below
+	s/^#.*\n//g;	# Comments
+	chomp;		# Always strips >= 2 newlines
+	s/\n //g;	# Join lines
+	@a = split /\n/;
+    }
+    while (@a < 2);	# Skips phantom entries (caused by comments)
+    return @a;
+}
+
+#
+# Given a string, return a de-mimed version.
+# Can't use MIME::Base64 because it's not a core module.
+# Instead, I pinched the code from it...
+#
+sub demime
+{
+    local($^W) = 0; # unpack("u",...) gives bogus warning in 5.00[123]
+
+    my $str = shift;
+    $str =~ tr|A-Za-z0-9+=/||cd;            # remove non-base64 chars
+    if (length($str) % 4) {
+	require Carp;
+	Carp::carp("Length of base64 data not a multiple of 4")
+    }
+    $str =~ s/=+$//;                        # remove padding
+    $str =~ tr|A-Za-z0-9+/| -_|;            # convert to uuencoded format
+
+    return join'', map( unpack("u", chr(32 + length($_)*3/4) . $_),
+	                $str =~ /(.{1,60})/gs);
+}
+
+#
+# En-mime same.
+# I didn't write this bletcherous code either.
+#
+sub enmime
+{
+    my $res = "";
+    my $eol = $_[1];
+    $eol = "\n" unless defined $eol;
+    pos($_[0]) = 0;                          # ensure start at the beginning
+
+    $res = join '', map( pack('u',$_)=~ /^.(\S*)/, ($_[0]=~/(.{1,45})/gs));
+
+    $res =~ tr|` -_|AA-Za-z0-9+/|;               # `# help emacs
+    # fix padding at the end
+    my $padding = (3 - length($_[0]) % 3) % 3;
+    $res =~ s/.{$padding}$/'=' x $padding/e if $padding;
+    # break encoded string into lines of no more than 76 characters each
+    if (length $eol) {
+	$res =~ s/(.{1,76})/$1$eol/g;
+    }
+    return $res;
+}
diff -urN openldap-2.3.35/debian/ldiftopasswd openldap-2.3.35_new/debian/ldiftopasswd
--- openldap-2.3.35/debian/ldiftopasswd	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/ldiftopasswd	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,174 @@
+#!/usr/bin/perl -w
+#
+#
+# Comments on usage from the email we received:
+# I showed a friend the following script. He said I should submit it for
+# inclusion in openldap, because it might useful for others. 
+#
+# The attached perl script, when used like
+#
+# ldapsearch | ldiftopasswd
+#
+# will automatically:
+#
+# 1. create /etc/passwd, /etc/shadow, /etc/group, and /etc/gshadow
+#
+# 2. append /etc/passwd.top, /etc/shadow.top, /etc/group.top, and /etc/gshadow.top to respective files.
+#
+# 3. use data from ldap to create the files (note: gshadow isn't really
+# supported, because I don't use it, nor could I find any
+# documentation. Adding support for other files should be easy).
+#
+# (of course you need access to all fields including the password field
+# for this, so use correct parameters to ldapsearch).
+#
+# This could be useful for instance on laptop computers where you don't
+# want to run a slave slapd server for some reason (perhaps memory
+# constraints).
+# ----------------------------------------
+use strict;
+use Getopt::Long;
+use MIME::Base64;
+use IO::File;
+
+my $passwdfile="/etc/passwd";
+my $shadowfile="/etc/shadow";
+my $groupfile="/etc/group";
+my $gshadowfile="/etc/gshadow";
+my $help;
+GetOptions (
+		'--passwd=s',\$passwdfile,
+		'--shadow=s',\$shadowfile,
+		'--group=s',\$groupfile,
+		'--gshadow=s',\$gshadowfile,
+		'--help',\$help,
+            ) or die "Bad options\n";
+
+if ($help or $#ARGV != -1) {
+  print STDERR "usage: $0 [etcfile=filename] [--help]\n";
+  exit 255;
+}
+
+sub start_file($) {
+  my ($file) = @_;
+  my $outhandle = new IO::File;
+  $outhandle->open(">$file") or die "Cannot open $file for writing";
+
+  open(TMP,"<$file.top") or die "cannot open $file.top for reading";
+  while (<TMP>) { $outhandle->print($_); }
+  close(TMP) or die "cannot close $file for reading";
+
+  return($outhandle);
+}
+
+my $PASSWD  = start_file($passwdfile);
+my $SHADOW  = start_file($shadowfile);
+my $GROUP   = start_file($groupfile);
+my $GSHADOW = start_file($gshadowfile);
+
+sub dopasswd($) {
+      my ($record) = @_;
+      my $userPassword="*";
+
+      $PASSWD->print(
+      	$record->{"uid"},":",
+	"x",":",
+      	$record->{"uidNumber"},":",
+      	$record->{"gidNumber"},":",
+      	$record->{"gecos"},":",
+      	$record->{"homeDirectory"},":",
+      	$record->{"loginShell"},"\n");
+
+      if (defined($record->{"userPassword"}) &&
+          $record->{"userPassword"} =~ /^{(crypt)}(.*)$/)
+        { $userPassword = $2; }
+
+      $SHADOW->print(
+      	$record->{"uid"},":",
+      	$userPassword,":",
+	$record->{"shadowLastChange"} || "10706",":",
+      	$record->{"shadowMin"} || "0",":",
+      	$record->{"shadowMax"} || "99999",":",
+      	$record->{"shadowWarning"} || "7",":",
+      	$record->{"shadowInactive"} || "",":",
+      	$record->{"shadowExpire"} || "",":",
+	"","\n");
+}
+
+sub dogroup($) {
+      my ($record) = @_;
+      my $userPassword="*";
+
+      my $members="";
+      if (defined($record->{"memberUid"})) {
+        $members = join(",",@{$record->{"memberUid"}});
+      }
+
+      $GROUP->print(
+      	$record->{"cn"},":",
+	"x",":",
+      	$record->{"gidNumber"},":",
+      	$members,"\n");
+
+      if (defined($record->{"userPassword"}) &&
+          $record->{"userPassword"} =~ /^{(crypt)}(.*)$/)
+        { $userPassword = $2; }
+
+# !FIXME!
+#      $GSHADOW->print
+#      	$record->{"cn"},":",
+#	"*",":",
+#	"",":",
+#	"","\n";
+}
+
+
+my %record;
+my $user=0;
+my $group=0;
+
+while (<>) {
+  if (/^$/) {
+    if ($user) {
+      dopasswd(\%record);
+    }
+    if ($group) {
+      dogroup(\%record);
+    }
+
+    $user = $group = 0;
+    %record=();
+  }
+  elsif (/^objectClass: posixAccount$/) {
+    $user = 1;
+  }
+  elsif (/^objectClass: posixGroup$/) {
+    $group = 1;
+  }
+  elsif (/^(uid|uidNumber|gidNumber|gecos|homeDirectory|loginShell): (.*)$/) {
+    if (!defined($record{$1})) { $record{$1} = $2; }
+  }
+  elsif (/^(userPassword|shadowLastChange|shadowMin|shadowMax|shadowWarning|shadowInactive|shadowExpire): (.*)$/) {
+    if (!defined($record{$1})) { $record{$1} = $2; }
+  }
+  elsif (/^(cn): (.*)$/) {
+    if (!defined($record{$1})) { $record{$1} = $2; }
+  }
+  elsif (/^(uniqueMember): (.*)$/) {
+    push @{$record{$1}},$2;
+    if ($2 =~ /uid=([a-zA-Z]*),/) {
+	    push @{$record{"memberUid"}},$1;
+    }
+  }
+  elsif (/^(memberUid): (.*)$/) {
+    push @{$record{$1}},$2;
+  }
+  elsif (/^(userPassword):: (.*)$/) {
+    $record{$1} = decode_base64($2);
+  }
+}
+
+$PASSWD->close  or die "Cannot close $passwdfile for writing";
+$SHADOW->close  or die "Cannot close $shadowfile for writing";
+$GROUP->close   or die "Cannot close $groupfile for writing";
+$GSHADOW->close or die "Cannot close $gshadowfile for writing";
diff -urN openldap-2.3.35/debian/libldap-2.2-7.README.Debian openldap-2.3.35_new/debian/libldap-2.2-7.README.Debian
--- openldap-2.3.35/debian/libldap-2.2-7.README.Debian	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/libldap-2.2-7.README.Debian	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,22 @@
+Notes about Debian's libldap2 package
+-------------------------------------
+
+It has been reported that using libnss-ldap can cause a failure to 
+unmount /usr on system shutdown. The reason is that the nss module
+uses libldap from /usr and is used by the shell in the system 
+scripts executed on shutdown/reboot. 
+
+More precisely bash uses the getpwuid function to get the data of
+the current user which pulls in the nss modules which includes
+the ldap libraries if you are using that module. 
+
+Possible solutions to this problem are:
+
+a) use another shell that does not utilize getpwuid for getting info
+   about the current user (take dash for example).
+b) make sure that the nsswitch.conf is replaced by a version which does
+   not mention ldap before the system is shut down (and have a startup
+   script that installs the "full" version of that file).
+c) move the libraries to /lib (not recommended).
+
+ -- Torsten Landschoff <torsten@debian.org>  Mon, 30 Sep 2002 11:06:22 +0200
diff -urN openldap-2.3.35/debian/libldap2-dev.links openldap-2.3.35_new/debian/libldap2-dev.links
--- openldap-2.3.35/debian/libldap2-dev.links	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/libldap2-dev.links	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,10 @@
+lber-encode.3	usr/share/man/man3/ber_put_bitstring.3
+lber-encode.3	usr/share/man/man3/ber_put_boolean.3
+lber-encode.3	usr/share/man/man3/ber_start_seq.3
+lber-memory.3	usr/share/man/man3/ber_memalloc.3
+lber-memory.3	usr/share/man/man3/ber_memcalloc.3
+lber-memory.3	usr/share/man/man3/ber_memfree.3
+lber-memory.3	usr/share/man/man3/ber_memrealloc.3
+lber-types.3	usr/share/man/man3/ber_int_t.3
+lber-types.3	usr/share/man/man3/ber_len_t.3
+lber-types.3	usr/share/man/man3/ber_tag_t.3
diff -urN openldap-2.3.35/debian/lintian-overrides openldap-2.3.35_new/debian/lintian-overrides
--- openldap-2.3.35/debian/lintian-overrides	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/lintian-overrides	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,9 @@
+# db_input is used for telling the user when something goes wrong during
+# configuration. That's a perfectly valid reason to use debconf in postinst.
+# -- Torsten
+slapd: postinst-uses-db-input
+
+# dh_shlibdeps is not smart enough to wipe additional relations. Since this
+# is not easy to fix we don't even try to do it at this time.  -- Torsten
+slapd: package-has-a-duplicate-relation depends: @LIBPKG@, @LIBPKG@ (= @LIBVER@)
+ldap-utils: package-has-a-duplicate-relation depends: @LIBPKG@, @LIBPKG@ (= @LIBVER@)
diff -urN openldap-2.3.35/debian/move_files openldap-2.3.35_new/debian/move_files
--- openldap-2.3.35/debian/move_files	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/move_files	2007-04-12 17:50:25.000000000 -0300
@@ -0,0 +1,122 @@
+#! /bin/sh
+
+set -e
+
+# Move the files of the complete installation into the appropriate 
+# packages.
+
+install_stuff() {
+  from=debian/tmp
+  to=debian/$target
+
+  while [ "$#" -ge 1 ]; do
+    dir="`dirname $1`"
+    name="`basename $1`"
+
+    mkdir -p $to/$dir
+    mv $from/$dir/$name $to/$dir/
+    shift
+  done
+}
+
+install_slapd_symlinks()
+{
+	local LINKS link t
+	
+  	LINKS=`find debian/tmp/usr/sbin -type l | sed 's@^\./@@'`
+  	for link in $LINKS; do
+		t=`readlink $link`
+		[ ${t##*/} != slapd ] || ln -sf slapd $link
+  	done
+}
+
+set_target() {
+  target="$1"
+  echo -n " $target"
+  
+#  create_lintian_overrides
+}
+
+create_lintian_overrides() {
+  local destdir tmpfile
+  destdir=debian/$target/usr/share/lintian/overrides
+  tmpfile=`mktemp`
+
+  if grep "^$target:" debian/lintian-overrides >$tmpfile; then
+    local libpkg libver
+    libpkg=`awk '/^Package:.*libldap/ { print $2 }' < debian/control`
+    libver=`dpkg-parsechangelog|awk '/^Version:/ { print $2 }'`
+    mkdir -p -m 755 $destdir
+    sed -e "s/@LIBPKG@/$libpkg/g" -e "s/@LIBVER@/$libver/g" \
+    	$tmpfile > $destdir/$target
+  fi
+  rm $tmpfile
+}
+
+check_completeness() {
+  missing=`find debian/tmp -not -type d|wc -w`
+  if [ "$missing" -gt 0 ]; then
+    echo "There are $missing files missing from the resulting package set: "
+    find debian/tmp -not -type d
+    exit 1
+  fi
+}
+
+echo -n "Removing default configuration files... "
+find debian/tmp -name \*.default|xargs rm
+echo done
+
+echo -n "Removing broken .la files... "
+find debian/tmp -name \*.la|xargs rm
+echo done
+
+echo -n "Removing static backend archives... "
+rm -f debian/tmp/usr/lib/ldap/back_*.a
+echo done
+
+echo -n "Installing:"
+set_target slapd
+mv debian/tmp/usr/lib/slapd debian/tmp/usr/lib/slurpd debian/tmp/usr/sbin/
+install_slapd_symlinks
+install_stuff usr/sbin
+install_stuff usr/lib/ldap
+install_stuff usr/share/man/man5/slapd*
+install_stuff usr/share/man/man5/slapo*
+install_stuff usr/share/man/man5/ldap.conf.*
+install_stuff usr/share/man/man8
+install_stuff etc/ldap/schema
+install_stuff etc/ldap/schema.14852
+install -m644 debian/slapd.conf debian/slapd/usr/share/slapd/slapd.conf
+install -m644 debian/DB_CONFIG debian/slapd/usr/share/slapd/DB_CONFIG
+install -m755 debian/fix_ldif debian/slapd/usr/share/slapd/fix_ldif
+install -m755 debian/ldiftopasswd debian/slapd/usr/share/slapd/ldiftopasswd
+rm -f debian/tmp/var/openldap-data/DB_CONFIG.example
+rm -f debian/tmp/etc/ldap/DB_CONFIG.example
+rm -f debian/tmp/etc/ldap/slapd.conf
+
+
+set_target ldap-utils
+install_stuff usr/bin
+install_stuff usr/share/man/man1
+install_stuff usr/share/man/man5/ldif*
+
+
+set_target libldap2.3
+# Drop the config files for now since they clash with libldap2
+# TODO: Should get moved to libldap2.3 later on...
+install_stuff etc/ldap/ldap*.conf
+( cd debian/tmp/usr/lib; \
+  ln -sf libldap_r-2.3.so.? libldap-2.3.so.?;
+  ln -sf libldap_r-2.3.so.?.?.?? libldap-2.3.so.?.?.??
+)
+install_stuff usr/lib/*.so.*
+
+set_target libldap2.3-dev
+# link libldap.a to libldap_r.la
+ln -sf libldap_r.a debian/tmp/usr/lib/libldap.a
+install_stuff usr/include
+install_stuff usr/lib/*.so usr/lib/*.a
+install_stuff usr/share/man/man3
+echo "."
+
+check_completeness
diff -urN openldap-2.3.35/debian/po/cs.po openldap-2.3.35_new/debian/po/cs.po
--- openldap-2.3.35/debian/po/cs.po	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/po/cs.po	2007-04-12 17:52:56.000000000 -0300
@@ -0,0 +1,542 @@
+#
+#    Translators, if you are not familiar with the PO format, gettext
+#    documentation is worth reading, especially sections dedicated to
+#    this format, e.g. by running:
+#         info -n '(gettext)PO Files'
+#         info -n '(gettext)Header Entry'
+#
+#    Some information specific to po-debconf are available at
+#            /usr/share/doc/po-debconf/README-trans
+#         or http://www.debian.org/intl/l10n/po-debconf/README-trans
+#
+#    Developers do not need to manually edit POT or PO files.
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: openldap2.2\n"
+"Report-Msgid-Bugs-To: torsten@debian.org\n"
+"POT-Creation-Date: 2007-04-12 17:52-0300\n"
+"PO-Revision-Date: 2005-06-05 10:51+0200\n"
+"Last-Translator: Miroslav Kure <kurem@debian.cz>\n"
+"Language-Team: Czech <debian-l10n-czech@lists.debian.org>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid "Omit OpenLDAP server configuration?"
+msgstr "Peskoit nastaven OpenLDAP serveru?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid ""
+"If you enable this option, no initial configuration or database will be "
+"created for you."
+msgstr ""
+"Pistoupte-li na tuto monost, nevytvo se databze ani poten "
+"nastaven."
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid "Dump databases to file on upgrade:"
+msgstr "Pi aktualizaci uloit databze do souboru:"
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Before upgrading to a new version of the OpenLDAP server the data of  your "
+"LDAP directories can be dumped to plain text files (LDIF format) which is a "
+"standardized description of that data (LDIF stands for LDAP Data Interchange "
+"Format)."
+msgstr ""
+"Ped aktualizac na novj verzi serveru OpenLDAP se mus data z LDAP "
+"adres vyexportovat do textovch soubor ve formtu LDIF, co je "
+"standardizovan formt pro popis tchto dat. (LDIF je zkratka z LDAP Data "
+"Interchange Format.)"
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Selecting \"always\" will make the maintainer scripts dump your databases "
+"before upgrading unconditionally. Selecting \"when needed\" will only dump "
+"the database if the new version is incompatible with the old database format "
+"and it has to be reimported. The \"never\" choice will just go ahead without "
+"ever dumping your database."
+msgstr ""
+"Vbrem \"always\" zajistte, e se databze ped kadou aktualizac "
+"vyexportuj do soubor. Vbrem \"when needed\" se databze vyexportuj "
+"pouze v ppad, e je formt nov databze nekompatibiln s pedchoz verz "
+"a tud je poteba data znovu nahrt. Monost \"never\" pjde vdy bezhlav "
+"vped a data nikdy nevyexportuje."
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid "Directory to dump databases:"
+msgstr "Adres pro export databz:"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid ""
+"Please specify the directory where the LDAP databases will be exported. "
+"Within this directory several LDIF files are created which correspond to the "
+"search bases located on the server. Make sure you have enough free space on "
+"the partition the directory is located.  The first occurrence of the string "
+"\"VERSION\" is replaced with the server version you are upgrading from. The "
+"default is /var/backups/slapd-VERSION"
+msgstr ""
+"Zadejte prosm adres, do kterho se budou exportovat LDAP databze. V "
+"tomto adresi se vytvo nkolik LDIF soubor odpovdajcch koenm LDAP "
+"adres na danm serveru. Ujistte se, e mte na dan oblasti dostatek "
+"msta. Prvn vskyt etzce \"VERSION\" se nahrad verz LDAP serveru, ze "
+"kterho aktualizujete na novj verzi. Vchoz cesta je /var/backups/slapd-"
+"VERSION"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid "Move old database?"
+msgstr "Pesunout starou databzi?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid ""
+"There are still files in /var/lib/ldap which will probably break the "
+"configuration process. If you enable this option, the maintainer scripts "
+"will move the old database files out of the way before creating a new "
+"database."
+msgstr ""
+"Ve /var/lib/ldap jsou stle soubory, kter pravdpodobn naru instalan "
+"proces. Budete-li souhlasit, instalan skripty ped vytvoenm nov "
+"databze nejprve pesunou star databzov soubory na jin msto."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid "Invalid configuration. Retry configuration?"
+msgstr "Neplatn nastaven. Zopakovat konfiguraci?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid ""
+"The configuration you entered is invalid. Make sure that the DNS domain name "
+"has a valid syntax, the organization is not left empty and that the admin "
+"passwords match. If you decide not to retry the configuration the LDAP "
+"server will not be set up. Run \"dpkg-reconfigure\" if you want to retry "
+"later."
+msgstr ""
+"Zadan nastaven nen platn. Ujistte se, e mte domnov jmno (DNS) ve "
+"sprvnm formtu, e je vyplnn organizace a e administrtorsk hesla "
+"souhlas. Jestlie neprovedete nov nastaven, LDAP server nebude "
+"nakonfigurovn. Budete-li chtt balk nastavit pozdji, pouijte \"dpkg-"
+"reconfigure\"."
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+msgid "DNS domain name:"
+msgstr "DNS nzev domny:"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+msgid ""
+"The DNS domain name is used to construct the base DN of your LDAP directory. "
+"Entering foo.bar.org will give you the base DN dc=foo, dc=bar, dc=org."
+msgstr ""
+"Nzev domny se pouv pro vytvoen zkladnho DN vaeho LDAP adrese. "
+"Zadnm foo.bar.cz se vytvo zkladn DN dc=foo, dc=bar, dc=cz."
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid "Name of your organization:"
+msgstr "Nzev va organizace:"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid ""
+"Whatever you enter here will be stored as the name of your organization in "
+"the base DN of your LDAP directory."
+msgstr ""
+"Cokoliv zde zadte, se ulo jako nzev va organizace do zkladnho DN ve "
+"vaem LDAP adresi."
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid "Admin password:"
+msgstr "Administrtorsk heslo:"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid " Please enter the password for the admin entry in your LDAP directory."
+msgstr "Zadejte prosm heslo pro administrtora LDAP databze."
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+msgid "Confirm password:"
+msgstr "Potvrzen hesla:"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+msgid ""
+"Please reenter the admin password for your LDAP directory for verification."
+msgstr ""
+"Pro oven zadejte prosm administrtorsk heslo do LDAP adrese jet "
+"jednou."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+msgid "Password mismatch"
+msgstr "Hesla nesouhlas"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+msgid ""
+"The admin password and its confirmation must match. Please note that "
+"differences such as uppercase/lowercase and added whitespace matter."
+msgstr ""
+"Administrtorsk heslo muste zadat dvakrt po sob stejn. Pamatujte, e se "
+"rozliuj mal a velk psmena a tak e zle na netisknutelnch (blch) "
+"znacch."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:85
+msgid "Do you want your database to be removed when slapd is purged?"
+msgstr "Chcete pi odstrann balku slapd smazat i svou databzi?"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:89
+msgid "Encrypted admin password:"
+msgstr "Zaifrovan administrtorsk heslo:"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid "Change configuration to load backend modules?"
+msgstr "Zmnit nastaven pro nahrvn backend?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"Starting with OpenLDAP 2.1 backends are not longer built into the server but "
+"are instead dynamically loaded at startup. This means that the slapd "
+"configuration has to be changed to load the modules for the backends you are "
+"using."
+msgstr ""
+"Od OpenLDAPu verze 2.1 ji nejsou backendy zabudovny v serveru, ale "
+"existuj jako moduly, kter se dynamicky nahrvaj pi startu. To znamen, "
+"e se mus zmnit nastaven slapd tak, aby zavdl moduly backend, kter "
+"pouvte."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"If you choose this option, an attempt to fix the configuration will be made. "
+"If you don't select this, you *must* fix your configuration file yourself or "
+"slapd (and slapcat if you are upgrading from an older version) will fail and "
+"the package will not be installed. For more information,  read /usr/share/"
+"doc/slapd/README.Debian."
+msgstr ""
+"Zvolte-li tuto monost, instalan skript se pokus upravit nastaven sm. "
+"V opanm ppad *muste* upravit konfiguran soubor sami, protoe jinak "
+"slapd (a pi aktualizaci ze star verze i slapcat) sele a balk se "
+"nenainstaluje. Vce informac naleznete v /usr/share/doc/slapd/README.Debian."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid "Allow LDAPv2 protocol?"
+msgstr "Povolit protokol LDAPv2?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid ""
+"The slapd daemon now disables the old LDAPv2 protocol by default. Programs "
+"and users are generally expected to be upgraded to LDAPv3. If you have old "
+"programs which have not been moved to use LDAPv3 and you still need LDAPv2 "
+"support then select this option and 'allow bind_v2' will be added to your "
+"slapd.conf to tell slapd to accept LDAPv2 connections."
+msgstr ""
+"Daemon slapd nyn implicitn zakazuje star protokol LDAPv2, protoe se "
+"pedpokld, e programy i uivatel ji peli na LDAPv3. Mte-li star "
+"programy, kter nezvldaj LDAPv3, povolte tuto monost, co do souboru "
+"slapd.conf pid dek 'allow bind_v2'. Tm daemondu slapd eknete, e m "
+"pijmat tak spojen LDAPv2."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "Fix LDAP directory on upgrade?"
+msgstr "Opravit pi aktualizaci LDAP adres?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid ""
+"The installation scripts of the old OpenLDAP 2.0 packages create a directory "
+"that does not conform to the ldap schema. The new version is more strict "
+"about this and you won't be able to access your directory after the upgrade "
+"without fixing it."
+msgstr ""
+"Instalan skripty starch balk OpenLDAP 2.0 vytvo adres, kter "
+"neodpovd ldap schmatu. Nov verze je v tomto psnj a pokud adres "
+"neopravte, nebudete k nmu moci po aktualizaci pistupovat."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "If you choose this option, an attempt to fix it for you will occur."
+msgstr "Pokud zvolte tuto monost, skript se pokus ve opravit."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid "Move aside current database and create a new one?"
+msgstr "Pesunout starou databzi a vytvoit novou?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid ""
+"You have specified a directory suffix (domain) that doesn't match the one "
+"currently in /etc/ldap/slapd.conf.  Changing the directory suffix requires "
+"moving aside the current LDAP database and creating a new one.  Please "
+"confirm whether you want to abandon the current database (a backup will be "
+"made)."
+msgstr ""
+"Zadali jste pponu adrese (domnu), kter neodpovd t v souboru /etc/"
+"ldap/slapd.conf. Zmna ppony adrese vyaduje odsunut stvajc LDAP "
+"databze a vytvoen nov. Potvrte prosm, zda chcete zruit stvajc "
+"databzi (pro jistotu se vytvo jej zloha)."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid "slapcat failed during upgrade"
+msgstr "slapcat bhem aktualizace selhal"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapcat' which attempts to extract your "
+"LDAP directory.  This failure could be because of an incorrect config file.  "
+"For example, if the appropriate moduleload lines for your backend database "
+"type are missing.  This failure will cause 'slapadd' later to fail too.  The "
+"old database files are about to be moved to /var/backups.  If you want to "
+"try this upgrade again then move the old database files back into place, fix "
+"whatever caused slapcat to fail, and run:\n"
+" slapcat | /usr/share/slapd/fix_ldif -w -o \"$organization\" > $location"
+msgstr ""
+"Pi pokusu o aktualizaci vaeho LDAP adrese se vyskytla chyba. Chyba "
+"nastala pi provdn pkazu 'slapcat', jen se snail zskat obsah vaeho "
+"LDAP adrese. Tuto chybu me zpsobit teba chybn konfiguran soubor. "
+"(Napklad pokud chyb pslun dky 'moduleload' pro backend databze, "
+"kter uchovv obsah LDAP adrese.) Tato chyba pozdji zpsob tak selhn "
+"pkazu 'slapadd'. Star databzov soubory budou pesunuty do /var/backups. "
+"Budete-li chtt pozdji zkusit provst tuto aktualizaci znovu, pesute "
+"star databzov soubory zpt na jejich pvodn msto, spravte pinu toho, "
+"pro slapcat selhal a spuste:\n"
+"  slapcat | /usr/share/slapd/fix_ldif -w -o \"$organization\" > $location"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"Then move the database files back to a backup area and then try running "
+"slapadd from $location."
+msgstr ""
+"Pot pesute databzov soubory zpt mezi zlohy a zkuste spustit slapadd z "
+"$location."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid "slapadd failed during upgrade"
+msgstr "slapadd bhem aktualizace selhal"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapadd' which attempts to populate an "
+"empty new LDAP directory using the information from your original LDAP "
+"directory.  Your original LDAP directory files have been saved in /var/"
+"backups.  The results of the attempted upgrade is the ldif file in /var/"
+"backups.  slapadd may have failed due to a configuration problem (in which "
+"case slapcat would have failed too) or due to a problem in the LDIF file.  "
+"If the problem was with the LDIF file, you may be able to fix it and attempt "
+"the slapadd again."
+msgstr ""
+"Pi pokusu o aktualizaci vaeho LDAP adrese se vyskytla chyba. Chyba "
+"nastala pi provdn pkazu 'slapadd', jen se snail naplnit v nov "
+"LDAP adres daty z pvodnho LDAP adrese. Soubory pvodnho LDAP adrese "
+"jsou uloeny ve /var/backups. Vsledkem pokusu o automatickou aktualizaci je "
+"ldif soubor ve /var/backups. slapadd mohl selhat kvli chyb v konfiguranm "
+"souboru (to by ovem selhal tak pkaz 'slapcat'), nebo kvli chyb v LDIF "
+"souboru. Pokud se jedn o chybu v LDIF souboru, mete jej zkusit opravit a "
+"zkusit slapadd znovu."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid "Slave databases require updateref option"
+msgstr "Podzen databze vyaduj volbu updateref"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"In your slapd configuration file at least one database is configured as "
+"slave, and the updateref option is not set. The updateref option specifies "
+"the referral(s) to pass back when slapd is asked to modify a replicated "
+"local database. See slapd.conf(5) for more details."
+msgstr ""
+"Ve vaem konfiguranm souboru je minimln jedna databze nastavena jako "
+"podzen a pitom nem nastavenu volbu updateref. Volba updateref definuje "
+"poukzky, kter pedv zpt, kdykoliv slapd pod o zmnu v replikovan "
+"lokln databzi. Podrovnosti naleznete v manulov strnce slapd.conf(5)."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"Starting with version 2.1.23, slapd requires the updateref option to be set "
+"on slaves. You should make sure to fix your slapd.conf configuration file."
+msgstr ""
+"Ponaje verz 2.1.23 slapd vyaduje, aby mly podzen databze nastavenu "
+"volbu updateref. Mli byste zajistit npravu svho konfiguranho souboru "
+"slapd.conf co nejdve."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid "Change backend type from LDBM to BDB?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"The LDBM backend type has been deprecated in OpenLDAP 2.2 and has shown to "
+"not work well. BDB is the recommended choice of the OpenLDAP developers."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"When using the BDB backend make sure you configure BDB properly. For "
+"information to do so, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"If you enable this option an attempt will be made to update your  "
+"configuration to use BDB instead of LDBM and convert your databases."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid "Database backend to use:"
+msgstr "Databzov backend:"
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend is the recommended choice of the OpenLDAP developers while "
+"support of the old LDBM backend is phasing out. When using the BDB backend "
+"make sure that you configure the underlying database for your requirements. "
+"Look into /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"HDB is the next generation of BDB which might replace it sometime in  the "
+"future. There are some problems still in the HDB code of the 2.2 series of "
+"OpenLDAP so you should probably stick to BDB until version 2.3."
+msgstr ""
+"HDB je dal generace BDB, kter by jej jednou mohla nahradit. HDB m ve "
+"verzch OpenLDAPu 2.2 stle njak problmy a proto byste mli zstat u BDB "
+"alespo do verze 2.3."
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+#, fuzzy
+msgid ""
+"The BDB backend (back-bdb) and LDBM backend (back-ldbm) are comparable in "
+"purpose and back-bdb evolved from experience gained from back-ldbm, but the "
+"two are quite distinct today. They both store entries based on a 32-bit "
+"entry ID key, and they use a dn2id table to map from DNs to entry IDs. They "
+"both perform attribute indexing using the same code, and store index data as "
+"lists of entry IDs. As such, the LDAP-specific features they offer are "
+"nearly identical. The differences are in the APIs used to implement the "
+"databases. back-ldbm uses a generic database API that can plug into several "
+"different database packages. In Debian, it's built against BerkeleyDB (BDB). "
+"While BerkeleyDB supports this generic interface, it also offers a much "
+"richer API that has a lot more power and a lot more complexity. back-bdb is "
+"written specifically for the full BDB API, and uses some of BDB's more "
+"advanced features to offer transaction processing, fine grained locking, and "
+"other features that offer improved concurrency and reliability. For more "
+"information, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+"Backendy BDB (back-bdb) a LDBM (back-ldbm) maj podobn cl, ovem back-bdb "
+"se vyvjel ze zkuenost zskanch z back-ldbm a dnes je ji svmu "
+"pedchdci ponkud vzdlen. Oba backendy ukldaj zznamy podle 32 bitovho "
+"vstupnho identifikanho kle, a oba pouvaj pro mapovn rozliitelnch "
+"nzv (DN) na identifiktory (ID) tabulku dn2id. Oba tak indexuj atributy "
+"stejnm zpsobem a indexy ukldaj jako seznamy vstupnch ID. To znamen, e "
+"nabz tm shodn vlastnosti LDAPu. Rozdl je v API pouitch pro "
+"implementaci databze. back-ldbm pouv obecn databzov rozhran, kterm "
+"se me pipojit k rznm databzm, v Debianu je sestaven s podporou "
+"BerkleyDB (BDB). Krom obecnho rozhran nabz BerkleyDB tak mnohem "
+"bohat API, kter je mocnj, ale tak komplexnj. back-dbd je napsn "
+"speciln pro podporu plnho BDB rozhran a pouv pokroil vlastnosti "
+"BDB, aby zajistil transakn zpracovn, jemnj zamykn a dal "
+"vymoenosti, je poskutuj zvenou spolehlivost a rychlost. Vce informac "
+"naleznete v http://www.openldap.org/faq/data/cache/756.html."
+
+#~ msgid ""
+#~ "While the BDB backend is the recommended choice of the OpenLDAP "
+#~ "developers, the LDBM backend has proven to be more reliable for some "
+#~ "Debian users, especially when the BDB database wasn't properly "
+#~ "configured. When using the BDB backend, make sure to do so. For "
+#~ "information on how to tune BDB, see http://www.openldap.org/faq/data/"
+#~ "cache/893.html."
+#~ msgstr ""
+#~ "Pestoe je BDB backend doporuovn samotnmi vvoji OpenLDAPu, "
+#~ "nkterm uivatelm Debianu fungoval spolehlivji backend LDBM (obzvlt "
+#~ "v ppadech kdy nebyla BDB nastavena pln sprvn). Pi nastavovn BDB "
+#~ "na to prosm pamatujte. Informace o ladn BDB naleznete na strnce "
+#~ "http://www.openldap.org/faq/data/cache/893.html."
diff -urN openldap-2.3.35/debian/po/de.po openldap-2.3.35_new/debian/po/de.po
--- openldap-2.3.35/debian/po/de.po	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/po/de.po	2007-04-12 17:52:56.000000000 -0300
@@ -0,0 +1,448 @@
+#
+#    Translators, if you are not familiar with the PO format, gettext
+#    documentation is worth reading, especially sections dedicated to
+#    this format, e.g. by running:
+#         info -n '(gettext)PO Files'
+#         info -n '(gettext)Header Entry'
+#
+#    Some information specific to po-debconf are available at
+#            /usr/share/doc/po-debconf/README-trans
+#         or http://www.debian.org/intl/l10n/po-debconf/README-trans
+#
+#    Developers do not need to manually edit POT or PO files.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: PACKAGE VERSION\n"
+"Report-Msgid-Bugs-To: torsten@debian.org\n"
+"POT-Creation-Date: 2007-04-12 17:52-0300\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=ISO-8859-15\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid "Omit OpenLDAP server configuration?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid ""
+"If you enable this option, no initial configuration or database will be "
+"created for you."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid "Dump databases to file on upgrade:"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Before upgrading to a new version of the OpenLDAP server the data of  your "
+"LDAP directories can be dumped to plain text files (LDIF format) which is a "
+"standardized description of that data (LDIF stands for LDAP Data Interchange "
+"Format)."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Selecting \"always\" will make the maintainer scripts dump your databases "
+"before upgrading unconditionally. Selecting \"when needed\" will only dump "
+"the database if the new version is incompatible with the old database format "
+"and it has to be reimported. The \"never\" choice will just go ahead without "
+"ever dumping your database."
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid "Directory to dump databases:"
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid ""
+"Please specify the directory where the LDAP databases will be exported. "
+"Within this directory several LDIF files are created which correspond to the "
+"search bases located on the server. Make sure you have enough free space on "
+"the partition the directory is located.  The first occurrence of the string "
+"\"VERSION\" is replaced with the server version you are upgrading from. The "
+"default is /var/backups/slapd-VERSION"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid "Move old database?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid ""
+"There are still files in /var/lib/ldap which will probably break the "
+"configuration process. If you enable this option, the maintainer scripts "
+"will move the old database files out of the way before creating a new "
+"database."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid "Invalid configuration. Retry configuration?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid ""
+"The configuration you entered is invalid. Make sure that the DNS domain name "
+"has a valid syntax, the organization is not left empty and that the admin "
+"passwords match. If you decide not to retry the configuration the LDAP "
+"server will not be set up. Run \"dpkg-reconfigure\" if you want to retry "
+"later."
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+#, fuzzy
+msgid "DNS domain name:"
+msgstr "Geben Sie den Domainnamen ein"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+msgid ""
+"The DNS domain name is used to construct the base DN of your LDAP directory. "
+"Entering foo.bar.org will give you the base DN dc=foo, dc=bar, dc=org."
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+#, fuzzy
+msgid "Name of your organization:"
+msgstr "Geben Sie den Namen ihrer Organisation ein:"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid ""
+"Whatever you enter here will be stored as the name of your organization in "
+"the base DN of your LDAP directory."
+msgstr ""
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+#, fuzzy
+msgid "Admin password:"
+msgstr "Admin-Passwort:"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid " Please enter the password for the admin entry in your LDAP directory."
+msgstr ""
+"Bitte geben Sie das Passwort fr den Admin-Eintrag ihres LDAP-Verzeichnisses "
+"ein."
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+#, fuzzy
+msgid "Confirm password:"
+msgstr "Admin-Passwort:"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+#, fuzzy
+msgid ""
+"Please reenter the admin password for your LDAP directory for verification."
+msgstr ""
+"Bitte geben Sie das Passwort fr den Admin-Eintrag ihres LDAP-Verzeichnisses "
+"ein."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+#, fuzzy
+msgid "Password mismatch"
+msgstr "Passwrter stimmen nicht berein"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+#, fuzzy
+msgid ""
+"The admin password and its confirmation must match. Please note that "
+"differences such as uppercase/lowercase and added whitespace matter."
+msgstr ""
+"Sie mssen das Admin-Passwort zweimal gleich eingeben. Bitte beachten Sie "
+"dass es einen Unterschied macht, ob sie Grobuchstaben oder Leerzeichen "
+"verwenden."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:85
+msgid "Do you want your database to be removed when slapd is purged?"
+msgstr ""
+
+#. Type: password
+#. Description
+#: ../slapd.templates:89
+#, fuzzy
+msgid "Encrypted admin password:"
+msgstr "verlsselte Admin-Passwort"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid "Change configuration to load backend modules?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"Starting with OpenLDAP 2.1 backends are not longer built into the server but "
+"are instead dynamically loaded at startup. This means that the slapd "
+"configuration has to be changed to load the modules for the backends you are "
+"using."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"If you choose this option, an attempt to fix the configuration will be made. "
+"If you don't select this, you *must* fix your configuration file yourself or "
+"slapd (and slapcat if you are upgrading from an older version) will fail and "
+"the package will not be installed. For more information,  read /usr/share/"
+"doc/slapd/README.Debian."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid "Allow LDAPv2 protocol?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid ""
+"The slapd daemon now disables the old LDAPv2 protocol by default. Programs "
+"and users are generally expected to be upgraded to LDAPv3. If you have old "
+"programs which have not been moved to use LDAPv3 and you still need LDAPv2 "
+"support then select this option and 'allow bind_v2' will be added to your "
+"slapd.conf to tell slapd to accept LDAPv2 connections."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "Fix LDAP directory on upgrade?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid ""
+"The installation scripts of the old OpenLDAP 2.0 packages create a directory "
+"that does not conform to the ldap schema. The new version is more strict "
+"about this and you won't be able to access your directory after the upgrade "
+"without fixing it."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "If you choose this option, an attempt to fix it for you will occur."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid "Move aside current database and create a new one?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid ""
+"You have specified a directory suffix (domain) that doesn't match the one "
+"currently in /etc/ldap/slapd.conf.  Changing the directory suffix requires "
+"moving aside the current LDAP database and creating a new one.  Please "
+"confirm whether you want to abandon the current database (a backup will be "
+"made)."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid "slapcat failed during upgrade"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapcat' which attempts to extract your "
+"LDAP directory.  This failure could be because of an incorrect config file.  "
+"For example, if the appropriate moduleload lines for your backend database "
+"type are missing.  This failure will cause 'slapadd' later to fail too.  The "
+"old database files are about to be moved to /var/backups.  If you want to "
+"try this upgrade again then move the old database files back into place, fix "
+"whatever caused slapcat to fail, and run:\n"
+" slapcat | /usr/share/slapd/fix_ldif -w -o \"$organization\" > $location"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"Then move the database files back to a backup area and then try running "
+"slapadd from $location."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid "slapadd failed during upgrade"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapadd' which attempts to populate an "
+"empty new LDAP directory using the information from your original LDAP "
+"directory.  Your original LDAP directory files have been saved in /var/"
+"backups.  The results of the attempted upgrade is the ldif file in /var/"
+"backups.  slapadd may have failed due to a configuration problem (in which "
+"case slapcat would have failed too) or due to a problem in the LDIF file.  "
+"If the problem was with the LDIF file, you may be able to fix it and attempt "
+"the slapadd again."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid "Slave databases require updateref option"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"In your slapd configuration file at least one database is configured as "
+"slave, and the updateref option is not set. The updateref option specifies "
+"the referral(s) to pass back when slapd is asked to modify a replicated "
+"local database. See slapd.conf(5) for more details."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"Starting with version 2.1.23, slapd requires the updateref option to be set "
+"on slaves. You should make sure to fix your slapd.conf configuration file."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid "Change backend type from LDBM to BDB?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"The LDBM backend type has been deprecated in OpenLDAP 2.2 and has shown to "
+"not work well. BDB is the recommended choice of the OpenLDAP developers."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"When using the BDB backend make sure you configure BDB properly. For "
+"information to do so, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"If you enable this option an attempt will be made to update your  "
+"configuration to use BDB instead of LDBM and convert your databases."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid "Database backend to use:"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend is the recommended choice of the OpenLDAP developers while "
+"support of the old LDBM backend is phasing out. When using the BDB backend "
+"make sure that you configure the underlying database for your requirements. "
+"Look into /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"HDB is the next generation of BDB which might replace it sometime in  the "
+"future. There are some problems still in the HDB code of the 2.2 series of "
+"OpenLDAP so you should probably stick to BDB until version 2.3."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend (back-bdb) and LDBM backend (back-ldbm) are comparable in "
+"purpose and back-bdb evolved from experience gained from back-ldbm, but the "
+"two are quite distinct today. They both store entries based on a 32-bit "
+"entry ID key, and they use a dn2id table to map from DNs to entry IDs. They "
+"both perform attribute indexing using the same code, and store index data as "
+"lists of entry IDs. As such, the LDAP-specific features they offer are "
+"nearly identical. The differences are in the APIs used to implement the "
+"databases. back-ldbm uses a generic database API that can plug into several "
+"different database packages. In Debian, it's built against BerkeleyDB (BDB). "
+"While BerkeleyDB supports this generic interface, it also offers a much "
+"richer API that has a lot more power and a lot more complexity. back-bdb is "
+"written specifically for the full BDB API, and uses some of BDB's more "
+"advanced features to offer transaction processing, fine grained locking, and "
+"other features that offer improved concurrency and reliability. For more "
+"information, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#, fuzzy
+#~ msgid "Verify password"
+#~ msgstr "Passwort wiederholen:"
diff -urN openldap-2.3.35/debian/po/fr.po openldap-2.3.35_new/debian/po/fr.po
--- openldap-2.3.35/debian/po/fr.po	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/po/fr.po	2007-04-12 17:52:56.000000000 -0300
@@ -0,0 +1,780 @@
+# translation of fr-new.po to French
+# translation of fr.po to French
+#
+#    Translators, if you are not familiar with the PO format, gettext
+#    documentation is worth reading, especially sections dedicated to
+#    this format, e.g. by running:
+#         info -n '(gettext)PO Files'
+#         info -n '(gettext)Header Entry'
+#
+#    Some information specific to po-debconf are available at
+#            /usr/share/doc/po-debconf/README-trans
+#         or http://www.debian.org/intl/l10n/po-debconf/README-trans
+#
+#    Developers do not need to manually edit POT or PO files.
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: openldap2\n"
+"Report-Msgid-Bugs-To: torsten@debian.org\n"
+"POT-Creation-Date: 2007-04-12 17:52-0300\n"
+"PO-Revision-Date: 2005-06-12 09:02+0200\n"
+"Last-Translator: Christian Perrier <bubulle@debian.org>\n"
+"Language-Team: French <debian-l10n-french@lists.debian.org>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=ISO-8859-15\n"
+"Content-Transfer-Encoding: 8bit\n"
+"X-Generator: KBabel 1.9.1\n"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid "Omit OpenLDAP server configuration?"
+msgstr "Voulez-vous omettre la configuration d'OpenLDAP?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid ""
+"If you enable this option, no initial configuration or database will be "
+"created for you."
+msgstr ""
+"Si vous choisissez cette option, aucune configuration par dfaut et aucune "
+"base de donnes ne seront cres."
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid "Dump databases to file on upgrade:"
+msgstr ""
+"Sauvegarde des bases de donnes dans un fichier pour la mise  niveau:"
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Before upgrading to a new version of the OpenLDAP server the data of  your "
+"LDAP directories can be dumped to plain text files (LDIF format) which is a "
+"standardized description of that data (LDIF stands for LDAP Data Interchange "
+"Format)."
+msgstr ""
+"Avant la mise  niveau du serveur OpenLDAP, les donnes de votre annuaire "
+"LDAP peuvent tre exportes dans des fichiers au format texte LDIF qui est "
+"une description normalise de ce type d'informations (LDAP Data "
+"Interchange Format: format d'change de donnes LDAP)."
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Selecting \"always\" will make the maintainer scripts dump your databases "
+"before upgrading unconditionally. Selecting \"when needed\" will only dump "
+"the database if the new version is incompatible with the old database format "
+"and it has to be reimported. The \"never\" choice will just go ahead without "
+"ever dumping your database."
+msgstr ""
+"Si vous choisissez l'option Toujours, les scripts de configuration "
+"exporteront systmatiquement les donnes avant d'effectuer une mise  "
+"niveau. Si vous choisissez Lorsque ncessaire, les donnes ne seront "
+"exportes que lorsque la nouvelle version utilisera un format incompatible "
+"avec l'ancienne, ce qui imposera de rimporter les donnes. Le choix "
+"Jamais indique que les donnes ne seront jamais exportes."
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid "Directory to dump databases:"
+msgstr "Rpertoire o exporter les bases de donnes:"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid ""
+"Please specify the directory where the LDAP databases will be exported. "
+"Within this directory several LDIF files are created which correspond to the "
+"search bases located on the server. Make sure you have enough free space on "
+"the partition the directory is located.  The first occurrence of the string "
+"\"VERSION\" is replaced with the server version you are upgrading from. The "
+"default is /var/backups/slapd-VERSION"
+msgstr ""
+"Veuillez indiquer le rpertoire o les bases de donnes LDAP seront "
+"exportes. Plusieurs fichiers LDIF seront crs dans ce rpertoire. Ils "
+"correspondent aux bases de recherche prsentes sur le serveur. Veuillez "
+"vrifier que la partition o se trouve ce rpertoire comporte suffisamment "
+"de place disponible. La premire occurrence de VERSION dans le nom de ce "
+"rpertoire sera remplace par la version d'OpenLDAP utilise avant la mise  "
+"niveau. La valeur par dfaut est /var/backups/slapd-VERSION."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid "Move old database?"
+msgstr "Faut-il dplacer l'ancienne base de donnes?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid ""
+"There are still files in /var/lib/ldap which will probably break the "
+"configuration process. If you enable this option, the maintainer scripts "
+"will move the old database files out of the way before creating a new "
+"database."
+msgstr ""
+"Des fichiers prsents dans /var/lib/ldap vont probablement provoquer l'chec "
+"de la procdure de configuration. Si vous choisissez cette option, les "
+"scripts de configuration dplaceront les anciens fichiers des bases de "
+"donnes avant de crer une nouvelle base de donnes."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid "Invalid configuration. Retry configuration?"
+msgstr "Faut-il recommencer la configuration?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid ""
+"The configuration you entered is invalid. Make sure that the DNS domain name "
+"has a valid syntax, the organization is not left empty and that the admin "
+"passwords match. If you decide not to retry the configuration the LDAP "
+"server will not be set up. Run \"dpkg-reconfigure\" if you want to retry "
+"later."
+msgstr ""
+"La configuration que vous avez indique n'est pas valable. Veuillez vrifier "
+"que le nom de domaine DNS utilise une syntaxe correcte, que le champ "
+"organization n'est pas vide et que les mots de passe des administrateurs "
+"correspondent. Si vous choisissez de ne pas recommencer la configuration, le "
+"serveur LDAP ne sera pas configur. Si vous voulez recommencer ce processus, "
+"utilisez la commande dpkg-reconfigure."
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+msgid "DNS domain name:"
+msgstr "Nom de domaine:"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+msgid ""
+"The DNS domain name is used to construct the base DN of your LDAP directory. "
+"Entering foo.bar.org will give you the base DN dc=foo, dc=bar, dc=org."
+msgstr ""
+"Le nom de domaine DNS est utilis pour tablir le nom distinctif de base "
+"(base DN ou Distinguished Name) de votre annuaire LDAP. Par exemple, "
+"si vous indiquez toto.titi.org ici, le nom distinctif de base sera "
+"dc=toto, dc=titi, dc=org."
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid "Name of your organization:"
+msgstr "Nom de votre organisation:"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid ""
+"Whatever you enter here will be stored as the name of your organization in "
+"the base DN of your LDAP directory."
+msgstr ""
+"Veuillez indiquer la valeur que sera utilise comme nom de votre entit "
+"(organization) dans le nom distinctif de base de votre annuaire LDAP."
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid "Admin password:"
+msgstr "Mot de passe de l'administrateur:"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid " Please enter the password for the admin entry in your LDAP directory."
+msgstr ""
+"Veuillez indiquer le mot de passe de l'administrateur de l'annuaire LDAP."
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+msgid "Confirm password:"
+msgstr "Mot de passe de l'administrateur:"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+msgid ""
+"Please reenter the admin password for your LDAP directory for verification."
+msgstr ""
+"Veuillez confirmer le mot de passe de l'administrateur de l'annuaire LDAP."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+msgid "Password mismatch"
+msgstr "Erreur de saisie du mot de passe"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+msgid ""
+"The admin password and its confirmation must match. Please note that "
+"differences such as uppercase/lowercase and added whitespace matter."
+msgstr ""
+"Le mot de passe et sa confirmation ne correspondent pas. Veuillez noter que "
+"les diffrences de casse (majuscule/minuscule) et les espaces importent."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:85
+msgid "Do you want your database to be removed when slapd is purged?"
+msgstr "Faut-il supprimer la base de donnes  la purge du paquet?"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:89
+msgid "Encrypted admin password:"
+msgstr "Mot de passe chiffr de l'administrateur:"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid "Change configuration to load backend modules?"
+msgstr ""
+"Faut-il modifier la configuration pour charger les modules de bases de "
+"donnes?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"Starting with OpenLDAP 2.1 backends are not longer built into the server but "
+"are instead dynamically loaded at startup. This means that the slapd "
+"configuration has to be changed to load the modules for the backends you are "
+"using."
+msgstr ""
+"Depuis OpenLDAP 2.1, les modules de bases de donnes (backend modules) "
+"ne font plus partie intgrante du serveur mais chargs dynamiquement au "
+"dmarrage. En consquence, la configuration de slapd doit tre modifie pour "
+"charger les modules que vous souhaitez utiliser."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"If you choose this option, an attempt to fix the configuration will be made. "
+"If you don't select this, you *must* fix your configuration file yourself or "
+"slapd (and slapcat if you are upgrading from an older version) will fail and "
+"the package will not be installed. For more information,  read /usr/share/"
+"doc/slapd/README.Debian."
+msgstr ""
+"Si vous choisissez cette option, une tentative d'adaptation de la "
+"configuration aura lieu. Dans le cas contraire, vous devrez corriger le "
+"fichier de configuration vous-mme sinon slapd et slapcat (ce dernier, dans "
+"le cas d'une mise  niveau depuis une nouvelle version) ne fonctionneront "
+"pas et le paquet ne sera pas install. Veuillez consulter le fichier /usr/"
+"share/doc/slapd/README.Debian pour plus d'informations."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid "Allow LDAPv2 protocol?"
+msgstr "Faut-il autoriser le protocole LDAPv2?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid ""
+"The slapd daemon now disables the old LDAPv2 protocol by default. Programs "
+"and users are generally expected to be upgraded to LDAPv3. If you have old "
+"programs which have not been moved to use LDAPv3 and you still need LDAPv2 "
+"support then select this option and 'allow bind_v2' will be added to your "
+"slapd.conf to tell slapd to accept LDAPv2 connections."
+msgstr ""
+"Dsormais slapd n'utilise plus par dfaut l'ancien protocole LDAPv2. Il est "
+"conseill de passer  la version LDAPv3 les programmes et les utilisateurs. "
+"Si vous utilisez d'anciens programmes qui ne grent pas encore LDAPv3, vous "
+"pouvez choisir cette option. Cela ajoutera l'option allow bind_v2 au "
+"fichier slapd.conf pour indiquer au dmon slapd qu'il doit accepter les "
+"connexions LDAPv2."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "Fix LDAP directory on upgrade?"
+msgstr "Faut-il corriger l'annuaire LDAP lors de la mise  niveau?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid ""
+"The installation scripts of the old OpenLDAP 2.0 packages create a directory "
+"that does not conform to the ldap schema. The new version is more strict "
+"about this and you won't be able to access your directory after the upgrade "
+"without fixing it."
+msgstr ""
+"Les scripts d'installation des anciens paquet d'OpenLDAP 2.0 craient un "
+"annuaire qui n'tait pas conforme avec le schma LDAP. La nouvelle version "
+"est plus stricte et l'annuaire ne pourra pas tre utilis tant qu'il n'aura "
+"pas t corrig."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "If you choose this option, an attempt to fix it for you will occur."
+msgstr ""
+"Si vous choisissez cette option, une tentative de correction automatique "
+"sera effectue."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid "Move aside current database and create a new one?"
+msgstr "Faut-il dplacer l'ancienne base de donnes et en crer une nouvelle?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid ""
+"You have specified a directory suffix (domain) that doesn't match the one "
+"currently in /etc/ldap/slapd.conf.  Changing the directory suffix requires "
+"moving aside the current LDAP database and creating a new one.  Please "
+"confirm whether you want to abandon the current database (a backup will be "
+"made)."
+msgstr ""
+"Vous avez indiqu un suffixe d'annuaire (domaine) qui ne correspond pas  "
+"celui qui est actuellement mentionn dans /etc/ldap/slapd.conf. Le "
+"changement du suffixe d'annuaire ncessite de dplacer la base de donnes "
+"actuelle et d'en crer une nouvelle. Veuillez confirmer si vous voulez "
+"abandonner la base de donnes actuelle (une sauvegarde sera effectue)."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid "slapcat failed during upgrade"
+msgstr "chec de slapcat durant la mise  niveau"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapcat' which attempts to extract your "
+"LDAP directory.  This failure could be because of an incorrect config file.  "
+"For example, if the appropriate moduleload lines for your backend database "
+"type are missing.  This failure will cause 'slapadd' later to fail too.  The "
+"old database files are about to be moved to /var/backups.  If you want to "
+"try this upgrade again then move the old database files back into place, fix "
+"whatever caused slapcat to fail, and run:\n"
+" slapcat | /usr/share/slapd/fix_ldif -w -o \"$organization\" > $location"
+msgstr ""
+"Une erreur s'est produite lors de la mise  niveau de l'annuaire LDAP. La "
+"commande slapcat utilise pour l'extraction de l'annuaire LDAP a chou. "
+"Cet chec peut tre d  un fichier de configuration incorrect, par exemple "
+"si les instructions de chargement de modules de bases de donnes manquent. "
+"Cette erreur peut provoquer l'chec de slapadd. Les anciens fichiers de "
+"bases de donnes vont tre dplacs dans /var/backups. Si vous souhaitez "
+"recommencer la mise  niveau, vous devrez remettre les anciens fichiers en "
+"place, corriger ce qui a provoqu l'chec, puis utiliser la commande "
+"slapcat | /usr/share/slapd/fix_ldif -w -o \"$organization\" > $location."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"Then move the database files back to a backup area and then try running "
+"slapadd from $location."
+msgstr ""
+"Dplacez ensuite les bases de donnes vers un emplacement de sauvegarde et "
+"tentez d'utiliser la commande slapadd depuis $location."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid "slapadd failed during upgrade"
+msgstr "chec de slapadd durant la mise  niveau"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapadd' which attempts to populate an "
+"empty new LDAP directory using the information from your original LDAP "
+"directory.  Your original LDAP directory files have been saved in /var/"
+"backups.  The results of the attempted upgrade is the ldif file in /var/"
+"backups.  slapadd may have failed due to a configuration problem (in which "
+"case slapcat would have failed too) or due to a problem in the LDIF file.  "
+"If the problem was with the LDIF file, you may be able to fix it and attempt "
+"the slapadd again."
+msgstr ""
+"Une erreur s'est produite lors de la mise  niveau de l'annuaire LDAP. La "
+"commande slapadd utilise pour dplacer les donnes de l'ancien annuaire "
+"dans le nouveau a chou. Les anciens fichiers des bases de donnes vont "
+"tre dplacs dans /var/backups. Les rsultats de la tentative de mise  "
+"niveau sont dans le fichier LDIF situ dans /var/backups. L'chec de slapadd "
+"peut tre d  un problme de configuration (qui a probablement galement "
+"provoqu l'chec de slapcat) ou  un problme dans le fichier LDIF. Dans ce "
+"dernier cas, il est possible de corriger ce fichier et tenter l'opration  "
+"nouveau."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid "Slave databases require updateref option"
+msgstr "Les bases de donnes esclaves ont besoin de l'option updateref"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"In your slapd configuration file at least one database is configured as "
+"slave, and the updateref option is not set. The updateref option specifies "
+"the referral(s) to pass back when slapd is asked to modify a replicated "
+"local database. See slapd.conf(5) for more details."
+msgstr ""
+"Votre fichier de configuration de slapd indique qu'au moins une base de "
+"donnes est une base de donnes esclave. Cependant, l'option updateref "
+"n'a pas t spcifie. Elle indique  quel rfrent d'ventuelles "
+"modifications locales effectues par slapd doivent tre transmises. Veuillez "
+"consulter la page de manuel slapd.conf(5) pour plus d'informations."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"Starting with version 2.1.23, slapd requires the updateref option to be set "
+"on slaves. You should make sure to fix your slapd.conf configuration file."
+msgstr ""
+" partir de la version 2.1.23, splad a besoin de cette option sur les "
+"serveurs esclaves. Veuillez faire le ncessaire pour corriger votre fichier "
+"de configuration."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid "Change backend type from LDBM to BDB?"
+msgstr "Faut-il remplacer LDBM par BDB comme module de base de donnes?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"The LDBM backend type has been deprecated in OpenLDAP 2.2 and has shown to "
+"not work well. BDB is the recommended choice of the OpenLDAP developers."
+msgstr ""
+"Le module de base de donnes LDBM est considr comme obsolte dans OpenLDAP "
+"2.2. Il a t confirm qu'il ne fonctionne pas toujours correctement. Pour "
+"cette raison, BDB est le module recommand par les dveloppeurs d'OpenLDAP."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"When using the BDB backend make sure you configure BDB properly. For "
+"information to do so, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+"Si vous utilisez le module BDB, veillez  ce qu'il soit configur "
+"correctement. Pour plus d'informations, veuillez consulter le fichier /usr/"
+"share/doc/slapd/README.DB_CONFIG.gz."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"If you enable this option an attempt will be made to update your  "
+"configuration to use BDB instead of LDBM and convert your databases."
+msgstr ""
+"Si vous choisissez cette option, les scripts d'installation mettront  jour "
+"votre configuration et convertiront vos bases de donnes pour qu'elles "
+"utilisent BDB  la place de LDBM."
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid "Database backend to use:"
+msgstr "Module de base de donnes  utiliser:"
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend is the recommended choice of the OpenLDAP developers while "
+"support of the old LDBM backend is phasing out. When using the BDB backend "
+"make sure that you configure the underlying database for your requirements. "
+"Look into /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+"Le module de bases de donnes BDB est le module recommand par les "
+"dveloppeurs d'OpenLDAP alors que la gestion des bases LDBM est en voie "
+"d'abandon. Lorsque vous utilisez le module BDB, veuillez prendre soin de la "
+"configuration de la base de donnes. Pour plus d'informations, veuillez "
+"consulter le fichier /usr/share/doc/slapd/README.DB_CONFIG.gz."
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"HDB is the next generation of BDB which might replace it sometime in  the "
+"future. There are some problems still in the HDB code of the 2.2 series of "
+"OpenLDAP so you should probably stick to BDB until version 2.3."
+msgstr ""
+"HDB est la version qui est amene  remplacer BDB dans le futur. Des "
+"problmes peuvent subsister dans le code HDB des versions 2.2 d'OpenLDAP et "
+"vous devriez donc conserver BDB en attendant les versions 2.3."
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend (back-bdb) and LDBM backend (back-ldbm) are comparable in "
+"purpose and back-bdb evolved from experience gained from back-ldbm, but the "
+"two are quite distinct today. They both store entries based on a 32-bit "
+"entry ID key, and they use a dn2id table to map from DNs to entry IDs. They "
+"both perform attribute indexing using the same code, and store index data as "
+"lists of entry IDs. As such, the LDAP-specific features they offer are "
+"nearly identical. The differences are in the APIs used to implement the "
+"databases. back-ldbm uses a generic database API that can plug into several "
+"different database packages. In Debian, it's built against BerkeleyDB (BDB). "
+"While BerkeleyDB supports this generic interface, it also offers a much "
+"richer API that has a lot more power and a lot more complexity. back-bdb is "
+"written specifically for the full BDB API, and uses some of BDB's more "
+"advanced features to offer transaction processing, fine grained locking, and "
+"other features that offer improved concurrency and reliability. For more "
+"information, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+"Les modules BDB (back-bdb) et LDBM (back-ldbm) ont des buts analogues. Back-"
+"bdb a t dvelopp en profitant de l'exprience acquise avec back-ldbm mais "
+"les deux sont dsormais distincts. Tous deux stockent les enregistrements "
+"avec une cl unique d'identification (ID key) sur 32bits en utilisant "
+"dn2id pour tablir les correspondances entre noms distinctifs (DN) et cls "
+"uniques d'identification. Tous deux effectuent l'indexation des attributs "
+"avec le mme code et conservent les donnes d'indexation sous forme de "
+"listes de cls d'identification. En consquence, leurs fonctionnalits pour "
+"LDAP sont presque identiques. Les diffrences rsident dans les interfaces "
+"de programmation d'applications (API: Application Programming "
+"Interfaces) utilises pour la mise en oeuvre des bases de donnes. Back-"
+"ldbm utilise une API gnrique qui peut ensuite tre interface avec "
+"plusieurs types de serveurs de bases de donnes. La version Debian est "
+"construite avec BerkeleyDB (BDB). Or, BerkeleyDB, bien qu'il gre cette "
+"interface gnrique, comporte une API bien plus riche et complexe. Back-bdb "
+"est construit pour exploiter pleinement cette API et utilise certaines "
+"fonctionnalits avances de BDB pour le traitement des transactions, un "
+"verrouillage plus fin et d'autres fonctionnalits qui amliorent le "
+"fonctionnement en parallle et la fiabilit. Pour plus d'informations, "
+"veuillez consulter le fichier /usr/share/doc/slapd/README.DB_CONFIG.gz."
+
+#~ msgid "Do you want to omit the configuration of slapd?"
+#~ msgstr "Voulez-vous omettre la configuration de slapd?"
+
+#~ msgid "Admin entry"
+#~ msgstr "Entre d'administration:"
+
+#~ msgid ""
+#~ "The admin entry is the entry in the directory which has full read and "
+#~ "write access."
+#~ msgstr ""
+#~ "Veuillez indiquer l'identifiant de l'administrateur qui possde les "
+#~ "droits de lire et d'crire dans le rpertoire."
+
+#~ msgid "Verify password"
+#~ msgstr "Confirmation du mot de passe:"
+
+#~ msgid "Fix LDAP directory on upgrade"
+#~ msgstr "Faut-il corriger l'annuaire LDAP lors de la mise  niveau?"
+
+#~ msgid ""
+#~ "The installation scripts of the old OpenLDAP 2.0 packages create a "
+#~ "directory that does not conform to the ldap schema. The new version is "
+#~ "more strict about this and you won't be able to access your directory "
+#~ "after the upgrade without fixing it. If you select this option I'll try "
+#~ "to fix it for you automagically."
+#~ msgstr ""
+#~ "Les scripts d'installation des anciens paquet d'OpenLDAP 2.0 craient un "
+#~ "annuaire qui n'tait pas conforme avec le schma LDAP. La nouvelle "
+#~ "version est plus stricte et l'annuaire ne pourra pas tre utilis tant "
+#~ "qu'il n'aura pas t corrig. Si vous choisissez cette option, une "
+#~ "tentative de correction automagique sera effectue."
+
+#~ msgid ""
+#~ "You can specify into which directory the LDAP databases are to be  "
+#~ "exported. The string VERSION is replaced with the server version you  are "
+#~ "upgrading from."
+#~ msgstr ""
+#~ "Veuillez indiquer le rpertoire dans lequel les bases de donnes LDAP "
+#~ "seront exportes. Si le nom comporte VERSION, cette chane de "
+#~ "caractre sera remplace par la version du serveur utilise avant la mise "
+#~ " niveau."
+
+#~ msgid "domain or host, location, custom"
+#~ msgstr "hte ou domaine, emplacement, personnalis"
+
+#~ msgid "Directory suffix style:"
+#~ msgstr "Suffixe du rpertoire:"
+
+#~ msgid ""
+#~ "The LDAP directory suffix is the root of your LDAP database. You can "
+#~ "select one of three possible suffix styles:"
+#~ msgstr ""
+#~ "Le suffixe du rpertoire LDAP est la racine de votre base LDAP. Trois "
+#~ "choix sont possibles."
+
+#~ msgid ""
+#~ "Domain or host style uses the fully qualified hostname of your machine as "
+#~ "the basis."
+#~ msgstr ""
+#~ "hte ou domaine se sert du nom d'hte compltement qualifi de votre "
+#~ "machine comme base."
+
+#~ msgid "Location uses country and organization name."
+#~ msgstr ""
+#~ "emplacement se sert des noms de votre pays et de votre organisation."
+
+#~ msgid ""
+#~ "Custom allows you to speficy your own root root using whatever suffix you "
+#~ "want."
+#~ msgstr ""
+#~ "personnalis vous permet d'indiquer une racine personnalise en "
+#~ "utilisant un suffixe quelconque."
+
+#~ msgid "Enter your suffix:"
+#~ msgstr "Saisissez votre suffixe."
+
+#~ msgid ""
+#~ "Please enter the desired directory suffix for your directory using "
+#~ "standard LDAP DN syntax."
+#~ msgstr ""
+#~ "Veuillez donner le suffixe pour le rpertoire en utilisant la syntaxe "
+#~ "standard du DN (distinguished name) de LDAP."
+
+#~ msgid "Enter your country's two digit code:"
+#~ msgstr "Saisissez le code  deux lettres de votre pays:"
+
+#~ msgid "Path to ldif file:"
+#~ msgstr "Chemin du fichier ldif:"
+
+#~ msgid ""
+#~ "You need to give the full path of the file containing the ldif formatted "
+#~ "entries to be entered into the database."
+#~ msgstr ""
+#~ "Vous devez donner le chemin entier du fichier contenant les entres ldif "
+#~ "formates qui doivent tre mises dans la base de donnes."
+
+#~ msgid "${ldif} does not exist"
+#~ msgstr "${ldif} n'existe pas."
+
+#~ msgid ""
+#~ "Please supply an exiting file in ldif format is needed to initialize the "
+#~ "directory."
+#~ msgstr ""
+#~ "Veuillez donner un fichier existant au format ldif; c'est ncessaire "
+#~ "pour initialiser le rpertoire."
+
+#~ msgid "slapd is already configured"
+#~ msgstr "slapd est dj configur."
+
+#~ msgid ""
+#~ "You can use this configure system only once for the slapd daemon. Please "
+#~ "either manually change the configuration in ${conf} or remove both it and "
+#~ "your databases and rerun this configuration."
+#~ msgstr ""
+#~ "Vous ne pouvez utiliser qu'une seule fois ce systme de configuration "
+#~ "pour le dmon slapd. Vous pouvez soit modifier manuellement la "
+#~ "configuration dans ${conf}, soit supprimer le dmon et les bases de "
+#~ "donnes et refaire cette configuration."
+
+#~ msgid "Unknown object class used"
+#~ msgstr "Classe d'objet inconnue."
+
+#~ msgid ""
+#~ "The root DN for your directory uses an unknown object class so the "
+#~ "directory can not be initialized. Valid object classes are:"
+#~ msgstr ""
+#~ "Le DN root de votre rpertoire utilise une classe d'objet inconnue et le "
+#~ "rpertoire n'a pas pu tre initialis. Les classes valides sont:"
+
+#~ msgid ""
+#~ " dcObject (dc)\n"
+#~ " organizationalUnit (ou)\n"
+#~ " country (c)\n"
+#~ " organization (o)"
+#~ msgstr ""
+#~ " dcObject (dc)\n"
+#~ " organizationalUnit (ou)\n"
+#~ " country (c)\n"
+#~ " organization (o)"
+
+#~ msgid "auto, ldif"
+#~ msgstr "auto, ldif"
+
+#~ msgid "Directory initialization method:"
+#~ msgstr "Mthode d'initialisation du rpertoire:"
+
+#~ msgid ""
+#~ "The LDAP directory can be initialized either via an existing LDIF "
+#~ "datafile, or automatically using information you supply."
+#~ msgstr ""
+#~ "Le rpertoire LDAP peut tre initialis soit grce  un fichier de "
+#~ "donnes LDIF existant, soit automatiquement avec les informations que "
+#~ "vous donnez."
+
+#~ msgid "Directory DN"
+#~ msgstr "DN du rpertoire"
+
+#~ msgid "LDAP admin password"
+#~ msgstr "Mot de passe de l'administrateur LDAP"
+
+#~ msgid ""
+#~ "The slapd package generated a random password to the admin entry in your "
+#~ "new LDAP directory. The password is: ${password}."
+#~ msgstr ""
+#~ "Le paquet slapd a cr un mot de passe pour l'entre d'administration de "
+#~ "votre nouveau rpertoire LDAP. Le mot de passe est: ${password}."
+
+#~ msgid "Replicate to another LDAP server:"
+#~ msgstr "Reproduire cette configuration pour un autre serveur LDAP:"
+
+#~ msgid ""
+#~ "It is possible to replicate changes made in this LDAP server to another "
+#~ "server."
+#~ msgstr ""
+#~ "On peut reproduire la configuration de ce serveur sur un autre serveur."
+
+#~ msgid "LDAP server:"
+#~ msgstr "Serveur LDAP:"
+
+#~ msgid ""
+#~ "The fully qualified hostname of the remote LDAP server to replicate data "
+#~ "to."
+#~ msgstr ""
+#~ "Le nom de domaine pleinement qualifi du serveur LDAP sur lequel "
+#~ "appliquer la configuration."
+
+#~ msgid "389"
+#~ msgstr "389"
+
+#~ msgid "Port on remote server:"
+#~ msgstr "Port du serveur distant:"
+
+#~ msgid ""
+#~ "The port on which the LDAP server runs on the remote server. This is "
+#~ "almost always the default LDAP port (389)."
+#~ msgstr ""
+#~ "Le port utilis par le serveur LDAP sur la machine distante. C'est "
+#~ "presque toujours le port LDAP par dfaut: 389."
+
+#~ msgid "bind DN:"
+#~ msgstr "DN pour se lier:"
+
+#~ msgid ""
+#~ "This is the DN used to bind to the remote LDAP server. It needs to have "
+#~ "full write access to the data being replicated."
+#~ msgstr ""
+#~ "C'est le DN utilis pour se lier au serveur LDAP distant. Il doit pouvoir "
+#~ "modifier les donnes  reproduire."
+
+#~ msgid "Password:"
+#~ msgstr "Mot de passe:"
+
+#~ msgid "This the password used to bind to the remote LDAP server."
+#~ msgstr "Ce mot de passe est utilis pour se lier au serveur LDAP distant."
diff -urN openldap-2.3.35/debian/po/ja.po openldap-2.3.35_new/debian/po/ja.po
--- openldap-2.3.35/debian/po/ja.po	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/po/ja.po	2007-04-12 17:52:56.000000000 -0300
@@ -0,0 +1,532 @@
+#
+#    Translators, if you are not familiar with the PO format, gettext
+#    documentation is worth reading, especially sections dedicated to
+#    this format, e.g. by running:
+#         info -n '(gettext)PO Files'
+#         info -n '(gettext)Header Entry'
+#
+#    Some information specific to po-debconf are available at
+#            /usr/share/doc/po-debconf/README-trans
+#         or http://www.debian.org/intl/l10n/po-debconf/README-trans
+#
+#    Developers do not need to manually edit POT or PO files.
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: openldap2.2\n"
+"Report-Msgid-Bugs-To: torsten@debian.org\n"
+"POT-Creation-Date: 2007-04-12 17:52-0300\n"
+"PO-Revision-Date: 2005-04-25 12:37+0900\n"
+"Last-Translator: Kenshi Muto <kmuto@debian.org>\n"
+"Language-Team: Japanese <debian-japanese@lists.debian.org>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=EUC-JP\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid "Omit OpenLDAP server configuration?"
+msgstr "OpenLDAP ?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid ""
+"If you enable this option, no initial configuration or database will be "
+"created for you."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid "Dump databases to file on upgrade:"
+msgstr ":"
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Before upgrading to a new version of the OpenLDAP server the data of  your "
+"LDAP directories can be dumped to plain text files (LDIF format) which is a "
+"standardized description of that data (LDIF stands for LDAP Data Interchange "
+"Format)."
+msgstr ""
+"OpenLDAP LDAP "
+" (LDIF ) "
+" (LDIF  LDAP )"
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Selecting \"always\" will make the maintainer scripts dump your databases "
+"before upgrading unconditionally. Selecting \"when needed\" will only dump "
+"the database if the new version is incompatible with the old database format "
+"and it has to be reimported. The \"never\" choice will just go ahead without "
+"ever dumping your database."
+msgstr ""
+"always"
+"when needed"
+""
+"never"
+""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid "Directory to dump databases:"
+msgstr ":"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid ""
+"Please specify the directory where the LDAP databases will be exported. "
+"Within this directory several LDIF files are created which correspond to the "
+"search bases located on the server. Make sure you have enough free space on "
+"the partition the directory is located.  The first occurrence of the string "
+"\"VERSION\" is replaced with the server version you are upgrading from. The "
+"default is /var/backups/slapd-VERSION"
+msgstr ""
+"LDAP "
+" LDIF "
+""
+" \"VERSION\" "
+" /var/backups/slapd-VERSION "
+""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid "Move old database?"
+msgstr "?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid ""
+"There are still files in /var/lib/ldap which will probably break the "
+"configuration process. If you enable this option, the maintainer scripts "
+"will move the old database files out of the way before creating a new "
+"database."
+msgstr ""
+"/var/lib/ldap "
+""
+""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid "Invalid configuration. Retry configuration?"
+msgstr "?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid ""
+"The configuration you entered is invalid. Make sure that the DNS domain name "
+"has a valid syntax, the organization is not left empty and that the admin "
+"passwords match. If you decide not to retry the configuration the LDAP "
+"server will not be set up. Run \"dpkg-reconfigure\" if you want to retry "
+"later."
+msgstr ""
+"DNS "
+""
+"LDAP "
+"\"dpkg-reconfigure\" "
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+msgid "DNS domain name:"
+msgstr "DNS :"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+msgid ""
+"The DNS domain name is used to construct the base DN of your LDAP directory. "
+"Entering foo.bar.org will give you the base DN dc=foo, dc=bar, dc=org."
+msgstr ""
+"DNS  LDAP  DN "
+"foo.bar.org  DN dc=foo, dc=bar, dc=org "
+""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid "Name of your organization:"
+msgstr ":"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid ""
+"Whatever you enter here will be stored as the name of your organization in "
+"the base DN of your LDAP directory."
+msgstr ""
+"LDAP  DN "
+""
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid "Admin password:"
+msgstr "admin :"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid " Please enter the password for the admin entry in your LDAP directory."
+msgstr ""
+" LDAP  admin "
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+msgid "Confirm password:"
+msgstr ":"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+msgid ""
+"Please reenter the admin password for your LDAP directory for verification."
+msgstr ""
+" LDAP  admin "
+""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+msgid "Password mismatch"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+msgid ""
+"The admin password and its confirmation must match. Please note that "
+"differences such as uppercase/lowercase and added whitespace matter."
+msgstr ""
+"admin /"
+""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:85
+msgid "Do you want your database to be removed when slapd is purged?"
+msgstr "slapd ?"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:89
+msgid "Encrypted admin password:"
+msgstr " admin :"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid "Change configuration to load backend modules?"
+msgstr "?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"Starting with OpenLDAP 2.1 backends are not longer built into the server but "
+"are instead dynamically loaded at startup. This means that the slapd "
+"configuration has to be changed to load the modules for the backends you are "
+"using."
+msgstr ""
+"OpenLDAP 2.1 "
+""
+" slapd "
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"If you choose this option, an attempt to fix the configuration will be made. "
+"If you don't select this, you *must* fix your configuration file yourself or "
+"slapd (and slapcat if you are upgrading from an older version) will fail and "
+"the package will not be installed. For more information,  read /usr/share/"
+"doc/slapd/README.Debian."
+msgstr ""
+""
+"slapd  ("
+" slapcat ) "
+" /usr/share/doc/slapd/README.Debian "
+""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid "Allow LDAPv2 protocol?"
+msgstr "LDAPv2 ?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid ""
+"The slapd daemon now disables the old LDAPv2 protocol by default. Programs "
+"and users are generally expected to be upgraded to LDAPv3. If you have old "
+"programs which have not been moved to use LDAPv3 and you still need LDAPv2 "
+"support then select this option and 'allow bind_v2' will be added to your "
+"slapd.conf to tell slapd to accept LDAPv2 connections."
+msgstr ""
+"slapd  LDAPv2 "
+"LDAPv3  "
+"LDAPv3  LDAPv2 "
+"'allow "
+"bind_v2'  slapd.conf slapd  LDAPv2 "
+""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "Fix LDAP directory on upgrade?"
+msgstr " LDAP ?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid ""
+"The installation scripts of the old OpenLDAP 2.0 packages create a directory "
+"that does not conform to the ldap schema. The new version is more strict "
+"about this and you won't be able to access your directory after the upgrade "
+"without fixing it."
+msgstr ""
+" OpenLDAP 2.0 ldap "
+""
+""
+""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "If you choose this option, an attempt to fix it for you will occur."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid "Move aside current database and create a new one?"
+msgstr ""
+"?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid ""
+"You have specified a directory suffix (domain) that doesn't match the one "
+"currently in /etc/ldap/slapd.conf.  Changing the directory suffix requires "
+"moving aside the current LDAP database and creating a new one.  Please "
+"confirm whether you want to abandon the current database (a backup will be "
+"made)."
+msgstr ""
+"/etc/ldap/slapd.conf "
+" () "
+" LDAP "
+" () "
+""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid "slapcat failed during upgrade"
+msgstr " slapcat "
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapcat' which attempts to extract your "
+"LDAP directory.  This failure could be because of an incorrect config file.  "
+"For example, if the appropriate moduleload lines for your backend database "
+"type are missing.  This failure will cause 'slapadd' later to fail too.  The "
+"old database files are about to be moved to /var/backups.  If you want to "
+"try this upgrade again then move the old database files back into place, fix "
+"whatever caused slapcat to fail, and run:\n"
+" slapcat | /usr/share/slapd/fix_ldif -w -o \"$organization\" > $location"
+msgstr ""
+"LDAP "
+" LDAP  'slapcat' "
+""
+" moduleload "
+" 'slapadd' "
+" /var/backups "
+"slapcat "
+":\n"
+" slapcat | /usr/share/slapd/fix_ldif -w -o \"$organization\" > $location"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"Then move the database files back to a backup area and then try running "
+"slapadd from $location."
+msgstr ""
+"slapadd  $location "
+""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid "slapadd failed during upgrade"
+msgstr " slapadd "
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapadd' which attempts to populate an "
+"empty new LDAP directory using the information from your original LDAP "
+"directory.  Your original LDAP directory files have been saved in /var/"
+"backups.  The results of the attempted upgrade is the ldif file in /var/"
+"backups.  slapadd may have failed due to a configuration problem (in which "
+"case slapcat would have failed too) or due to a problem in the LDIF file.  "
+"If the problem was with the LDIF file, you may be able to fix it and attempt "
+"the slapadd again."
+msgstr ""
+"LDAP "
+" LDAP  LDAP "
+" 'slapadd'  LDAP "
+" /var/backups /var/"
+"backups  ldif slapadd  ( slapcat "
+")  LDIF "
+" LDIF  slapadd "
+""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid "Slave databases require updateref option"
+msgstr " updateref "
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"In your slapd configuration file at least one database is configured as "
+"slave, and the updateref option is not set. The updateref option specifies "
+"the referral(s) to pass back when slapd is asked to modify a replicated "
+"local database. See slapd.conf(5) for more details."
+msgstr ""
+"slapd  1"
+"updateref updateref slapd "
+" referral "
+" slapd.conf(5) "
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"Starting with version 2.1.23, slapd requires the updateref option to be set "
+"on slaves. You should make sure to fix your slapd.conf configuration file."
+msgstr ""
+" 2.1.23 slapd  updateref "
+" slapd.conf "
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid "Change backend type from LDBM to BDB?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"The LDBM backend type has been deprecated in OpenLDAP 2.2 and has shown to "
+"not work well. BDB is the recommended choice of the OpenLDAP developers."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"When using the BDB backend make sure you configure BDB properly. For "
+"information to do so, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"If you enable this option an attempt will be made to update your  "
+"configuration to use BDB instead of LDBM and convert your databases."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid "Database backend to use:"
+msgstr ":"
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+#, fuzzy
+msgid ""
+"The BDB backend is the recommended choice of the OpenLDAP developers while "
+"support of the old LDBM backend is phasing out. When using the BDB backend "
+"make sure that you configure the underlying database for your requirements. "
+"Look into /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+"BDB  OpenLDAP \n"
+"LDBM  BDB "
+" Debian BDB "
+"BDB "
+"http://www.openldap.org/faq/data/cache/893.html "
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"HDB is the next generation of BDB which might replace it sometime in  the "
+"future. There are some problems still in the HDB code of the 2.2 series of "
+"OpenLDAP so you should probably stick to BDB until version 2.3."
+msgstr ""
+"HDB  BDB OpenLDAP 2.2  HDB "
+" 2.3  BDB "
+""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+#, fuzzy
+msgid ""
+"The BDB backend (back-bdb) and LDBM backend (back-ldbm) are comparable in "
+"purpose and back-bdb evolved from experience gained from back-ldbm, but the "
+"two are quite distinct today. They both store entries based on a 32-bit "
+"entry ID key, and they use a dn2id table to map from DNs to entry IDs. They "
+"both perform attribute indexing using the same code, and store index data as "
+"lists of entry IDs. As such, the LDAP-specific features they offer are "
+"nearly identical. The differences are in the APIs used to implement the "
+"databases. back-ldbm uses a generic database API that can plug into several "
+"different database packages. In Debian, it's built against BerkeleyDB (BDB). "
+"While BerkeleyDB supports this generic interface, it also offers a much "
+"richer API that has a lot more power and a lot more complexity. back-bdb is "
+"written specifically for the full BDB API, and uses some of BDB's more "
+"advanced features to offer transaction processing, fine grained locking, and "
+"other features that offer improved concurrency and reliability. For more "
+"information, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+"BDB  (back-bdb)  LDBM  (back-ldbm) "
+"back-bdb  back-ldbm "
+"32  ID "
+"DN  ID  dn2id "
+" ID "
+" LDAP "
+" API back-ldbm "
+" API Debian "
+"BerkeleyDB (BDB) BerkeleyDB "
+" API "
+"back-bdb  BDB API "
+" BDB "
+"http://www.openldap.org/faq/data/"
+"cache/756.html "
diff -urN openldap-2.3.35/debian/po/nl.po openldap-2.3.35_new/debian/po/nl.po
--- openldap-2.3.35/debian/po/nl.po	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/po/nl.po	2007-04-12 17:52:56.000000000 -0300
@@ -0,0 +1,475 @@
+#
+#    Translators, if you are not familiar with the PO format, gettext
+#    documentation is worth reading, especially sections dedicated to
+#    this format, e.g. by running:
+#         info -n '(gettext)PO Files'
+#         info -n '(gettext)Header Entry'
+#
+#    Some information specific to po-debconf are available at
+#            /usr/share/doc/po-debconf/README-trans
+#         or http://www.debian.org/intl/l10n/po-debconf/README-trans
+#
+#    Developers do not need to manually edit POT or PO files.
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: openldap2\n"
+"Report-Msgid-Bugs-To: torsten@debian.org\n"
+"POT-Creation-Date: 2007-04-12 17:52-0300\n"
+"PO-Revision-Date: 2003-09-27 12:45+0100\n"
+"Last-Translator: Bart Cornelis <cobaco@linux.be>\n"
+"Language-Team: debian-l10n-dutch <debian-l10n-dutch@lists.debian.org>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=iso-8859-1\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid "Omit OpenLDAP server configuration?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid ""
+"If you enable this option, no initial configuration or database will be "
+"created for you."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid "Dump databases to file on upgrade:"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Before upgrading to a new version of the OpenLDAP server the data of  your "
+"LDAP directories can be dumped to plain text files (LDIF format) which is a "
+"standardized description of that data (LDIF stands for LDAP Data Interchange "
+"Format)."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Selecting \"always\" will make the maintainer scripts dump your databases "
+"before upgrading unconditionally. Selecting \"when needed\" will only dump "
+"the database if the new version is incompatible with the old database format "
+"and it has to be reimported. The \"never\" choice will just go ahead without "
+"ever dumping your database."
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid "Directory to dump databases:"
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid ""
+"Please specify the directory where the LDAP databases will be exported. "
+"Within this directory several LDIF files are created which correspond to the "
+"search bases located on the server. Make sure you have enough free space on "
+"the partition the directory is located.  The first occurrence of the string "
+"\"VERSION\" is replaced with the server version you are upgrading from. The "
+"default is /var/backups/slapd-VERSION"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid "Move old database?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid ""
+"There are still files in /var/lib/ldap which will probably break the "
+"configuration process. If you enable this option, the maintainer scripts "
+"will move the old database files out of the way before creating a new "
+"database."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid "Invalid configuration. Retry configuration?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid ""
+"The configuration you entered is invalid. Make sure that the DNS domain name "
+"has a valid syntax, the organization is not left empty and that the admin "
+"passwords match. If you decide not to retry the configuration the LDAP "
+"server will not be set up. Run \"dpkg-reconfigure\" if you want to retry "
+"later."
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+#, fuzzy
+msgid "DNS domain name:"
+msgstr "Gelieve de domeinnaam in te voeren"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+#, fuzzy
+msgid ""
+"The DNS domain name is used to construct the base DN of your LDAP directory. "
+"Entering foo.bar.org will give you the base DN dc=foo, dc=bar, dc=org."
+msgstr ""
+"De dommeinnaam wordt gebruikt als de basis DN van uw LDAP-catalogus. foo.bar."
+"org invoeren geeft u de basis DN dc=foo, dc=bar, dc=org."
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+#, fuzzy
+msgid "Name of your organization:"
+msgstr "Gelieve de naam van uw organisatie in te voeren"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid ""
+"Whatever you enter here will be stored as the name of your organization in "
+"the base DN of your LDAP directory."
+msgstr ""
+"Wat u hier invoert wordt opgeslagen als de organisatienaam in de basis DN "
+"van uw LDAP-catalogus."
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+#, fuzzy
+msgid "Admin password:"
+msgstr "Beheerwachtwoord"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid " Please enter the password for the admin entry in your LDAP directory."
+msgstr ""
+"Gelieve het wachtwoord voor de beheeringang van uw LDAP-catalogus in te "
+"voeren."
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+#, fuzzy
+msgid "Confirm password:"
+msgstr "Beheerwachtwoord"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+msgid ""
+"Please reenter the admin password for your LDAP directory for verification."
+msgstr ""
+"Gelieve, ter verificatie, het beheerwachtwoord van uw LDAP-catalogus "
+"nogmaals in te voeren."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+#, fuzzy
+msgid "Password mismatch"
+msgstr "wachtwoorden komen niet overeen"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+#, fuzzy
+msgid ""
+"The admin password and its confirmation must match. Please note that "
+"differences such as uppercase/lowercase and added whitespace matter."
+msgstr ""
+"U dient het beheerwachtwoord tweemaal in te voeren. Merk op dat kleine "
+"verschillen, zoals hoofd of kleine letters en toegevoegde lege ruimte, "
+"relevant zijn."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:85
+msgid "Do you want your database to be removed when slapd is purged?"
+msgstr "Wilt u dat de database verwijderd wordt wanneer slapd opgeruimd wordt?"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:89
+#, fuzzy
+msgid "Encrypted admin password:"
+msgstr "Versleuteld beheerwachtwoord"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+#, fuzzy
+msgid "Change configuration to load backend modules?"
+msgstr "Verander de configuratie voor het laden van backendmodules"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"Starting with OpenLDAP 2.1 backends are not longer built into the server but "
+"are instead dynamically loaded at startup. This means that the slapd "
+"configuration has to be changed to load the modules for the backends you are "
+"using."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+#, fuzzy
+msgid ""
+"If you choose this option, an attempt to fix the configuration will be made. "
+"If you don't select this, you *must* fix your configuration file yourself or "
+"slapd (and slapcat if you are upgrading from an older version) will fail and "
+"the package will not be installed. For more information,  read /usr/share/"
+"doc/slapd/README.Debian."
+msgstr ""
+"Met OpenLDAP 2.1 zijn de backends niet langer ingebouwd in de server, maar "
+"worden ze dynamisch geladen bij het opstarten. Dit betekend dat de slapd-"
+"configuratie veranderd dient te worden opdat de door u gebruikte "
+"backendsmodules geladen worden. Indien u deze optie kiest zal ik proberen "
+"deze configuratie voor u in orde te maken. Meer informatie vindt u in /usr/"
+"share/doc/slapd/README.Debian."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid "Allow LDAPv2 protocol?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid ""
+"The slapd daemon now disables the old LDAPv2 protocol by default. Programs "
+"and users are generally expected to be upgraded to LDAPv3. If you have old "
+"programs which have not been moved to use LDAPv3 and you still need LDAPv2 "
+"support then select this option and 'allow bind_v2' will be added to your "
+"slapd.conf to tell slapd to accept LDAPv2 connections."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+#, fuzzy
+msgid "Fix LDAP directory on upgrade?"
+msgstr "Herstal LDAP-map bij opwaardering"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+#, fuzzy
+msgid ""
+"The installation scripts of the old OpenLDAP 2.0 packages create a directory "
+"that does not conform to the ldap schema. The new version is more strict "
+"about this and you won't be able to access your directory after the upgrade "
+"without fixing it."
+msgstr ""
+"De installatiescripts van de oude OpenLDAP 2.0 pakketten maken een catalogus "
+"aan die voldoet aan het ldap-schema. Deze nieuwe versie is wat dit betreft "
+"stricter, hierdoor zult u geen toegang hebben tot uw catalogus tenzij u dit "
+"repareert. Wanneer u deze optie kiest zal ik proberen om dit voor u in orde "
+"te maken."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "If you choose this option, an attempt to fix it for you will occur."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid "Move aside current database and create a new one?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid ""
+"You have specified a directory suffix (domain) that doesn't match the one "
+"currently in /etc/ldap/slapd.conf.  Changing the directory suffix requires "
+"moving aside the current LDAP database and creating a new one.  Please "
+"confirm whether you want to abandon the current database (a backup will be "
+"made)."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid "slapcat failed during upgrade"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapcat' which attempts to extract your "
+"LDAP directory.  This failure could be because of an incorrect config file.  "
+"For example, if the appropriate moduleload lines for your backend database "
+"type are missing.  This failure will cause 'slapadd' later to fail too.  The "
+"old database files are about to be moved to /var/backups.  If you want to "
+"try this upgrade again then move the old database files back into place, fix "
+"whatever caused slapcat to fail, and run:\n"
+" slapcat | /usr/share/slapd/fix_ldif -w -o \"$organization\" > $location"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"Then move the database files back to a backup area and then try running "
+"slapadd from $location."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid "slapadd failed during upgrade"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapadd' which attempts to populate an "
+"empty new LDAP directory using the information from your original LDAP "
+"directory.  Your original LDAP directory files have been saved in /var/"
+"backups.  The results of the attempted upgrade is the ldif file in /var/"
+"backups.  slapadd may have failed due to a configuration problem (in which "
+"case slapcat would have failed too) or due to a problem in the LDIF file.  "
+"If the problem was with the LDIF file, you may be able to fix it and attempt "
+"the slapadd again."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid "Slave databases require updateref option"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"In your slapd configuration file at least one database is configured as "
+"slave, and the updateref option is not set. The updateref option specifies "
+"the referral(s) to pass back when slapd is asked to modify a replicated "
+"local database. See slapd.conf(5) for more details."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"Starting with version 2.1.23, slapd requires the updateref option to be set "
+"on slaves. You should make sure to fix your slapd.conf configuration file."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid "Change backend type from LDBM to BDB?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"The LDBM backend type has been deprecated in OpenLDAP 2.2 and has shown to "
+"not work well. BDB is the recommended choice of the OpenLDAP developers."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"When using the BDB backend make sure you configure BDB properly. For "
+"information to do so, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"If you enable this option an attempt will be made to update your  "
+"configuration to use BDB instead of LDBM and convert your databases."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid "Database backend to use:"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend is the recommended choice of the OpenLDAP developers while "
+"support of the old LDBM backend is phasing out. When using the BDB backend "
+"make sure that you configure the underlying database for your requirements. "
+"Look into /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"HDB is the next generation of BDB which might replace it sometime in  the "
+"future. There are some problems still in the HDB code of the 2.2 series of "
+"OpenLDAP so you should probably stick to BDB until version 2.3."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend (back-bdb) and LDBM backend (back-ldbm) are comparable in "
+"purpose and back-bdb evolved from experience gained from back-ldbm, but the "
+"two are quite distinct today. They both store entries based on a 32-bit "
+"entry ID key, and they use a dn2id table to map from DNs to entry IDs. They "
+"both perform attribute indexing using the same code, and store index data as "
+"lists of entry IDs. As such, the LDAP-specific features they offer are "
+"nearly identical. The differences are in the APIs used to implement the "
+"databases. back-ldbm uses a generic database API that can plug into several "
+"different database packages. In Debian, it's built against BerkeleyDB (BDB). "
+"While BerkeleyDB supports this generic interface, it also offers a much "
+"richer API that has a lot more power and a lot more complexity. back-bdb is "
+"written specifically for the full BDB API, and uses some of BDB's more "
+"advanced features to offer transaction processing, fine grained locking, and "
+"other features that offer improved concurrency and reliability. For more "
+"information, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#~ msgid "Admin entry"
+#~ msgstr "Beheeringang"
+
+#~ msgid ""
+#~ "The admin entry is the entry in the directory which has full read and "
+#~ "write access."
+#~ msgstr ""
+#~ "Het beheeringang is het item in de catalogus met volledige lees- en "
+#~ "schrijfrechten"
+
+#~ msgid "Verify password"
+#~ msgstr "Verifieer het wachtwoord"
diff -urN openldap-2.3.35/debian/po/POTFILES.in openldap-2.3.35_new/debian/po/POTFILES.in
--- openldap-2.3.35/debian/po/POTFILES.in	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/po/POTFILES.in	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1 @@
+[type: gettext/rfc822deb] slapd.templates
diff -urN openldap-2.3.35/debian/po/pt_BR.po openldap-2.3.35_new/debian/po/pt_BR.po
--- openldap-2.3.35/debian/po/pt_BR.po	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/po/pt_BR.po	2007-04-12 17:52:56.000000000 -0300
@@ -0,0 +1,478 @@
+#
+#    Translators, if you are not familiar with the PO format, gettext
+#    documentation is worth reading, especially sections dedicated to
+#    this format, e.g. by running:
+#         info -n '(gettext)PO Files'
+#         info -n '(gettext)Header Entry'
+#
+#    Some information specific to po-debconf are available at
+#            /usr/share/doc/po-debconf/README-trans
+#         or http://www.debian.org/intl/l10n/po-debconf/README-trans
+#
+#    Developers do not need to manually edit POT or PO files.
+#
+msgid ""
+msgstr ""
+"Project-Id-Version: openldap2_2.1.17-1\n"
+"Report-Msgid-Bugs-To: torsten@debian.org\n"
+"POT-Creation-Date: 2007-04-12 17:52-0300\n"
+"PO-Revision-Date: 2003-04-20 21:41-0300\n"
+"Last-Translator: Andr Lus Lopes <andrelop@ig.com.br>\n"
+"Language-Team: Debian-BR Project <debian-l10n-portuguese@lists.debian.org>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=ISO-8859-1\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid "Omit OpenLDAP server configuration?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid ""
+"If you enable this option, no initial configuration or database will be "
+"created for you."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid "Dump databases to file on upgrade:"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Before upgrading to a new version of the OpenLDAP server the data of  your "
+"LDAP directories can be dumped to plain text files (LDIF format) which is a "
+"standardized description of that data (LDIF stands for LDAP Data Interchange "
+"Format)."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Selecting \"always\" will make the maintainer scripts dump your databases "
+"before upgrading unconditionally. Selecting \"when needed\" will only dump "
+"the database if the new version is incompatible with the old database format "
+"and it has to be reimported. The \"never\" choice will just go ahead without "
+"ever dumping your database."
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid "Directory to dump databases:"
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid ""
+"Please specify the directory where the LDAP databases will be exported. "
+"Within this directory several LDIF files are created which correspond to the "
+"search bases located on the server. Make sure you have enough free space on "
+"the partition the directory is located.  The first occurrence of the string "
+"\"VERSION\" is replaced with the server version you are upgrading from. The "
+"default is /var/backups/slapd-VERSION"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid "Move old database?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid ""
+"There are still files in /var/lib/ldap which will probably break the "
+"configuration process. If you enable this option, the maintainer scripts "
+"will move the old database files out of the way before creating a new "
+"database."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid "Invalid configuration. Retry configuration?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid ""
+"The configuration you entered is invalid. Make sure that the DNS domain name "
+"has a valid syntax, the organization is not left empty and that the admin "
+"passwords match. If you decide not to retry the configuration the LDAP "
+"server will not be set up. Run \"dpkg-reconfigure\" if you want to retry "
+"later."
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+#, fuzzy
+msgid "DNS domain name:"
+msgstr "Informe o nome do domnio"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+#, fuzzy
+msgid ""
+"The DNS domain name is used to construct the base DN of your LDAP directory. "
+"Entering foo.bar.org will give you the base DN dc=foo, dc=bar, dc=org."
+msgstr ""
+"O nome do domnio  usado para construir a base DN de seu diretrio LDAP. "
+"Informar foo.bar.org ir ir'resultar na criao da base DN dc=foo, dc=bar, "
+"dc=org."
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+#, fuzzy
+msgid "Name of your organization:"
+msgstr "Informe o nome de sua organizao"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid ""
+"Whatever you enter here will be stored as the name of your organization in "
+"the base DN of your LDAP directory."
+msgstr ""
+"O que for informado aqui ser usado como o nome de sua organizao na base "
+"DN de seu diretrio LDAP."
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+#, fuzzy
+msgid "Admin password:"
+msgstr "Senha para a entrada administrativa"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid " Please enter the password for the admin entry in your LDAP directory."
+msgstr ""
+"Por favor informe a senha para a entrada administrativa em seu diretrio "
+"LDAP."
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+#, fuzzy
+msgid "Confirm password:"
+msgstr "Senha para a entrada administrativa"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+msgid ""
+"Please reenter the admin password for your LDAP directory for verification."
+msgstr ""
+"Por favor informe novamente a mesma senha para a entrada administrativa de "
+"seu diretrio LDAP."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+#, fuzzy
+msgid "Password mismatch"
+msgstr "As senhas no so idnticas"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+#, fuzzy
+msgid ""
+"The admin password and its confirmation must match. Please note that "
+"differences such as uppercase/lowercase and added whitespace matter."
+msgstr ""
+" necessrio informar a senha administrativa duas vezes. Por favor note que "
+"diferenas como caixa alta/caixa baixa e espaos adicionais importam."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:85
+msgid "Do you want your database to be removed when slapd is purged?"
+msgstr ""
+"Voc deseja que sua base de dados seja removida quando o pacote slapd for "
+"removido ?"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:89
+#, fuzzy
+msgid "Encrypted admin password:"
+msgstr "Senha administrativa encriptada"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+#, fuzzy
+msgid "Change configuration to load backend modules?"
+msgstr "Mudar confgiurao para carregar mdulos backend"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"Starting with OpenLDAP 2.1 backends are not longer built into the server but "
+"are instead dynamically loaded at startup. This means that the slapd "
+"configuration has to be changed to load the modules for the backends you are "
+"using."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+#, fuzzy
+msgid ""
+"If you choose this option, an attempt to fix the configuration will be made. "
+"If you don't select this, you *must* fix your configuration file yourself or "
+"slapd (and slapcat if you are upgrading from an older version) will fail and "
+"the package will not be installed. For more information,  read /usr/share/"
+"doc/slapd/README.Debian."
+msgstr ""
+"Com o OpenLDAP 2.1 os backends no so mais construdos embutidos no "
+"servidor mas sim carregados dinamicamente em tempo de inicializao. Isso "
+"significa que a configurao do slapd precisa ser modificada para carregar "
+"os backends que voc est usando atualmente. Caso voc selecione esta opo "
+"uma tentativa de consertar a configurao necessria para voc ser feita. "
+"Para maiores informaes, por favor leia o arquivo /usr/share/doc/slapd/"
+"README.Debian."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid "Allow LDAPv2 protocol?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid ""
+"The slapd daemon now disables the old LDAPv2 protocol by default. Programs "
+"and users are generally expected to be upgraded to LDAPv3. If you have old "
+"programs which have not been moved to use LDAPv3 and you still need LDAPv2 "
+"support then select this option and 'allow bind_v2' will be added to your "
+"slapd.conf to tell slapd to accept LDAPv2 connections."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+#, fuzzy
+msgid "Fix LDAP directory on upgrade?"
+msgstr "Corrigir seu diretrio LDAP na atualizao"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+#, fuzzy
+msgid ""
+"The installation scripts of the old OpenLDAP 2.0 packages create a directory "
+"that does not conform to the ldap schema. The new version is more strict "
+"about this and you won't be able to access your directory after the upgrade "
+"without fixing it."
+msgstr ""
+"Os scripts de instalao dos antigos pacotes do OpenLDAP 2.0 criaram um "
+"diretrio que no era concordante com o schema ldap. A nova verso  mais "
+"restrita em relao a isso e voc no ser capaz de acessar seu diretrio "
+"depois da atualizao sem corrig-lo. Caso voc selecione esta opo uma "
+"tentativa de corrigir esse problema ser feita automaticamente para voc."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "If you choose this option, an attempt to fix it for you will occur."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid "Move aside current database and create a new one?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid ""
+"You have specified a directory suffix (domain) that doesn't match the one "
+"currently in /etc/ldap/slapd.conf.  Changing the directory suffix requires "
+"moving aside the current LDAP database and creating a new one.  Please "
+"confirm whether you want to abandon the current database (a backup will be "
+"made)."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid "slapcat failed during upgrade"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapcat' which attempts to extract your "
+"LDAP directory.  This failure could be because of an incorrect config file.  "
+"For example, if the appropriate moduleload lines for your backend database "
+"type are missing.  This failure will cause 'slapadd' later to fail too.  The "
+"old database files are about to be moved to /var/backups.  If you want to "
+"try this upgrade again then move the old database files back into place, fix "
+"whatever caused slapcat to fail, and run:\n"
+" slapcat | /usr/share/slapd/fix_ldif -w -o \"$organization\" > $location"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"Then move the database files back to a backup area and then try running "
+"slapadd from $location."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid "slapadd failed during upgrade"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapadd' which attempts to populate an "
+"empty new LDAP directory using the information from your original LDAP "
+"directory.  Your original LDAP directory files have been saved in /var/"
+"backups.  The results of the attempted upgrade is the ldif file in /var/"
+"backups.  slapadd may have failed due to a configuration problem (in which "
+"case slapcat would have failed too) or due to a problem in the LDIF file.  "
+"If the problem was with the LDIF file, you may be able to fix it and attempt "
+"the slapadd again."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid "Slave databases require updateref option"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"In your slapd configuration file at least one database is configured as "
+"slave, and the updateref option is not set. The updateref option specifies "
+"the referral(s) to pass back when slapd is asked to modify a replicated "
+"local database. See slapd.conf(5) for more details."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"Starting with version 2.1.23, slapd requires the updateref option to be set "
+"on slaves. You should make sure to fix your slapd.conf configuration file."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid "Change backend type from LDBM to BDB?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"The LDBM backend type has been deprecated in OpenLDAP 2.2 and has shown to "
+"not work well. BDB is the recommended choice of the OpenLDAP developers."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"When using the BDB backend make sure you configure BDB properly. For "
+"information to do so, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"If you enable this option an attempt will be made to update your  "
+"configuration to use BDB instead of LDBM and convert your databases."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid "Database backend to use:"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend is the recommended choice of the OpenLDAP developers while "
+"support of the old LDBM backend is phasing out. When using the BDB backend "
+"make sure that you configure the underlying database for your requirements. "
+"Look into /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"HDB is the next generation of BDB which might replace it sometime in  the "
+"future. There are some problems still in the HDB code of the 2.2 series of "
+"OpenLDAP so you should probably stick to BDB until version 2.3."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend (back-bdb) and LDBM backend (back-ldbm) are comparable in "
+"purpose and back-bdb evolved from experience gained from back-ldbm, but the "
+"two are quite distinct today. They both store entries based on a 32-bit "
+"entry ID key, and they use a dn2id table to map from DNs to entry IDs. They "
+"both perform attribute indexing using the same code, and store index data as "
+"lists of entry IDs. As such, the LDAP-specific features they offer are "
+"nearly identical. The differences are in the APIs used to implement the "
+"databases. back-ldbm uses a generic database API that can plug into several "
+"different database packages. In Debian, it's built against BerkeleyDB (BDB). "
+"While BerkeleyDB supports this generic interface, it also offers a much "
+"richer API that has a lot more power and a lot more complexity. back-bdb is "
+"written specifically for the full BDB API, and uses some of BDB's more "
+"advanced features to offer transaction processing, fine grained locking, and "
+"other features that offer improved concurrency and reliability. For more "
+"information, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#~ msgid "Admin entry"
+#~ msgstr "Entrada administrativa"
+
+#~ msgid ""
+#~ "The admin entry is the entry in the directory which has full read and "
+#~ "write access."
+#~ msgstr ""
+#~ "A entrada administrativa  a entrada no diretrio que possui acesso total "
+#~ "de leitura e gravao."
+
+#~ msgid "Verify password"
+#~ msgstr "Informa novamente a mesma senha"
diff -urN openldap-2.3.35/debian/po/templates.pot openldap-2.3.35_new/debian/po/templates.pot
--- openldap-2.3.35/debian/po/templates.pot	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/po/templates.pot	2007-04-12 17:52:56.000000000 -0300
@@ -0,0 +1,421 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the PACKAGE package.
+# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: PACKAGE VERSION\n"
+"Report-Msgid-Bugs-To: torsten@debian.org\n"
+"POT-Creation-Date: 2007-04-12 17:52-0300\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=CHARSET\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid "Omit OpenLDAP server configuration?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid ""
+"If you enable this option, no initial configuration or database will be "
+"created for you."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid "Dump databases to file on upgrade:"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Before upgrading to a new version of the OpenLDAP server the data of  your "
+"LDAP directories can be dumped to plain text files (LDIF format) which is a "
+"standardized description of that data (LDIF stands for LDAP Data Interchange "
+"Format)."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Selecting \"always\" will make the maintainer scripts dump your databases "
+"before upgrading unconditionally. Selecting \"when needed\" will only dump "
+"the database if the new version is incompatible with the old database format "
+"and it has to be reimported. The \"never\" choice will just go ahead without "
+"ever dumping your database."
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid "Directory to dump databases:"
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid ""
+"Please specify the directory where the LDAP databases will be exported. "
+"Within this directory several LDIF files are created which correspond to the "
+"search bases located on the server. Make sure you have enough free space on "
+"the partition the directory is located.  The first occurrence of the string "
+"\"VERSION\" is replaced with the server version you are upgrading from. The "
+"default is /var/backups/slapd-VERSION"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid "Move old database?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid ""
+"There are still files in /var/lib/ldap which will probably break the "
+"configuration process. If you enable this option, the maintainer scripts "
+"will move the old database files out of the way before creating a new "
+"database."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid "Invalid configuration. Retry configuration?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid ""
+"The configuration you entered is invalid. Make sure that the DNS domain name "
+"has a valid syntax, the organization is not left empty and that the admin "
+"passwords match. If you decide not to retry the configuration the LDAP "
+"server will not be set up. Run \"dpkg-reconfigure\" if you want to retry "
+"later."
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+msgid "DNS domain name:"
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+msgid ""
+"The DNS domain name is used to construct the base DN of your LDAP directory. "
+"Entering foo.bar.org will give you the base DN dc=foo, dc=bar, dc=org."
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid "Name of your organization:"
+msgstr ""
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid ""
+"Whatever you enter here will be stored as the name of your organization in "
+"the base DN of your LDAP directory."
+msgstr ""
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid "Admin password:"
+msgstr ""
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid " Please enter the password for the admin entry in your LDAP directory."
+msgstr ""
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+msgid "Confirm password:"
+msgstr ""
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+msgid ""
+"Please reenter the admin password for your LDAP directory for verification."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+msgid "Password mismatch"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+msgid ""
+"The admin password and its confirmation must match. Please note that "
+"differences such as uppercase/lowercase and added whitespace matter."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:85
+msgid "Do you want your database to be removed when slapd is purged?"
+msgstr ""
+
+#. Type: password
+#. Description
+#: ../slapd.templates:89
+msgid "Encrypted admin password:"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid "Change configuration to load backend modules?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"Starting with OpenLDAP 2.1 backends are not longer built into the server but "
+"are instead dynamically loaded at startup. This means that the slapd "
+"configuration has to be changed to load the modules for the backends you are "
+"using."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"If you choose this option, an attempt to fix the configuration will be made. "
+"If you don't select this, you *must* fix your configuration file yourself or "
+"slapd (and slapcat if you are upgrading from an older version) will fail and "
+"the package will not be installed. For more information,  read /usr/share/"
+"doc/slapd/README.Debian."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid "Allow LDAPv2 protocol?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid ""
+"The slapd daemon now disables the old LDAPv2 protocol by default. Programs "
+"and users are generally expected to be upgraded to LDAPv3. If you have old "
+"programs which have not been moved to use LDAPv3 and you still need LDAPv2 "
+"support then select this option and 'allow bind_v2' will be added to your "
+"slapd.conf to tell slapd to accept LDAPv2 connections."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "Fix LDAP directory on upgrade?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid ""
+"The installation scripts of the old OpenLDAP 2.0 packages create a directory "
+"that does not conform to the ldap schema. The new version is more strict "
+"about this and you won't be able to access your directory after the upgrade "
+"without fixing it."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "If you choose this option, an attempt to fix it for you will occur."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid "Move aside current database and create a new one?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid ""
+"You have specified a directory suffix (domain) that doesn't match the one "
+"currently in /etc/ldap/slapd.conf.  Changing the directory suffix requires "
+"moving aside the current LDAP database and creating a new one.  Please "
+"confirm whether you want to abandon the current database (a backup will be "
+"made)."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid "slapcat failed during upgrade"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapcat' which attempts to extract your "
+"LDAP directory.  This failure could be because of an incorrect config file.  "
+"For example, if the appropriate moduleload lines for your backend database "
+"type are missing.  This failure will cause 'slapadd' later to fail too.  The "
+"old database files are about to be moved to /var/backups.  If you want to "
+"try this upgrade again then move the old database files back into place, fix "
+"whatever caused slapcat to fail, and run:\n"
+" slapcat | /usr/share/slapd/fix_ldif -w -o \"$organization\" > $location"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"Then move the database files back to a backup area and then try running "
+"slapadd from $location."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid "slapadd failed during upgrade"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapadd' which attempts to populate an "
+"empty new LDAP directory using the information from your original LDAP "
+"directory.  Your original LDAP directory files have been saved in /var/"
+"backups.  The results of the attempted upgrade is the ldif file in /var/"
+"backups.  slapadd may have failed due to a configuration problem (in which "
+"case slapcat would have failed too) or due to a problem in the LDIF file.  "
+"If the problem was with the LDIF file, you may be able to fix it and attempt "
+"the slapadd again."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid "Slave databases require updateref option"
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"In your slapd configuration file at least one database is configured as "
+"slave, and the updateref option is not set. The updateref option specifies "
+"the referral(s) to pass back when slapd is asked to modify a replicated "
+"local database. See slapd.conf(5) for more details."
+msgstr ""
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"Starting with version 2.1.23, slapd requires the updateref option to be set "
+"on slaves. You should make sure to fix your slapd.conf configuration file."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid "Change backend type from LDBM to BDB?"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"The LDBM backend type has been deprecated in OpenLDAP 2.2 and has shown to "
+"not work well. BDB is the recommended choice of the OpenLDAP developers."
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"When using the BDB backend make sure you configure BDB properly. For "
+"information to do so, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"If you enable this option an attempt will be made to update your  "
+"configuration to use BDB instead of LDBM and convert your databases."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid "Database backend to use:"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend is the recommended choice of the OpenLDAP developers while "
+"support of the old LDBM backend is phasing out. When using the BDB backend "
+"make sure that you configure the underlying database for your requirements. "
+"Look into /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"HDB is the next generation of BDB which might replace it sometime in  the "
+"future. There are some problems still in the HDB code of the 2.2 series of "
+"OpenLDAP so you should probably stick to BDB until version 2.3."
+msgstr ""
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend (back-bdb) and LDBM backend (back-ldbm) are comparable in "
+"purpose and back-bdb evolved from experience gained from back-ldbm, but the "
+"two are quite distinct today. They both store entries based on a 32-bit "
+"entry ID key, and they use a dn2id table to map from DNs to entry IDs. They "
+"both perform attribute indexing using the same code, and store index data as "
+"lists of entry IDs. As such, the LDAP-specific features they offer are "
+"nearly identical. The differences are in the APIs used to implement the "
+"databases. back-ldbm uses a generic database API that can plug into several "
+"different database packages. In Debian, it's built against BerkeleyDB (BDB). "
+"While BerkeleyDB supports this generic interface, it also offers a much "
+"richer API that has a lot more power and a lot more complexity. back-bdb is "
+"written specifically for the full BDB API, and uses some of BDB's more "
+"advanced features to offer transaction processing, fine grained locking, and "
+"other features that offer improved concurrency and reliability. For more "
+"information, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
diff -urN openldap-2.3.35/debian/po/vi.po openldap-2.3.35_new/debian/po/vi.po
--- openldap-2.3.35/debian/po/vi.po	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/po/vi.po	2007-04-12 17:52:56.000000000 -0300
@@ -0,0 +1,531 @@
+# Vietnamese translation for openldap2.2.
+# Copyright  2005 Free Software Foundation, Inc.
+# Clytie Siddall <clytie@riverland.net.au>, 2005.
+# 
+msgid ""
+msgstr ""
+"Project-Id-Version: openldap2.2 2.2.26-1\n"
+"Report-Msgid-Bugs-To: torsten@debian.org\n"
+"POT-Creation-Date: 2007-04-12 17:52-0300\n"
+"PO-Revision-Date: 2005-07-02 21:10+0930\n"
+"Last-Translator: Clytie Siddall <clytie@riverland.net.au>\n"
+"Language-Team: Vietnamese <gnomevi-list@lists.sourceforge.net>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=utf-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+"Plural-Forms: nplurals=1; plural=0\n"
+"X-Generator: LocFactoryEditor 1.2.2\n"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid "Omit OpenLDAP server configuration?"
+msgstr "B qua cu hnh trnh phc v OpenLDAP khng?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:4
+msgid ""
+"If you enable this option, no initial configuration or database will be "
+"created for you."
+msgstr ""
+"Nu bn hiu lc ty chn ny, s khng to cho bn cu hnh hay c s d "
+"liu u tin."
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid "Dump databases to file on upgrade:"
+msgstr " cc c s d liu vo tp tin khi nng cp:"
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Before upgrading to a new version of the OpenLDAP server the data of  your "
+"LDAP directories can be dumped to plain text files (LDIF format) which is a "
+"standardized description of that data (LDIF stands for LDAP Data Interchange "
+"Format)."
+msgstr ""
+"Trc khi nng cp ln mt phin bn mi ca trnh phc v OpenLDAP, c th "
+" cc d liu ca th mc LDAP vo tp tin ch th, khun dng LDIF, mt m "
+"t chun ca d liu y. LDIF l vit tt cho LDAP Data Interchange Format "
+"(Khun dang trao i d liu LDAP ln nhau)."
+
+#. Type: select
+#. Description
+#: ../slapd.templates:12
+msgid ""
+"Selecting \"always\" will make the maintainer scripts dump your databases "
+"before upgrading unconditionally. Selecting \"when needed\" will only dump "
+"the database if the new version is incompatible with the old database format "
+"and it has to be reimported. The \"never\" choice will just go ahead without "
+"ever dumping your database."
+msgstr ""
+"Chn lun lun (always) th s lm cho nhng tp lnh bo qun s  cc "
+"c s d liu mt cch khng iu kin. Chn khi cn thit (when needed) "
+"th s  c s d liu ch nu phin bn mi khng tng thch vi khun "
+"dng c s d liu c nn phi nhp li n. Cn s chn khng bao "
+"gi (never) th s tip tc m khng bao gi  c s d liu ca bn."
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid "Directory to dump databases:"
+msgstr "Th mc ni cn  c s d liu:"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:27
+msgid ""
+"Please specify the directory where the LDAP databases will be exported. "
+"Within this directory several LDIF files are created which correspond to the "
+"search bases located on the server. Make sure you have enough free space on "
+"the partition the directory is located.  The first occurrence of the string "
+"\"VERSION\" is replaced with the server version you are upgrading from. The "
+"default is /var/backups/slapd-VERSION"
+msgstr ""
+"Hy ghi r th mc m cc c s d liu LDAP s c xut vo n.  trong "
+"th mc ny s c to vi tp tin LDIF m tng ng vi nhng c bn tm "
+"kim trn trnh phc v. Hy kim tra xem c  sc cha cn rnh trn phn "
+"vng a cha th mc ny. Ln th nht chui VERSION (phin bn) xut "
+"hin trong tp tin th c thay th bng phin bn trnh phc v m bn "
+"ang nng cp t n. Mc nh l /var/backups/slapd-VERSION."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid "Move old database?"
+msgstr "Di chuyn c s d liu c khng?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:38
+msgid ""
+"There are still files in /var/lib/ldap which will probably break the "
+"configuration process. If you enable this option, the maintainer scripts "
+"will move the old database files out of the way before creating a new "
+"database."
+msgstr ""
+"Vn cn c mt s tp tin trong /var/lib/ldap m s rt c th ph v tin "
+"trnh cu hnh. Nu bn hiu lc ty chn ny th nhng tp lnh bo qun s "
+"di chuyn nhng tp tin c s d liu c ra, trc khi to mt c s d liu "
+"mi."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid "Invalid configuration. Retry configuration?"
+msgstr "Cu hnh khng hp l. Th li cu hnh khng?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:47
+msgid ""
+"The configuration you entered is invalid. Make sure that the DNS domain name "
+"has a valid syntax, the organization is not left empty and that the admin "
+"passwords match. If you decide not to retry the configuration the LDAP "
+"server will not be set up. Run \"dpkg-reconfigure\" if you want to retry "
+"later."
+msgstr ""
+"Bn  nhp mt cu hnh khng hp l. Hy kim tra xem tn min DNS c c "
+"php hp l, trng t chc khng rng v hai mt khu qun l c khp c. "
+"Nu bn chn khng th li cu hnh th s khng thit lp trnh phc v "
+"LDAP. Hy chy lnh dpkg-reconfigure nu bn mun th li ln sau."
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+msgid "DNS domain name:"
+msgstr "Tn min DNS:"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:55
+msgid ""
+"The DNS domain name is used to construct the base DN of your LDAP directory. "
+"Entering foo.bar.org will give you the base DN dc=foo, dc=bar, dc=org."
+msgstr ""
+"Tn min DNS c dng  xy dng tn min c bn ca danh b LDAP bn. Ly "
+"th d, nhp phu.ba.org s to tn min c bn dc=phu, dc=ba, dc=org."
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid "Name of your organization:"
+msgstr "Tn ca t chc bn:"
+
+#. Type: string
+#. Description
+#: ../slapd.templates:61
+msgid ""
+"Whatever you enter here will be stored as the name of your organization in "
+"the base DN of your LDAP directory."
+msgstr ""
+"iu nhp vo y s c ghi l tn ca t chc bn trong tn min c bn "
+"ca danh b LDAP bn."
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid "Admin password:"
+msgstr "Mt khu qun l:"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:67
+msgid " Please enter the password for the admin entry in your LDAP directory."
+msgstr "Hy nhp mt khu cho mc ghi qun l trong danh b LDAP bn."
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+msgid "Confirm password:"
+msgstr "Xc nhn mt khu:"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:72
+msgid ""
+"Please reenter the admin password for your LDAP directory for verification."
+msgstr "Hy nhp li mt khu qun l cho danh b LDAP bn,  xc nhn n."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+msgid "Password mismatch"
+msgstr "Hai mt khu khng khp."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:78
+msgid ""
+"The admin password and its confirmation must match. Please note that "
+"differences such as uppercase/lowercase and added whitespace matter."
+msgstr ""
+"Mt khu quan l v mt khu xc nhn phi khp vi nhau. Hy phn bit ch "
+"hoa/thng v s du cch."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:85
+msgid "Do you want your database to be removed when slapd is purged?"
+msgstr ""
+"Khi ty gi tin slapd, bn cng c mun loi b c s d liu ca bn khng?"
+
+#. Type: password
+#. Description
+#: ../slapd.templates:89
+msgid "Encrypted admin password:"
+msgstr "Mt khu qun l mt m:"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid "Change configuration to load backend modules?"
+msgstr "Sa i cu hynh"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"Starting with OpenLDAP 2.1 backends are not longer built into the server but "
+"are instead dynamically loaded at startup. This means that the slapd "
+"configuration has to be changed to load the modules for the backends you are "
+"using."
+msgstr ""
+"Trong OpenLDAP 2.1, hu phng khng cn c sn li trong trnh phc v. "
+"Thay vo , c ti chng mt cch ng khi khi chy trnh. C ngha l cn "
+"phi sa i cu hnh slapd  ti m-un cho nhng hu phng m bn c s "
+"dng"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:94
+msgid ""
+"If you choose this option, an attempt to fix the configuration will be made. "
+"If you don't select this, you *must* fix your configuration file yourself or "
+"slapd (and slapcat if you are upgrading from an older version) will fail and "
+"the package will not be installed. For more information,  read /usr/share/"
+"doc/slapd/README.Debian."
+msgstr ""
+"Nu bn chn ty chn ny, trnh ny s c sa cu hnh. Cn nu bn khng "
+"chn ty chn ny, bn  phi  t sa tp tin cu hnh: nu khng th trnh "
+"slapd (cng trnh slapcat nu bn ang nng cp t mt phin bn c hn) s "
+"khng hot ng, v gi tin s khng c ci t.  tm thng tin thm, "
+"hy xem tp tin /usr/share/doc/slapd/README.Debian."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid "Allow LDAPv2 protocol?"
+msgstr "Cho php giao thc LDAPv2 khng?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:109
+msgid ""
+"The slapd daemon now disables the old LDAPv2 protocol by default. Programs "
+"and users are generally expected to be upgraded to LDAPv3. If you have old "
+"programs which have not been moved to use LDAPv3 and you still need LDAPv2 "
+"support then select this option and 'allow bind_v2' will be added to your "
+"slapd.conf to tell slapd to accept LDAPv2 connections."
+msgstr ""
+"Trnh nn (dmon) slapd lc by gi v hiu ha giao thc LDAPv2 theo mc "
+"nh. Chng trnh v ngi dng thng c ng nng cp ln LDAPv3. Nu "
+"bn cn c mt s chng trnh c cha nng cp  dng LDAPv3, v bn vn "
+"cn cn c cch h tr LDAPv2 th hy chn ty chn ny, v allow bind_v2 "
+"s c thm vo tp tin cu hnh slapd.conf  bo trnh slapd chp nhn "
+"cch kt ni LDAPv2."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "Fix LDAP directory on upgrade?"
+msgstr "Sa th mc LDAP khi nng cp khng?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid ""
+"The installation scripts of the old OpenLDAP 2.0 packages create a directory "
+"that does not conform to the ldap schema. The new version is more strict "
+"about this and you won't be able to access your directory after the upgrade "
+"without fixing it."
+msgstr ""
+"Nhng tp lnh ci t ca gi tin OpenLDAP 2.0 c  to mt th mc khng "
+"lm cho hp vi gin  LDAP. Phin bn mi c cht ch hn, th bn s "
+"khng th truy cp th mc y sau khi nng cp, nu bn khng sa n."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:120
+msgid "If you choose this option, an attempt to fix it for you will occur."
+msgstr "Nu bn chn ty chn ny th trnh ny s c sa n cho bn."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid "Move aside current database and create a new one?"
+msgstr "Di chuyn c s d liu hin thi ra, ri to mt iu mi khng?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:131
+msgid ""
+"You have specified a directory suffix (domain) that doesn't match the one "
+"currently in /etc/ldap/slapd.conf.  Changing the directory suffix requires "
+"moving aside the current LDAP database and creating a new one.  Please "
+"confirm whether you want to abandon the current database (a backup will be "
+"made)."
+msgstr ""
+"Bn  ghi r mt hu t th mc (min) khng khp vi iu hin thi trong "
+"tp tin cu hnh /etc/ldap/slapd.conf. Thay i hu t th mc cn n di "
+"chuyn c s d liu LDAP hin thi ra ri to mt iu mi. Hy xc nhn "
+"nu bn mun b c s d liu hin thi. Trong trng hp y, s to mt bn "
+"sao lu."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid "slapcat failed during upgrade"
+msgstr "Trnh slapcat b li trong khi nng cp"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapcat' which attempts to extract your "
+"LDAP directory.  This failure could be because of an incorrect config file.  "
+"For example, if the appropriate moduleload lines for your backend database "
+"type are missing.  This failure will cause 'slapadd' later to fail too.  The "
+"old database files are about to be moved to /var/backups.  If you want to "
+"try this upgrade again then move the old database files back into place, fix "
+"whatever caused slapcat to fail, and run:\n"
+" slapcat | /usr/share/slapd/fix_ldif -w -o \"$organization\" > $location"
+msgstr ""
+"Gp li trong khi c nng cp th mc LDAP ca bn. Li ny xy ra khi thc "
+"hin slapcat m c rt th mc LDAP ca bn. Li ny c l v c mt tp "
+"tin cu hnh khng ng. Ly th d, nu thiu nhng dng moduleload (ti "
+"m-un) thch hp cho c s d liu hu phng. Li ny s cng gy ra trnh "
+"slapadd b li. Sp di chuyn nhng tp tin c s d liu c sang /var/"
+"backups. Nu bn mun th li nng cp, th hy di chuyn nhng tp tin c "
+"s d liu c v v tr trc, sa li y, ri chy lnh slapcat | /usr/"
+"share/slapd/fix_ldif -w -o \"$organization\" > $location."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:140
+msgid ""
+"Then move the database files back to a backup area and then try running "
+"slapadd from $location."
+msgstr ""
+"Sau , hy di chuyn nhng tp tin c s d liu sang mt vng lu tr, ri "
+"c chy trnh slapadd t $location."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid "slapadd failed during upgrade"
+msgstr "Trnh slapadd b li trong khi nng cp"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:157
+msgid ""
+"An error occurred during the attempt to upgrade your LDAP directory. This "
+"error occurred when performing the 'slapadd' which attempts to populate an "
+"empty new LDAP directory using the information from your original LDAP "
+"directory.  Your original LDAP directory files have been saved in /var/"
+"backups.  The results of the attempted upgrade is the ldif file in /var/"
+"backups.  slapadd may have failed due to a configuration problem (in which "
+"case slapcat would have failed too) or due to a problem in the LDIF file.  "
+"If the problem was with the LDIF file, you may be able to fix it and attempt "
+"the slapadd again."
+msgstr ""
+"Gp li trong khi c nng cp danh b LDAP bn. Li ny xy ra khi thc hin "
+"slapadd m c to iu trong mt danh b LDAP mi, dng thng tin t danh "
+"b LDAP gc ca bn. Nhng tp tin danh b LDAP gc ca bn  c lu vo "
+"/var/backups. Kt qu ca vic nng cp  c l tp tin .ldif trong /var/"
+"backups. Trnh slapadd c l gp li cu hnh (trong trng hp y, trnh "
+"slapcat cng b li), hoc v gp li trong tp tin LDIF. Nu gp li trong "
+"tp tin LDIF th c l bn c th sa n, ri c li slapadd."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid "Slave databases require updateref option"
+msgstr "C s d liu ph cn thit ty chn updateref"
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"In your slapd configuration file at least one database is configured as "
+"slave, and the updateref option is not set. The updateref option specifies "
+"the referral(s) to pass back when slapd is asked to modify a replicated "
+"local database. See slapd.conf(5) for more details."
+msgstr ""
+"Trong tp tin cu hnh slapd ca bn, c t nht mt c s d liu c cu "
+"hnh l iu ph, nhng m cha lp ty chn updateref. Ty chn "
+"updateref ghi r thng tin cn tham chiu v khi yu cu trnh slapd sa "
+"i mt c s d liu a phng bn sao. Hy xem trang hng dn (man) "
+"slapd.conf(5)  tm chi tit."
+
+#. Type: note
+#. Description
+#: ../slapd.templates:170
+msgid ""
+"Starting with version 2.1.23, slapd requires the updateref option to be set "
+"on slaves. You should make sure to fix your slapd.conf configuration file."
+msgstr ""
+"T phin bn 2.1.23, trnh slapd cn thit ty chn updateref c lp "
+"trn mi iu ph. Bn nn kim tra  sa tp tin cu hnh bn."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid "Change backend type from LDBM to BDB?"
+msgstr "Thay i kiu hu phng t LDBM thnh BDB khng?"
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"The LDBM backend type has been deprecated in OpenLDAP 2.2 and has shown to "
+"not work well. BDB is the recommended choice of the OpenLDAP developers."
+msgstr ""
+"Kiu hu phng LDBM  b phn i trong OpenLDAP phin bn 2.2, v khng "
+"lm vic kh. BDB l s chn do lp trnh vin OpenLDAP khuyn khch."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"When using the BDB backend make sure you configure BDB properly. For "
+"information to do so, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+"Khi s dng hu phng BDB, bn hy kim tra  cu hnh BDB cho ng.  "
+"tm thng tin v cch y, hy xem tp tin /usr/share/doc/slapd/README."
+"DB_CONFIG.gz (cn gii nn trc)."
+
+#. Type: boolean
+#. Description
+#: ../slapd.templates:184
+msgid ""
+"If you enable this option an attempt will be made to update your  "
+"configuration to use BDB instead of LDBM and convert your databases."
+msgstr ""
+"Nu bn hiu lc ty chn ny, trnh ny s c nng cp cu hnh bn  dng "
+"BDB thay vo LDBM, v  chuyn i cc c s d liu ca bn."
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid "Database backend to use:"
+msgstr "Hu phng c s d liu cn dng:"
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend is the recommended choice of the OpenLDAP developers while "
+"support of the old LDBM backend is phasing out. When using the BDB backend "
+"make sure that you configure the underlying database for your requirements. "
+"Look into /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+"Trong khi thi dn dn khng h tr hu phng LDBM c, lp trnh vin "
+"OpenLDAP khuyn khch bn s dng hu phng loi BDB. Khi s dng hu "
+"phng BDB, bn hy kim tra  cu hnh c s d liu c bn mt cch thch "
+"hp vi s cn ca bn. Hy tham chiu n tp tin /usr/share/doc/slapd/"
+"README.DB_CONFIG.gz"
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"HDB is the next generation of BDB which might replace it sometime in  the "
+"future. There are some problems still in the HDB code of the 2.2 series of "
+"OpenLDAP so you should probably stick to BDB until version 2.3."
+msgstr ""
+"HDB l th h k tip ca BDB, m c l s thay th n trong tng lai. Vn "
+"cn c mt s li trong m OpenLDAP lot phin bn 2.2, th rt c th l "
+"bn nn tip tc s dng BDB cho n khi pht hnh phin bn 2.3."
+
+#. Type: select
+#. Description
+#: ../slapd.templates:198
+msgid ""
+"The BDB backend (back-bdb) and LDBM backend (back-ldbm) are comparable in "
+"purpose and back-bdb evolved from experience gained from back-ldbm, but the "
+"two are quite distinct today. They both store entries based on a 32-bit "
+"entry ID key, and they use a dn2id table to map from DNs to entry IDs. They "
+"both perform attribute indexing using the same code, and store index data as "
+"lists of entry IDs. As such, the LDAP-specific features they offer are "
+"nearly identical. The differences are in the APIs used to implement the "
+"databases. back-ldbm uses a generic database API that can plug into several "
+"different database packages. In Debian, it's built against BerkeleyDB (BDB). "
+"While BerkeleyDB supports this generic interface, it also offers a much "
+"richer API that has a lot more power and a lot more complexity. back-bdb is "
+"written specifically for the full BDB API, and uses some of BDB's more "
+"advanced features to offer transaction processing, fine grained locking, and "
+"other features that offer improved concurrency and reliability. For more "
+"information, see /usr/share/doc/slapd/README.DB_CONFIG.gz"
+msgstr ""
+"C hu phng BDB (back-bdb) ln hu phng LDBM (back-ldbm) u c mc ch "
+"tng t, v back-bdb  tin ha khi thu c kinh nghim t back-ldbm, "
+"nhng m hin thi hai iu l hi khc bit. C hai hu phng ct gi mc "
+"ghi a vo mt kha thng tin vo 32.bit, v dng mt bng dn2id  nh "
+"x t tn min n ID vo. C hai iu ch mc thuc tnh dng cng mt b "
+"m, v ct gi d liu ch mc l mt danh sch ID vo. Trong nhng cch "
+"ny, hai hu phng gn trng. Tuy nhin, mi hu phng dng mt API khc "
+" thc hin c s d liu. back-ldbm dng mt API c s d liu chung chung "
+"m c th cm pht vo vi gi tin c s d liu khc nhau. Trong Debian, "
+"n c xy dng vi BerkeleyDB (BDB). D BerkeleyDB c h tr giao din "
+"chung chung ny, n cng cung cp mt API nhiu phong ph hn m rt nhiu "
+"mnh v phc tp hn. back-db c vit c trng cho ton API BDB, v dng "
+"mt s tnh nng cp cao hn ca BDB  cung cp cch x l giao tc, cch "
+"kha chnh xc v tnh nng khc cung cp cch ng qui v cch tin cy  "
+"tin b.  tm thng tin thm, hy xem tp tin /usr/share/doc/slapd/README."
+"DB_CONFIG.gz (cn gii nn trc)."
diff -urN openldap-2.3.35/debian/README.DB_CONFIG openldap-2.3.35_new/debian/README.DB_CONFIG
--- openldap-2.3.35/debian/README.DB_CONFIG	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/README.DB_CONFIG	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,181 @@
+For good performance using the BDB backend, a good DB_CONFIG file in the
+database directory (usually /var/lib/ldap) is crucial. The following two
+articles should help you to determine a good configuration for your 
+requirements. A standard DB_CONFIG is installed but it may not be adequate
+for your system.
+
+Note that changes to DB_CONFIG will only have any effect after (re-)creating
+the Berkeley DB environment which means that you have either to run 
+db_recover or dump and reload your data. db_recover -eh /var/lib/ldap
+should do the trick.
+
+ -- Torsten Landschoff <torsten@debian.org>  Sun, 29 May 2005 18:08:10 +0200
+
+
+How do I configure the BDB backend?
+-----------------------------------
+(Taken from http://www.openldap.org/faq/data/cache/893.html, author unknown)
+
+The BDB backend ("back-bdb") uses a lot of special features of Sleepycat's
+Berkeley DB library, and there are a lot of details that must be set correctly
+to get the best results from it. Even though the LDBM backend ("back-ldbm") can
+use the BerkeleyDB library, the BDB and LDBM backends have some very important
+differences, as already noted in (Xref) What are the different backends? What
+are their differences?.
+
+Because back-bdb is transaction-based and uses write-ahead logging to ensure
+data consistency, it has much heavier I/O demands than back-ldbm. Also, the
+transaction log files accumulate as data is written to the directory, and these
+log files must be cleaned out periodically. Otherwise the log files will
+consume enormous amounts of disk space. The cleanup procedures are described in
+(Xref) How to maintain Berkeley DB (logs etc.) ?.
+
+The information needed to fully understand things and to properly configure
+back-bdb is divided among the slapd-bdb(5) manual page and the SleepyCat
+BerkeleyDB documentation (http://www.sleepycat.com/docs/).
+
+You should read the entire slapd-bdb(5) manpage before proceeding. The only
+mandatory keyword is "directory" for setting the location of the database
+files. The other keywords control tradeoffs between data reliability,
+performance, and memory use. To ensure that committed transactions actually get
+flushed to disk, you should use the "checkpoint" keyword, otherwise your data
+is vulnerable to loss due to system failures. See the SleepyCat documentation
+for more information about checkpoints. (In fact, you should read all of
+chapter 9 "Berkeley DB Transactional Data Store Applications" in the SleepyCat
+reference manual. At least, read sections 1-3 and 13-24.)
+
+The "dbnosync" keyword is provided for compatibility with back-ldbm; the
+preferred method of setting this is to use the BDB DB_CONFIG file option
+set_flags DB_TXN_NOSYNC. The "lockdetect" keyword is also deprecated, you
+should instead use the BDB DB_CONFIG file set_lk_detect keyword. (It's safe to
+leave this at the default setting.)
+
+A number of important items must be configured in the BDB DB_CONFIG file and
+not in slapd.conf. You should, at least, read about these items:
+
+set_cachesize
+    The BDB library maintains its own cache separate from the back-bdb entry
+    cache. You must set this cache to a size appropriate for your database and
+    physical memory size. Note that this is a persistent setting - after you
+    set it the first time, further changes will be ignored until you recreate
+    the environment using db_recover. 
+set_lg_dir
+    Set the directory for storing transaction logs. For best performance,
+    the transaction logs must be located on a different physical disk from
+    the database files. 
+set_lg_bsize
+    Set the buffer size for the transaction log. Larger is better, but it
+    doesn't have much effect unless you're also using the DB_TXN_NOSYNC
+    option. With a default log file size of 10MB I usually set this to 2MB.
+    The default is only 32K, which is too small for back-bdb. 
+
+On a very busy system you might see error messages talking about running out of
+locks, lockers, or lock objects. Usually the default values are plenty, and in
+older versions of the BDB library the errors were more likely due to library
+bugs than actual system load. However, it is possible that you have actually
+run out of lock resources due to heavy system usage. If this happens, you
+should read about the set_lk_max_lockers, set_lk_max_locks, and
+set_lk_max_objects keywords. 
+
+How do I determine the proper BDB/HDB database cache size?
+----------------------------------------------------------
+(Taken from http://www.openldap.org/faq/data/cache/1075.html, written by 
+hyc@openldap.org, Kurt@OpenLDAP.org)
+
+Not having a proper database cache size will cause performance issues. (Note:
+in older versions of Berkeley DB, an improper database case size could also
+cause the server to hang.)
+
+These issues are not an indication of corruption occurring in the database. It
+is merely the fact that the cache is thrashing itself that causes
+performance/response time to slowdown. If you take the time to read and
+understand the Berkeley DB documentation, measure the library performance using
+db_stat, and tune your settings, you will avoid these problems.
+
+It is not absolutely necessary to configure a BerkeleyDB cache equal in size to
+your entire database. All that you need is a cache that's large enough for your
+"working set." That means, large enough to hold all of the most frequently
+accessed data, plus a few less-frequently accessed items.
+
+You should really read the BDB documentation referenced above, but let me spell
+out what that really means here, in detail. The discussion here is focused on
+back-bdb and back-hdb, but most of it also applies to back-ldbm when using
+BerkeleyDB as the underlying database engine.
+
+Start with the most obvious - the back-bdb database lives in two main files,
+dn2id.bdb and id2entry.bdb. These are B-tree databases. We have never
+documented the back-bdb internal layout before, because it didn't seem like
+something anyone should have to worry about, nor was it necessarily cast in
+stone. But here's how it works today, in OpenLDAP 2.1 and 2.2. (All of the
+database files in back-ldbm are B-trees by default.)
+
+A B-tree is a balanced tree; it stores data in its leaf nodes and bookkeeping
+data in its interior nodes. (If you don't know what tree data structures look
+like in general, Google for some references, because that's getting far too
+elementary for the purposes of this discussion.)
+
+For decent performance, you need enough cache memory to contain all the nodes
+along the path from the root of the tree down to the particular data item
+you're accessing. That's enough cache for a single search. For the general
+case, you want enough cache to contain all the internal nodes in the database.
+"db_stat -d" will tell you how many internal pages are present in a database.
+You should check this number for both dn2id and id2entry.
+
+Also note that id2entry always uses 16KB per "page", while dn2id uses whatever
+the underlying filesystem uses, typically 4 or 8KB. To avoid thrashing the
+cache and triggering these infinite hang bugs in BDB 4.1.25, your cache must be
+at least as large as the number of internal pages in both the dn2id and
+id2entry databases, plus some extra space to accomodate the actual leaf data
+pages.
+
+For example, in my OpenLDAP 2.2 test database, I have an input LDIF file that's
+about 360MB. With the back-hdb backend this creates a dn2id.bdb that's 68MB,
+and an id2entry that's 800MB. db_stat tells me that dn2id uses 4KB pages, has
+433 internal pages, and 6378 leaf pages. The id2entry uses 16KB pages, has 52
+internal pages, and 45912 leaf pages. In order to efficiently retrieve any
+single entry in this database, the cache should be at least
+
+(433+1) * 4KB + (52+1) * 16KB in size: 1736KB + 848KB =~ 2.5MB.
+
+This doesn't take into account other library overhead, so this is even lower
+than the barest minimum. The default cache size, when nothing is configured, is
+only 256KB. If you tried to do much of anything with this database and only
+default settings, BDB 4.1.25 would lock up in an infinite loop.
+
+This 2.5MB number also doesn't take indexing into account. Each indexed
+attribute uses another database file of its own, using a Hash structure.
+(Again, in back-ldbm, the indexes also use B-trees by default, so this part of
+the discussion doesn't apply unless back-ldbm was explicitly compiled to use
+Hashes instead. Also, in OpenLDAP 2.2 onward, all of the indexes use B-trees,
+there are no more Hash database files. So just use the B-tree information above
+and ignore this Hash discussion.)
+
+Unlike the B-trees, where you only need to touch one data page to find an entry
+of interest, doing an index lookup generally touches multiple keys, and the
+point of a hash structure is that the keys are evenly distributed across the
+data space. That means there's no convenient compact subset of the database
+that you can keep in the cache to insure quick operation, you can pretty much
+expect references to be scattered across the whole thing. My strategy here
+would be to provide enough cache for at least 50% of all of the hash data.
+(Number of hash buckets + number of overflow pages + number of duplicate pages)
+* page size / 2.
+
+The objectClass index for my example database is 5.9MB and uses 3 hash buckets
+and 656 duplicate pages. So ( 3 + 656 ) * 4KB / 2 =~ 1.3MB.
+
+With only this index enabled, I'd figure at least a 4MB cache for this backend.
+(Of course you're using a single cache shared among all of the database files,
+so the cache pages will most likely get used for something other than what you
+accounted for, but this gives you a fighting chance.)
+
+With this 4MB cache I can slapcat this entire database on my 1.3GHz PIII in 1
+minute, 40 seconds. With the cache doubled to 8MB, it still takes the same
+1:40s. Once you've got enough cache to fit the B-tree internal pages,
+increasing it further won't have any effect until the cache really is large
+enough to hold 100% of the data pages. I don't have enough free RAM to hold all
+the 800MB id2entry data, so 4MB is good enough.
+
+With back-bdb and back-hdb you can use "db_stat -m" to check how well the
+database cache is performing. Unfortunately you can't do this with back-ldbm,
+as the statistics are not accessible when slapd is running, nor are they saved
+anywhere when slapd is stopped. (Yet another reason not to use back-ldbm.) 
diff -urN openldap-2.3.35/debian/rules openldap-2.3.35_new/debian/rules
--- openldap-2.3.35/debian/rules	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/rules	2007-04-12 17:40:21.000000000 -0300
@@ -0,0 +1,117 @@
+#!/usr/bin/make -f
+
+export DH_COMPAT = 4
+
+CFLAGS = -Wall -g -D_FILE_OFFSET_BITS=64
+INSTALL = install
+INSTALL_FILE    = $(INSTALL) -p    -o root -g root  -m  644
+INSTALL_PROGRAM = $(INSTALL) -p    -o root -g root  -m  755
+INSTALL_SCRIPT  = $(INSTALL) -p    -o root -g root  -m  755
+INSTALL_DIR     = $(INSTALL) -p -d -o root -g root  -m  755
+
+ifneq (,$(findstring noopt,$(DEB_BUILD_OPTIONS)))
+CFLAGS += -O0
+else
+CFLAGS += -O2
+endif
+ifeq (,$(findstring nostrip,$(DEB_BUILD_OPTIONS)))
+INSTALL_PROGRAM += -s
+endif
+
+CONFIG	      = $(shell grep -v "^\#" debian/configure.options)
+
+rootdir		:= $(shell pwd)
+installdir	:= $(rootdir)/debian/install
+tmpdir		:= $(rootdir)/debian/tmp
+builddir	:= $(rootdir)/debian/build
+
+MAKEVARS	:= DESTDIR=$(installdir)
+
+$(builddir)/Makefile:
+	mkdir -p $(builddir)
+	cd $(builddir) && CFLAGS="$(CFLAGS)" $(rootdir)/configure \
+		$(CONFIG) 
+	perl debian/check_config
+	$(MAKE) -C $(builddir) depend
+
+build: build-stamp
+build-stamp: $(builddir)/Makefile
+	$(MAKE) -C $(builddir) $(MAKEVARS)
+	touch $@
+
+install: install-stamp
+install-stamp: build-stamp
+	$(MAKE) -C $(builddir) $(MAKEVARS) install
+	# Upstream installs schema files in mode 0444 - policy wants 0644
+	find $(installdir)/etc -type f|xargs chmod 0644
+	# Upstream manpages are section 8C but installed as section 8
+	find $(installdir)/usr/share/man -name \*.8 \
+		| xargs perl -pi -e 's#(\.TH \w+ 8)C#$$1#'
+	touch $@
+
+
+binary: binary-arch 
+
+binary-indep: 
+	dh_testdir
+	dh_testroot
+	dh_clean -k
+
+	dh_installdirs -i
+	sh debian/copy_slapd_dev_files
+	dh_installchangelogs -i
+	dh_installdocs -i
+	dh_installdebconf -i
+	dh_installdeb -i
+	dh_compress -i
+	dh_gencontrol -i
+	dh_md5sums -i
+	dh_builddeb -i
+
+binary-arch: install-stamp
+	dh_testdir
+	dh_testroot
+	dh_clean -k
+
+	dh_installdirs -a
+	cp -al $(installdir) $(tmpdir)
+	sh debian/move_files
+
+	dh_installchangelogs -a
+	dh_installdocs -a
+	dh_installexamples -a
+	dh_installinit -Xslapd.prerm -a -- "defaults 19 80"
+	dh_installdebconf -a
+	# when using OpenSSL, we do not need to add crontab entries
+	#dh_installcron -a
+	dh_strip -a
+	dh_link -a
+	dh_compress -a
+	dh_fixperms -a
+	dh_makeshlibs -plibldap2.3
+	dh_installdeb -a
+	perl -w debian/dh_installscripts-common -p slapd
+	dh_shlibdeps -a -l$(installdir)/usr/lib
+	dh_gencontrol -a
+	dh_md5sums -a
+	dh_builddeb -a
+
+clean:
+	dh_testdir
+	dh_testroot
+	# Update translation templates for debconf
+	debconf-updatepo
+	# Update config.guess and config.sub
+	if [ -e /usr/share/misc/config.sub ]; then \
+	  rm build/config.sub build/config.guess; \
+	  cp -f /usr/share/misc/config.* build/; \
+	  rm contrib/ldapc++/config.sub contrib/ldapc++/config.guess; \
+	  cp -f /usr/share/misc/config.* contrib/ldapc++/; \
+	fi
+	rm -f install-stamp build-stamp
+	rm -rf $(builddir) $(builddir_notls) $(installdir)
+
+	dh_clean
+
+.PHONY: binary binary-arch binary-indep build clean
+
diff -urN openldap-2.3.35/debian/slapd.conf openldap-2.3.35_new/debian/slapd.conf
--- openldap-2.3.35/debian/slapd.conf	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.conf	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,116 @@
+# This is the main slapd configuration file. See slapd.conf(5) for more
+# info on the configuration options.
+
+#######################################################################
+# Global Directives:
+
+# Features to permit
+#allow bind_v2
+
+# Schema and objectClass definitions
+include         /etc/ldap/schema/core.schema
+include         /etc/ldap/schema/cosine.schema
+include         /etc/ldap/schema/nis.schema
+include         /etc/ldap/schema/inetorgperson.schema
+
+# Schema check allows for forcing entries to
+# match schemas for their objectClasses's
+schemacheck     on
+
+# Where the pid file is put. The init.d script
+# will not stop the server if you change this.
+pidfile         /var/run/slapd/slapd.pid
+
+# List of arguments that were passed to the server
+argsfile        /var/run/slapd.args
+
+# Read slapd.conf(5) for possible values
+loglevel        0
+
+# Where the dynamically loaded modules are stored
+modulepath	/usr/lib/ldap
+moduleload	back_@BACKEND@
+
+#######################################################################
+# SSL:
+# Uncomment the following lines to enable SSL and use the default
+# snakeoil certificates.
+#TLSCertificateFile      /etc/ssl/certs/ssl-cert-snakeoil.pem
+#TLSCertificateKeyFile   /etc/ssl/private/ssl-cert-snakeoil.key
+
+#######################################################################
+# Specific Backend Directives for @BACKEND@:
+# Backend specific directives apply to this backend until another
+# 'backend' directive occurs
+backend		@BACKEND@
+@CHECKPOINT@
+
+#######################################################################
+# Specific Backend Directives for 'other':
+# Backend specific directives apply to this backend until another
+# 'backend' directive occurs
+#backend		<other>
+
+#######################################################################
+# Specific Directives for database #1, of type @BACKEND@:
+# Database specific directives apply to this databasse until another
+# 'database' directive occurs
+database        @BACKEND@
+
+# The base of your directory in database #1
+suffix          "@SUFFIX@"
+
+# Where the database file are physically stored for database #1
+directory       "/var/lib/ldap"
+
+# Indexing options for database #1
+index           objectClass eq
+
+# Save the time that the entry gets modified, for database #1
+lastmod         on
+
+# Where to store the replica logs for database #1
+# replogfile	/var/lib/ldap/replog
+
+# The userPassword by default can be changed
+# by the entry owning it if they are authenticated.
+# Others should not be able to see it, except the
+# admin entry below
+# These access lines apply to database #1 only
+access to attrs=userPassword
+        by dn="@ADMIN@" write
+        by anonymous auth
+        by self write
+        by * none
+
+# Ensure read access to the base for things like
+# supportedSASLMechanisms.  Without this you may
+# have problems with SASL not knowing what
+# mechanisms are available and the like.
+# Note that this is covered by the 'access to *'
+# ACL below too but if you change that as people
+# are wont to do you'll still need this if you
+# want SASL (and possible other things) to work 
+# happily.
+access to dn.base="" by * read
+
+# The admin dn has full write access, everyone else
+# can read everything.
+access to *
+        by dn="@ADMIN@" write
+        by * read
+
+# For Netscape Roaming support, each user gets a roaming
+# profile for which they have write access to
+#access to dn=".*,ou=Roaming,o=morsnet"
+#        by dn="@ADMIN@" write
+#        by dnattr=owner write
+
+#######################################################################
+# Specific Directives for database #2, of type 'other' (can be @BACKEND@ too):
+# Database specific directives apply to this databasse until another
+# 'database' directive occurs
+#database        <other>
+
+# The base of your directory for database #2
+#suffix		"dc=debian,dc=org"
diff -urN openldap-2.3.35/debian/slapd.config openldap-2.3.35_new/debian/slapd.config
--- openldap-2.3.35/debian/slapd.config	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.config	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,50 @@
+#! /bin/sh
+
+set -e
+
+# Load debconf
+. /usr/share/debconf/confmodule
+
+# This will be replaced with debian/slapd.scripts-common which includes
+# various helper functions and $OLD_VERSION and $SLAPD_CONF
+#SCRIPTSCOMMON#
+
+# Create an initial directory on fresh install
+if is_initial_configuration "$@"; then
+  if ! manual_configuration_wanted; then
+    set_defaults_for_unseen_entries
+    query_initial_config
+    crypt_admin_pass
+  fi
+fi
+
+# Configure the dumping component if we are upgrading some older version
+if [ "$1" = configure ] && [ -n "$2" ]; then
+	configure_ldbm_to_bdb_migration
+	configure_dumping
+fi
+   
+# On upgrade from pre-2.1 we have to ask if we shall fix the config file (if
+# it exists anyway).
+if previous_version_older 2.1; then
+  if [ -e "$SLAPD_CONF" ]; then
+    db_input medium slapd/autoconf_modules || true
+    db_go || true
+  fi
+fi
+
+# Since version 2.1.23, slapd requires slave databases to have the updateref
+# option set
+if [ -e "$SLAPD_CONF" ]; then
+  if slave_databases_without_updateref; then
+    db_input critical slapd/slave_databases_require_updateref || true
+    db_go || true
+  fi
+fi
+
+# Ask if the user would like their package to support LDAPv2..
+# This was the default in older versions but we want to ask
+# for new installs too in case the user needs it..
+db_input medium slapd/allow_ldap_v2 || true
+db_go || true
+db_stop || true
diff -urN openldap-2.3.35/debian/slapd.cron.daily openldap-2.3.35_new/debian/slapd.cron.daily
--- openldap-2.3.35/debian/slapd.cron.daily	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.cron.daily	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,3 @@
+#!/bin/sh -e
+
+rm -f /var/run/slapd/params_cache_dh /var/run/slapd/params_cache_rsa
diff -urN openldap-2.3.35/debian/slapd.default openldap-2.3.35_new/debian/slapd.default
--- openldap-2.3.35/debian/slapd.default	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.default	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,33 @@
+# Default location of the slapd.conf file
+SLAPD_CONF=
+
+# System account to run the slapd server under. If empty the server
+# will run as root.
+SLAPD_USER=
+
+# System group to run the slapd server under. If empty the server will
+# run in the primary group of its user.
+SLAPD_GROUP=
+
+# Path to the pid file of the slapd server. If not set the init.d script
+# will try to figure it out from $SLAPD_CONF (/etc/ldap/slapd.conf)
+SLAPD_PIDFILE=
+
+# Configure if db_recover should be called before starting slapd
+TRY_BDB_RECOVERY=yes
+
+# Configure if the slurpd daemon should be started. Possible values: 
+# - yes:   Always start slurpd
+# - no:    Never start slurpd
+# - auto:  Start slurpd if a replica option is found in slapd.conf (default)
+SLURPD_START=auto
+
+# slapd normally serves ldap only on all TCP-ports 389. slapd can also
+# service requests on TCP-port 636 (ldaps) and requests via unix
+# sockets.
+# Example usage:
+# SLAPD_SERVICES="ldap://127.0.0.1:389/ ldaps:/// ldapi:///"
+
+# Additional options to pass to slapd and slurpd
+SLAPD_OPTIONS=""
+SLURPD_OPTIONS=""
diff -urN openldap-2.3.35/debian/slapd.dirs openldap-2.3.35_new/debian/slapd.dirs
--- openldap-2.3.35/debian/slapd.dirs	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.dirs	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,5 @@
+var/lib/ldap
+var/spool/slurpd
+var/lib/slapd
+var/run/slapd
+usr/share/slapd
diff -urN openldap-2.3.35/debian/slapd.docs openldap-2.3.35_new/debian/slapd.docs
--- openldap-2.3.35/debian/slapd.docs	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.docs	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1 @@
+debian/README.DB_CONFIG
diff -urN openldap-2.3.35/debian/slapd.init openldap-2.3.35_new/debian/slapd.init
--- openldap-2.3.35/debian/slapd.init	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.init	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,274 @@
+#! /bin/sh
+
+# Kill me on all errors
+set -e
+
+# Stop processing if slapd is not there
+[ -x /usr/sbin/slapd ] || exit 0
+
+# Set default values
+DB_RECOVER_CMD=db4.2_recover
+
+# Source the init script configuration
+if [ -f "/etc/default/slapd" ]; then
+	. /etc/default/slapd
+fi
+
+if [ ! -d /var/run/slapd ]; then
+	mkdir /var/run/slapd
+fi
+
+# Load the default location of the slapd config file
+if [ -z "$SLAPD_CONF" ]; then
+	SLAPD_CONF="/etc/ldap/slapd.conf"
+else
+	SLAPD_OPTIONS="-f $SLAPD_CONF $SLAPD_OPTIONS"
+	SLURPD_OPTIONS="-f $SLAPD_CONF $SLURPD_OPTIONS"
+fi
+
+# Stop processing if the config file is not there
+if [ ! -r "$SLAPD_CONF" ]; then
+  cat <<EOF >&2
+No configuration file was found for slapd at $SLAPD_CONF.
+If you have moved the slapd configuration file please modify
+/etc/default/slapd to reflect this.  If you chose to not
+configure slapd during installation then you need to do so
+prior to attempting to start slapd.
+An example slapd.conf is in /usr/share/slapd
+EOF
+  exit 0 # Should this be 1?
+fi
+
+# Figure out some default settings
+# Check wether slurpd should get started
+if [ "$SLURPD_START" != "yes" ] && [ "$SLURPD_START" != "no" ]; then
+	if grep -q '^replica' "$SLAPD_CONF" > /dev/null 2>&1 ; then
+		SLURPD_START=yes
+	else
+		SLURPD_START=no
+	fi
+fi
+	
+# Find out the name of slapd's pid file
+if [ -z "$SLAPD_PIDFILE" ]; then
+	SLAPD_PIDFILE=`sed -ne 's/^pidfile[[:space:]]\+\(.\+\)/\1/p' \
+		"$SLAPD_CONF"`
+fi
+
+# XXX: Breaks upgrading if there is no pidfile (invoke-rc.d stop will fail)
+# -- Torsten
+if [ -z "$SLAPD_PIDFILE" ]; then
+	cat <<EOF >&2
+The pidfile for slapd is neither specified in "$SLAPD_CONF" nor
+in /etc/default/slapd. Consequently, slapd will not be started.
+EOF
+	exit 1
+fi
+
+# Pass the user and group to run under to slapd
+if [  "$SLAPD_USER" ]; then
+	SLAPD_OPTIONS="-u $SLAPD_USER $SLAPD_OPTIONS"
+fi
+
+if [ "$SLAPD_GROUP" ]; then
+	SLAPD_OPTIONS="-g $SLAPD_GROUP $SLAPD_OPTIONS"
+fi
+
+# Tell the user that something went wrong and give some hints for
+# resolving the problem.
+report_failure() {
+	if [ -n "$reason" ]; then
+		echo " - failed: "
+		echo "$reason"
+	else
+		echo " - failed."
+		cat <<EOF
+The operation failed but no output was produced. For hints on what went
+wrong please refer to the system's logfiles (e.g. /var/log/syslog) or
+try running the daemon in Debug mode like via "slapd -d 16383" (warning:
+this will create copious output).
+EOF
+
+		if [ -n "$SLURPD_OPTIONS" -o \
+		     -n "$SLAPD_OPTIONS" -o \
+		     -n "$SLAPD_SERVICES" ]; then
+			cat << EOF
+
+Below, you can find the command line options used by this script to 
+run slapd and slurpd. Do not forget to specify those options if you
+want to look to debugging output:
+EOF
+	                if [ -z "$SLAPD_SERVICES" ]; then
+				if [ -n "$SLAPD_OPTIONS" ]; then
+					echo "  slapd $SLAPD_OPTIONS"
+				fi
+                	else
+                        	echo "  slapd -h '$SLAPD_SERVICES' $SLAPD_OPTIONS"
+                	fi
+
+                	if [ "$SLURPD" = "yes" -a -n "$SLURPD_OPTIONS" ]; then
+                       		echo "  slurpd $SLURPD_OPTIONS"
+                	fi
+		fi
+	fi
+}
+
+# Try to recover slapd database
+try_fix_db() {
+	local dbdir failed bdb_envs
+
+	# db4.2-util is just recommended by slapd, so make sure it is
+	# available before trying to use it
+	if ! command -v $DB_RECOVER_CMD >/dev/null 2>&1; then
+		echo -n " ($DB_RECOVER_CMD not found), "
+		return 0
+	fi
+
+	bdb_envs=`find_bdb_envs`
+
+	# We care only about BDB environments
+	if [ -z "$bdb_envs" ]; then
+		return 0
+	fi
+
+	# Make sure there is no slapcat and no slapd running as we might
+	# break the DB in that case
+	if pidof /usr/lib/slapd >/dev/null; then
+		echo -n " (slapd running, no recovery), "
+		return 0
+	fi
+
+	echo -n " running BDB recovery"
+	for dbdir in $bdb_envs; do
+		do_db_recover $dbdir
+	done
+	echo -n ","
+}
+
+# Run db_recover for the BDB environment in given directory and set $reason
+# on error
+do_db_recover() {
+	local dbdir
+	dbdir="$1"
+	if [  "$SLAPD_USER" ]; then
+		reason=`su "$SLAPD_USER" -s /bin/sh -c \
+			"$DB_RECOVER_CMD -eh $dbdir" 2>&1` || \
+			db_recover_failed $dbdir
+	else
+		reason=`$DB_RECOVER_CMD -eh $dbdir 2>&1` || \
+			db_recover_failed $dbdir
+	fi
+}
+
+# Find bdb environment dirs
+find_bdb_envs() {
+	local d
+	for d in `sed -ne 's/^directory[[:space:]]\+"*\([^"]\+\).*/\1/p' \
+			< "$SLAPD_CONF"`; do
+		if [ -d "$d" -a -f "$d/objectClass.bdb" ]; then
+			echo $d
+		fi
+	done
+}
+
+# Inform the user that BDB recovery failed
+db_recover_failed() {
+	local dbdir
+	dbdir="$1"
+
+	reason="`cat <<EOF
+Automatic recovery of the OpenLDAP directory database in
+
+	$dbdir
+
+failed. You will need to perform a manual recovery, possibly from backup.
+The failed command was $DB_RECOVER_CMD -eh $dbdir. Output:
+
+$reason
+EOF`"
+	exit 1
+}
+
+# Start the slapd daemon and capture the error message if any to 
+# $reason.
+start_slapd() {
+	echo -n " slapd"
+	if [ -z "$SLAPD_SERVICES" ]; then
+		reason="`start-stop-daemon --start --quiet --oknodo \
+			--pidfile "$SLAPD_PIDFILE" \
+			--exec /usr/sbin/slapd -- $SLAPD_OPTIONS 2>&1`"
+	else
+		reason="`start-stop-daemon --start --quiet --oknodo \
+			--pidfile "$SLAPD_PIDFILE" \
+			--exec /usr/sbin/slapd -- -h "$SLAPD_SERVICES" $SLAPD_OPTIONS 2>&1`"
+	fi
+}
+
+# Start the slurpd daemon and capture the error message if any to
+# $reason.
+start_slurpd() {
+	if [ "$SLURPD_START" != yes ]; then
+		return 0
+	fi
+	echo -n " slurpd"
+	reason="`start-stop-daemon --start --quiet --oknodo \
+		--exec /usr/sbin/slurpd -- $SLURPD_OPTIONS 2>&1`"
+}
+
+# Stop the slapd daemon and capture the error message (if any) to
+# $reason.
+stop_slapd() {
+	echo -n " slapd"
+	reason="`start-stop-daemon --stop --quiet --oknodo --retry 10 \
+		--pidfile "$SLAPD_PIDFILE" \
+		--exec /usr/sbin/slapd 2>&1`"
+}
+
+# Stop the slurpd daemon and capture the error message (if any) to
+# $reason.
+stop_slurpd() {
+	if [ "$SLURPD_START" != yes ]; then
+		return 0
+	fi
+	echo -n " slurpd"
+	reason="`start-stop-daemon --stop --quiet --oknodo --retry 10 \
+		--exec /usr/sbin/slurpd 2>&1`"
+}
+
+# Start the OpenLDAP daemons
+start() {
+	echo -n "Starting OpenLDAP:"
+	trap 'report_failure' 0
+	if [ "$TRY_BDB_RECOVERY" = "yes" ]; then
+		try_fix_db
+	fi
+	start_slapd
+	start_slurpd
+	trap "-" 0
+	echo .
+}
+
+# Stop the OpenLDAP daemons
+stop() {
+	echo -n "Stopping OpenLDAP:"
+	trap 'report_failure' 0
+	stop_slurpd
+	stop_slapd
+	trap "-" 0
+	echo .
+}
+
+case "$1" in
+  start)
+  	start ;;
+  stop)
+  	stop ;;
+  restart|force-reload)
+  	stop
+	start
+	;;
+  *)
+  	echo "Usage: $0 {start|stop|restart|force-reload}"
+	exit 1
+	;;
+esac
diff -urN openldap-2.3.35/debian/slapd.links openldap-2.3.35_new/debian/slapd.links
--- openldap-2.3.35/debian/slapd.links	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.links	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,2 @@
+usr/share/slapd/DB_CONFIG	usr/share/doc/slapd/examples/DB_CONFIG
+usr/share/slapd/slapd.conf	usr/share/doc/slapd/examples/slapd.conf
diff -urN openldap-2.3.35/debian/slapd.postinst openldap-2.3.35_new/debian/slapd.postinst
--- openldap-2.3.35/debian/slapd.postinst	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.postinst	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,66 @@
+#! /bin/sh 
+
+set -e
+
+. /usr/share/debconf/confmodule
+
+# This will be replaced with debian/slapd.scripts-common which includes
+# various helper functions and $OLD_VERSION and $SLAPD_CONF
+#SCRIPTSCOMMON#
+
+postinst_initial_configuration() {					# {{{
+# Configure slapd for the first time (when first installed)
+# Usage: postinst_initial_configuration
+
+	if manual_configuration_wanted; then
+		echo "  Omitting slapd configuration as requested." >&2
+	else
+		create_new_configuration
+		configure_v2_protocol_support
+	fi
+}
+
+# }}}
+postinst_upgrade_configuration() {					# {{{
+# Handle upgrading slapd from some older version
+# Usage: postinst_upgrade_configuration
+
+	# Better back up the config file in any case
+	echo -n "  Backing up $SLAPD_CONF in `database_dumping_destdir`... " >&2
+	backup_config_once
+	echo done. >&2
+
+	configure_v2_protocol_support
+	if previous_version_older 2.1; then
+		autoconfigure_modules
+	fi
+	update_access_config_directives
+
+	if database_format_changed; then
+		# During upgrading we have to load the old data
+		move_incompatible_databases_away
+		# Change the configuration if we want to migrate DBs
+		db_get slapd/migrate_ldbm_to_bdb
+		if [ "$RET" = "true" ]; then
+			config_migrate_backend ldbm bdb
+			# Make sure we don't dump the DB for migration 
+			# again...
+			db_set slapd/migrate_ldbm_to_bdb false
+		fi
+		load_databases
+	fi
+}
+
+# }}}
+
+if is_initial_configuration "$@"; then
+	postinst_initial_configuration
+else
+	postinst_upgrade_configuration
+fi
+
+db_stop || true
+
+#DEBHELPER#
+
+# vim: set sw=8 foldmethod=marker: 
diff -urN openldap-2.3.35/debian/slapd.postrm openldap-2.3.35_new/debian/slapd.postrm
--- openldap-2.3.35/debian/slapd.postrm	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.postrm	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,39 @@
+#!/bin/sh
+
+set -e
+
+# Load debconf if available (might have been removed before purging
+# slapd)
+
+if [ -e "/usr/share/debconf/confmodule" ]; then
+  . /usr/share/debconf/confmodule
+fi
+
+# Check if the user wants the database removed on purging slapd
+remove_database_on_purge() {
+  db_get slapd/purge_database || RET=false
+  if [ "$RET" = "true" ]; then
+    return 0
+  else
+    return 1
+  fi
+}
+
+if [ "$1" = "purge" ]; then
+  echo -n "Removing slapd configuration... "
+  rm -f /etc/ldap/slapd.conf 2>/dev/null || true
+  rmdir --ignore-fail-on-non-empty /etc/ldap/schema
+  echo done
+
+  echo -n "Removing maintainer script flag files... "
+  rm -f /var/lib/slapd/upgrade*
+  echo done
+
+  if remove_database_on_purge; then
+    echo -n "Purging OpenLDAP database... "
+    rm -rf /var/lib/ldap || true
+    echo done
+  fi
+fi
+
+#DEBHELPER#
diff -urN openldap-2.3.35/debian/slapd.preinst openldap-2.3.35_new/debian/slapd.preinst
--- openldap-2.3.35/debian/slapd.preinst	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.preinst	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,19 @@
+#! /bin/sh
+
+set -e
+
+. /usr/share/debconf/confmodule
+
+# This will be replaced with debian/slapd.scripts-common which includes
+# various helper functions and $OLD_VERSION and $SLAPD_CONF
+#SCRIPTSCOMMON#
+
+# If we are upgrading from an old version then stop slapd and attempt to
+# slapcat out the data so we can use it in postinst to do the upgrade
+
+if [ "$MODE" = upgrade ]; then
+	stop_slapd
+	dump_databases
+fi
+
+# vim: set sw=8 foldmethod=marker: 
diff -urN openldap-2.3.35/debian/slapd.prerm openldap-2.3.35_new/debian/slapd.prerm
--- openldap-2.3.35/debian/slapd.prerm	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.prerm	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,63 @@
+#!/bin/sh
+
+set -e
+
+# Work around bug introduced in 2.1.x, fixed in 2.1.22-2      		{{{
+
+# The slapd 2.1.x packages before 2.1.17-3 had a problem in the init.d
+# script. Namely if /etc/init.d/slapd stop was called and slapd was not
+# running, the init script failed with an error code. Problem is that 
+# the prerm called /etc/init.d/slapd stop which failed so the upgrade
+# breaks.  Same problem with slurpd, fixed in 2.1.22-2.
+#
+# dpkg calls the new prerm script if the old prerm failed so this is 
+# our chance to work around that problem by trying to kill slapd 
+# ourselves and ignoring the case that no slapd is running.
+#
+# Work around implemented by Stephen Frost, should go away one release
+# after sarge
+#
+# -- Torsten Landschoff <torsten@debian.org>  Fri, 25 Feb 2005 15:28:23 +0100
+
+if [ "$1" = "failed-upgrade"  ] \
+	&& dpkg --compare-versions "$2" -lt 2.1.22-2 \
+	&& dpkg --compare-versions "$2" -ge 2.1.0-1; then
+
+	# Source the init script configuration
+	if [ -f "/etc/default/slapd" ]; then
+		. /etc/default/slapd
+	fi
+
+	# Load the default location of the slapd config file
+	if [ -z "$SLAPD_CONF" ]; then
+		SLAPD_CONF="/etc/ldap/slapd.conf"
+	fi
+
+	# Find out the name of slapd's pid file
+	if [ -z "$SLAPD_PIDFILE" ] && [ -f "$SLAPD_CONF" ]; then
+		SLAPD_PIDFILE=`sed -ne 's/^pidfile[[:space:]]\+\(.\+\)/\1/p' \
+			"$SLAPD_CONF"`
+	fi
+
+	# Use the pidfile if it is there, if not then just do without
+	if [ -z "$SLAPD_PIDFILE" ]; then
+	        start-stop-daemon --stop --quiet --oknodo --retry 10 \
+			--exec /usr/sbin/slapd
+	else
+	        start-stop-daemon --stop --quiet --oknodo --retry 10 \
+			--pidfile \"$SLAPD_PIDFILE\" \
+			--exec /usr/sbin/slapd
+	fi
+
+	# Slurpd does not use a pidfile so just kill it via the exec
+	start-stop-daemon --stop --quiet --oknodo --retry 10 \
+		--exec /usr/sbin/slurpd
+
+	# Don't let debhelper try the same thing
+	exit
+fi
+# }}}
+
+#DEBHELPER#
+
+# vim: set foldmethod=marker:
diff -urN openldap-2.3.35/debian/slapd.README.Debian openldap-2.3.35_new/debian/slapd.README.Debian
--- openldap-2.3.35/debian/slapd.README.Debian	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.README.Debian	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,92 @@
+Notes about Debian's slapd package
+----------------------------------
+
+++ Using BDB/HDB backends
+   
+   slapd BDB and HDB backends rely on libdb to store data on your
+   disks. libdb uses a configuration file to tune database 
+   specific parameters. This file is called DB_CONFIG, and should
+   be created in each directory containing one of your ldap
+   databases, usually /var/lib/ldap. With libdb4.2 and previous
+   versions, and thus with slapd 2.2, it is _VERY IMPORTANT_ to 
+   correctly setup a DB_CONFIG file. 
+     It is not just a matter of performance: depending on the 
+   version of slapd and libdb being used, your slapd may just 
+   hang and stop answering queries. To correctly setup your 
+   DB_CONFIG file, please refer to README.DB_CONFIG.gz in this directory.
+
+++ Running slapd under a different uid/gid
+   
+   In order to run slapd under a different uid/gid, you
+   need to:
+   	- create the user/group for slapd/slurpd -- usually:
+		adduser --system --group ldap
+   	- stop slapd -- /etc/init.d/slapd stop
+	- tell slapd to run under a different uid:
+		- edit /etc/default/slapd
+		- set SLAPD_USER, SLAPD_GROUP
+		  (ie, SLAPD_USER="ldap", SLAPD_GROUP="ldap")
+	- tell linux slapd can access all database files -- usually:
+		chown -R ldap.ldap /var/lib/ldap
+	- tell linux slapd can access configuration files -- usually:
+		chgrp ldap /etc/ldap/slapd.conf
+		chmod 0640 /etc/ldap/slapd.conf
+	- start slapd -- /etc/init.d/slapd start
+
+   Once you have done so, if you are using a bdb o hdb backend,
+   always remember to execute the chown after running utilities
+   such as db4.x_recover or db4.x_checkpoint.
+
+++ When upgrading from OpenLDAP 2.0
+
+   Starting with OpenLDAP 2.1, backend modules are compiled as dynamically
+   loadable shared objects in Debian. As a consequence thereof, you need to
+   specify the path of the modules and the modules to load in your slapd.conf
+   file for now. This can be done by lines such as the following:
+   
+   modulepath      /usr/lib/ldap
+   moduleload      back_bdb
+   
+   for the BDB database backend module.
+
+   To switch the database backend, you should export your current database
+   in LDIF format with the slapcat command (be sure to stop slapd before
+   doing so if you're using LDBM), move the old database files away, change
+   /etc/ldap/slapd.conf, and then reimport your database from the LDIF file
+   via slapadd.
+
+++ TLS/SSL support
+
+   This version of the OpenLDAP server and its library is compiled with the
+   OpenSSL library as supported by the upstream sources. Other packages 
+   are not allowed to link against this version of OpenLDAP (or rather
+   its library) but this way we have a working OpenLDAP server. 
+
+   Client packages will have to continue using the old libldap2 package
+   for ldap access as that version is linked against GNUTLS to allow
+   for example dynamic linking into Samba. We are working on updating that
+   GNUTLS patch for OpenLDAP 2.2 and getting it into the upstream package. 
+
+   When that is accomplished the old libldap2 packages will disappear
+   and OpenLDAP 2.2 will be used together with GNUTLS in Debian.
+
+++ If slapd depends on other service (such as SQL)
+
+   In the event that you are running slapd with a different back-end module
+   that depends on other programs (such as an SQL database) you may need to
+   adjust the runlevels of slapd to start after the SQL database.
+
+++ Creating NSS flat files from LDAP
+
+   If you have need to create passwd/shadow/etc files from an LDAP
+   directory there is now a script included with these Debian packages
+   which may help you.  The script is in /usr/share/slapd/ and is named
+   'ldiftopasswd'.  In general you should be able to do:
+      ldapsearch | ldiftopasswd
+   and it will generate the files for you.  You will need appropriate
+   privileges, of course.
+
+ -- The Debian OpenLDAP maintainers
+     Torsten Landschoff <torsten@debian.org>
+     Roland Bauerschmidt <rb@debian.org>
+     Stephen Frost <sfrost@debian.org>
diff -urN openldap-2.3.35/debian/slapd.scripts-common openldap-2.3.35_new/debian/slapd.scripts-common
--- openldap-2.3.35/debian/slapd.scripts-common	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.scripts-common	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,1158 @@
+# This file can be included with #SCRIPTSCOMMON#
+
+
+# ===== Dumping and reloading using LDIF files =========================  {{{
+#
+# If incompatible changes are done to the database underlying a LDAP 
+# directory we need to dump the contents and reload the data into a newly
+# created database after the new server was installed. The following
+# functions deal with this functionality.
+
+
+# ----- Configuration of this component --------------------------------  {{{
+#
+# Dumping the database can have negative effects on the system we are
+# running on. If there is a lot of data dumping it might fill a partition
+# for example. Therefore we must give the user exact control over what we
+# are doing.
+
+configure_dumping() {							# {{{
+# Ask the user for the configuration of the dumping component
+# Usage: configure_dumping
+
+	# Configure if and where to dump the LDAP databases
+	db_input medium slapd/dump_database || true
+	db_go || true
+	db_get slapd/dump_database
+
+	# Abort if the user does not want dumping
+	if [ "$RET" = never ]; then
+		return 0
+	fi
+
+	db_input medium slapd/dump_database_destdir || true
+	db_go || true
+
+	# If the user entered the empty value, go back to the default
+	db_get slapd/dump_database_destdir 
+	if [ "$RET" = "" ]; then
+		db_reset slapd/dump_database_destdir
+	fi
+}
+
+# }}}
+configure_ldbm_to_bdb_migration() {					# {{{
+# If there are any LDBM databases in use we suggest to the user to migrate
+# to the more stable and better maintained BDB backend.
+# Usage: configure_ldbm_to_bdb_migration
+
+
+	if [ -e "$SLAPD_CONF" ] && grep -qE \
+			-e '^moduleload[[:space:]]+back_ldbm' \
+			-e '^(database|backend)[[:space:]]+ldbm' \
+			"$SLAPD_CONF"; then
+		db_input critical slapd/migrate_ldbm_to_bdb || true
+		db_go || true
+	else
+		# Nothing to migrate
+		db_set slapd/migrate_ldbm_to_bdb false
+	fi
+}
+# }}}
+database_dumping_enabled() {						# {{{
+# Check if the user has enabled database dumping for the current situation.
+# Return success if yes.
+# Usage: if database_dumping_enabled; then ... fi
+
+	db_get slapd/dump_database
+	case "$RET" in
+	always)
+		;;
+	"when needed")
+		database_format_changed || return 1
+		;;
+	never)
+		return 1
+		;;
+	*)
+		echo >&2 "Unknown value for slapd/dump_database: $RET"
+		echo >&2 "Please report!"
+		exit 1
+		;;
+	esac
+}
+
+# }}}
+database_format_changed() {						# {{{
+# Check if the database format has changed since the old installed version
+# Return success if yes.
+# Usage: if database_format_changed; then
+
+	db_get slapd/migrate_ldbm_to_bdb
+	if [ "$RET" = "true" ] || dpkg --compare-versions \
+			"$OLD_VERSION" lt-nl "2.2.23"; then
+		return 0
+	else
+		return 1
+	fi
+}
+
+# }}}
+database_dumping_destdir() {						# {{{
+# Figure out the directory we are dumping the database to and create it
+# if it does not exist.
+# Usage: destdir=`database_dumping_destdir`
+
+	local dir
+	db_get slapd/dump_database_destdir
+	dir=`echo "$RET"|sed -e "s/VERSION/$OLD_VERSION/"`
+	mkdir -p -m 700 "$dir"
+	echo $dir
+}
+
+# }}}
+configure_ldbm_to_bdb_transition() {					# {{{
+# The LDBM backend seems to be quite unusable with OpenLDAP 2.2. Therefore
+# we ask the user if he wants to switch to BDB which is the recommended
+# backend for 2.2.
+
+	if grep -q '^moduleload[[:space:]]\+back_ldbm' $SLAPD_CONF ||
+			grep -q '^database[[:space:]]\+ldbm' $SLAPD_CONF ||
+			grep -q '^backend[[:space:]]\+ldbm' $SLAPD_CONF; then
+		db_input critical slapd/convert_ldbm_to_bdb || true
+		db_go || true
+	else
+		db_set slapd/convert_ldbm_to_bdb false
+	fi
+}
+
+# }}}
+
+
+# }}}
+# ----- Dumping and loading the data ------------------------------------ {{{
+
+automatic_ldif_fixing_wanted_for() {					# {{{ 
+# Check if the user wants us to automatically fix the given LDIF file.
+# Usage: if automatic_ldif_fixing_wanted_for "$file"; then ...
+# XXX: Use debconf to configure this
+
+	local file size maxsize
+	file="$1"
+	size=`wc -c < "$file"`
+	maxsize=$((1024 * 1024 * 20))
+
+	if [ "$size" -lt "$maxsize" ]; then 
+		return 0
+	else
+		return 1
+	fi
+}
+
+# }}}
+corrective_ldif_filter() {						# {{{
+# Try to fix any errors found in an LDIF stream.
+# Usage: source | corrective_ldif_filter | target
+# XXX: Store the stderr output of the script somewhere.
+
+	/usr/share/slapd/fix_ldif -f 2>/dev/null
+}
+
+# }}}
+
+dump_databases() {							# {{{
+# If the user wants us to dump the databases they are dumped to the 
+# configured directory.
+	
+	local db suffix file dir failed
+
+	database_dumping_enabled || return 0
+
+	dir=`database_dumping_destdir`
+	echo >&2 "  Dumping to $dir: "
+	parse_configuration_file
+	for db in `get_database_list`; do
+		suffix=`get_suffix $db`
+		file="$dir/$suffix.ldif"
+		echo -n "  - directory $suffix... " >&2
+		slapcat -b "$suffix" > "$file" || failed=1
+		if [ "$failed" ]; then
+			rm -f "$file"
+			echo failed. >&2
+			exit 1
+		fi
+		echo "done." >&2
+	done
+}
+
+# }}}
+load_databases() {							# {{{
+	local dir file db dbdir backupdir
+
+	dir=`database_dumping_destdir`
+	echo >&2 "  Loading from $dir: "
+	parse_configuration_file
+	for db in `get_database_list`; do
+		suffix=`get_suffix $db`
+		dbdir=`get_directory $db`
+		if ! is_empty_dir "$dbdir"; then
+			echo >&2 \
+			  "  Directory $dbdir for $suffix not empty, aborting."
+			exit 1
+		fi
+
+		file="$dir/$suffix.ldif"
+		echo -n "  - directory $suffix... " >&2
+
+		# If there is an old DB_CONFIG file, restore it before
+		# running slapadd
+		backupdir=`compute_backup_path -n "$dbdir" "$suffix"`
+		if [ -e "$backupdir"/DB_CONFIG ]; then
+			cp -a "$backupdir"/DB_CONFIG "$dbdir"/
+		else
+			copy_example_DB_CONFIG "$dbdir"/
+		fi
+
+		capture_diagnostics slapadd -q -b "$suffix" -l "$file" \
+			|| failed=1
+		if [ "$failed" ] && \
+			  automatic_ldif_fixing_wanted_for "$file"; then
+			rm -f "$dbdir"/*
+			# If there is an old DB_CONFIG file, restore it 
+			# before running slapadd
+			if [ -e "$backupdir"/DB_CONFIG ]; then
+				cp -a "$backupdir"/DB_CONFIG "$dbdir"/
+			else
+				copy_example_DB_CONFIG "$dbdir"/
+			fi
+			failed=
+			echo -n "fixing" >&2
+			# This only works because we used capture_diag
+			# above already and the FD for the capture is 
+			# already assigned in the master shell. There 
+			# should be a cleaner way for this...
+			# -- Torsten
+			corrective_ldif_filter < "$file" \
+				| capture_diagnostics slapadd -q -b "$suffix" \
+				|| failed=1
+			echo -n ", " >&2
+		fi
+		if [ "$failed" ]; then
+			rm -f "$dbdir"/*
+			echo failed. >&2
+			echo >&2
+			cat <<-EOF
+	Loading the database from the LDIF dump failed with the following
+	error while running slapadd:
+EOF
+			release_diagnostics "    "
+			exit 1
+		fi
+		echo "done." >&2
+
+		if [ -n "$SLAPD_USER" -o -n "$SLAPD_GROUP" ]; then
+			echo -n "  - chowning database directory ($SLAPD_USER:$SLAPD_GROUP)... "
+			[ -z "$SLAPD_USER" ] || \
+				chown -R "$SLAPD_USER" "$dbdir"
+			[ -z "$SLAPD_GROUP" ] || \
+				chgrp -R "$SLAPD_GROUP" "$dbdir"
+			echo "done";
+		fi
+	done
+}
+
+# }}}
+move_incompatible_databases_away() {					# {{{
+	echo >&2 "  Moving old database directories to /var/backups:"
+	parse_configuration_file
+	for db in `get_database_list`; do
+		suffix=`get_suffix $db`
+		dbdir=`get_directory $db`
+		move_old_database_away "$dbdir" "$suffix"
+	done
+}
+
+# }}}
+# }}}
+# }}}
+
+# ===== Parsing the slapd configuration file ============================ {{{
+#
+# For some operations we have to know the slapd configuration. These 
+# functions are for parsing the slapd configuration file.
+
+merge_logical_lines() {							# {{{
+# slapd supports continuation lines in the slapd.conf. Continuation lines 
+# start with spaces and are merged with the preceding line. This function
+# uses perl to merge physical lines into logical lines as seen by the 
+# slapd config parser.
+# Usage: merge_logical_lines < input > output
+
+	perl -pe 'BEGIN { undef $/ }; s/\n(?!\n)\s+/ /g;' 
+}
+
+# }}}
+read_slapd_conf() {							# {{{
+# read slapd.conf file and evaluate include statements
+# FIXME: circular loops will cause this to block forever
+	merge_logical_lines | while read command data; do
+		if [ "$command" = "include" ]; then
+			file=`eval echo $data`
+			read_slapd_conf < $file
+		else
+			echo $command $data
+		fi
+	done
+}
+
+# }}}
+write_database_info() {							# {{{
+# Print out the information about one database
+# Usage: write_database_info <backend> <suffix> <directory>
+
+	local backend suffix directory
+	backend=$1
+	suffix=$2
+	directory=$3
+
+	if supported_backend "$backend"; then
+    		# If no directory was given use the compiled in value
+      		# TODO: This should be somewhere in /var - needs tweaking of 
+      		# configure.options
+    		if [ -z "$directory" ]; then
+      			directory=/usr/share/ldap/openldap-data
+		fi
+		echo "$backend"
+		echo "$suffix"
+		echo "$directory"
+  	fi
+}
+
+# }}}
+parse_configuration_file() {						# {{{
+# Get the list of configured databases from the slapd configuration file
+# Usage: for db in `get_database_list`; do ... done
+
+	# Create a temporary file with our data
+	local infofile
+	infofile=`mktemp`
+	exec 9<>"$infofile"
+	rm "$infofile"
+
+	# Read config and put information into the temp file
+	(read_slapd_conf < $SLAPD_CONF && echo database) | \
+    	while read command data; do
+      		case "$command" in
+      		database)
+        		# Write information about previous database section 
+			# if any
+        		if [ -n "$backend" ] && [ -n "$suffix" ]; then
+	  			write_database_info >&9 \
+					"$backend" "$suffix" "$directory"
+			fi
+			backend=$data
+			suffix=""
+			directory=""
+        		;;
+      		suffix)
+        		suffix=`eval echo $data`
+		        ;;
+	      	directory)
+		        directory=`eval echo $data`
+        		;;
+      		esac
+    	done
+}
+
+# }}}
+read_database_info() {							# {{{
+	local script
+	script='
+		seek STDIN, 0, 0;
+		@data = <STDIN>;
+		print $data[3 * $ARGV[0] + $ARGV[1]];'
+	
+	perl <&9 -e "$script" "$@"
+}
+
+# }}}
+get_backend() { 
+	read_database_info "$1" 0 
+}
+get_suffix() { 
+	read_database_info "$1" 1 
+}
+get_directory() { 
+	read_database_info "$1" 2 
+}
+get_database_list() {
+	local script
+	script='
+		seek STDIN, 0, 0;
+		@data = <STDIN>;
+		print join(" ", 0..(@data/3 - 1));'
+	
+	perl <&9 -e "$script" 
+}
+
+# }}}
+
+
+compute_backup_path() {							# {{{
+# Compute the path to backup a database directory
+# Usage: compute_backup_path [-n] <dir> <basedn>
+
+# XXX: should ask the user via debconf
+
+	local dirname basedn ok_exists
+	if [ "$1" = "-n" ]; then
+		ok_exists=yes
+		shift
+	fi
+	dirname="$1"
+	basedn="$2"
+
+	# Computing the name of the backup directory from the old version, 
+	# the suffix etc. all makes me feel worried. I'd rather have a 
+	# directory name which is not going to exist. So the simple 
+	# scheme we are using now is to compute the filename from the 
+	# directory name and appending date and time. And we check if it
+	# exists to be really sure...  -- Torsten
+
+	local target
+	local id
+	id="$OLD_VERSION"
+	[ -n "$id" ] || id=`date +%Y%m%d-%H%M%S`
+	target="/var/backups/$basedn-$id.ldapdb"
+	if [ -e "$target" ] && [ -z "$ok_exists" ]; then
+		echo >&2
+		echo >&2 "  Backup path $target exists. Giving up..."
+		exit 1
+	fi
+
+	echo "$target"
+}
+
+# }}}
+move_old_database_away() {						# {{{
+# Move the old database away if it is still there
+#
+# In fact this function makes sure that the database directory is empty
+# and can be populated with a new database. If something is in the way
+# it is moved to a backup directory if the user accepted the debconf
+# option slapd/move_old_database. Otherwise we output a warning and let
+# the user fix it himself.
+# Usage: move_old_database_away <dbdir> [<basedn>]
+
+	local databasedir backupdir
+	databasedir="$1"
+	suffix="${2:-unknown}"
+	
+	if [ ! -e "$databasedir" ] || is_empty_dir "$databasedir"; then
+		return 0
+	fi
+
+    
+	# Note that we can't just move the database dir as it might be
+	# a mount point. Instead me move the content which might 
+	# include mount points as well anyway, but it's much less likely.
+	db_get slapd/move_old_database
+	if [ "$RET" = true ]; then
+		backupdir=`compute_backup_path "$databasedir" "$suffix"`
+		echo -n "  - directory $suffix... " >&2
+		mkdir -p "$backupdir"
+		mv "$databasedir"/* "$backupdir"/
+		echo done. >&2
+	else
+		cat >&2 <<EOF
+  There are leftover files in $databasedir. This will probably break 
+  creating the initial directory. If that's the case please move away
+  stuff in there and retry the configuration.
+EOF
+	fi
+}
+# }}}
+manual_configuration_wanted() {						# {{{
+# Check if the user wants to configure everything himself (queries debconf)
+# Returns success if yes.
+
+	db_get slapd/no_configuration
+	if [ "$RET" = "true" ]; then
+		return 0
+	else
+		return 1
+	fi
+}
+# }}}
+copy_example_DB_CONFIG() {						# {{{
+# Copy an example DB_CONFIG file
+# copy_example_DB_CONFIG <directory>
+	local directory srcdir
+	
+	directory="$1"
+	srcdir="/usr/share/slapd"
+
+	if ! [ -f "${directory}/DB_CONFIG" ] && [ -d "$directory" ]; then
+		cp $srcdir/DB_CONFIG "${directory}/DB_CONFIG"
+	fi
+}
+
+# }}}
+create_new_configuration() {						# {{{
+# Create a new configuration and directory
+
+	local basedn dc backend
+
+	# For the domain really.argh.org we create the basedn 
+	# dc=really,dc=argh,dc=org with the dc entry dc: really
+	db_get slapd/domain
+	local basedn="dc=`echo $RET|sed 's/\./,dc=/g'`"
+	dc="`echo $RET|sed 's/\..*$//'`"
+
+	db_get slapd/backend
+	backend="`echo $RET|tr A-Z a-z`"
+
+	# Looks like the following code is not needed as slapd is unconfigured
+	# first and stopped at that time.
+	# Make sure the daemon is shut down when doing a reconfigure.  No
+	# daemon should be running during an initial install.
+	# XXX: Shouldn't we stop and start slapd at the outer level?
+	#if [ "$1" = reconfigure ] || [ "$DEBCONF_RECONFIGURE" ]; then
+	#	invoke-rc.d slapd stop
+	#fi
+
+	if [ -e "/var/lib/ldap" ] && ! is_empty_dir /var/lib/ldap; then
+		echo >&2 "  Moving old database directory to /var/backups:"
+		move_old_database_away /var/lib/ldap
+	fi
+	create_new_slapd_conf "$basedn" "$backend"
+	create_new_directory "$basedn" "$dc"
+	copy_example_DB_CONFIG /var/lib/ldap
+	wipe_admin_password
+}
+# }}}
+wipe_admin_password() {							# {{{
+# Remove the debconf entry for the admin password for security reasons.
+
+	db_set slapd/internal/adminpw ""
+}
+# }}}
+create_new_slapd_conf() {						# {{{
+# Creates a new slapd.conf for the suffix given
+# Usage: create_new_slapd_conf <basedn> <backend>
+
+	local basedn backend checkpoint conf_new conf_template
+
+	basedn="$1"
+	backend="$2"
+	checkpoint=""
+	conf_template="/usr/share/slapd/slapd.conf"
+
+	# Checkpoint if using the BDB backend
+	if [ "$backend" = "bdb" -o "$backend" = "hdb" ]; then
+		checkpoint="checkpoint 512 30"
+	fi
+
+	conf_new=`mktemp -q ${SLAPD_CONF}.XXXXXX`
+	echo -n "  Creating initial slapd configuration... " >&2
+	sed <"$conf_template" >"$conf_new" \
+		-e "s/@SUFFIX@/$basedn/g" \
+		-e "s/@ADMIN@/cn=admin,$basedn/g" \
+		-e "s/@CHECKPOINT@/$checkpoint/g" \
+		-e "s/@BACKEND@/$backend/g" 
+	install_new_slapd_conf "$conf_new"
+	echo "done." >&2
+} 
+# }}}
+noisy_slapadd() {							# {{{
+# Run slapadd and output the ldif file if something goes wrong.
+# Usage: noisy_slapadd [options] < ldif-file
+	local ldif_tmp
+
+	ldif_tmp=`mktemp -t slapadd.XXXXXX`
+	cat > "$ldif_tmp"
+	if ! slapadd "$@" < "$ldif_tmp"; then
+		echo >&2 "Failed to slapadd this data: "
+		cat >&2  < "$ldif_tmp" 
+		rm "$ldif_tmp"
+		exit 1
+	fi
+	rm "$ldif_tmp"
+} # }}}
+create_new_directory() {						# {{{
+# Create a new directory. Takes the basedn and the dc value of that entry.
+# Other information is extracted from debconf.
+# Usage: create_new_directory <basedn> <dc>
+
+	local basedn dc organization adminpass
+	basedn="$1"
+	dc="$2"
+	
+	db_get shared/organization
+	organization="$RET"
+	db_get slapd/internal/adminpw
+	adminpass="$RET"
+ 
+	echo -n "  Creating initial LDAP directory... " >&2
+
+	cat <<-EOF | noisy_slapadd
+		dn: $basedn
+		objectClass: top
+		objectClass: dcObject
+		objectClass: organization
+		o: $organization
+		dc: $dc
+		
+		dn: cn=admin,$basedn
+		objectClass: simpleSecurityObject
+		objectClass: organizationalRole
+		cn: admin
+		description: LDAP administrator
+		userPassword: {crypt}$adminpass
+	EOF
+
+	echo "done." >&2
+} 
+# }}}
+config_migrate_backend() {						# {{{
+# Changes all uses of one backend to another (like ldbm to bdb) in the 
+# configuration file. This includes the moduleload, backend and database
+# directives.  
+# Usage: migrate_databases <old-backend> <new-backend>
+
+	local old new
+	old="$1"
+	new="$2"
+
+	sed -i \
+	  -e "s/^moduleload[[:space:]]\+back_$old/moduleload back_$new/g" \
+	  -e "s/^database[[:space:]]\+$old/database $new/g" \
+	  -e "s/^backend[[:space:]]\+$old/backend $new/g" "$SLAPD_CONF"
+} 
+
+# }}}
+autoconfigure_modules() {						# {{{
+# On upgrades from pre-2.1 we might have to update the configuration 
+# file for loading the backend modules. This function tries to figure out
+# the needed changes automatically.
+# This function should probably go away some time after sarge release.
+
+	local new_conf
+
+	# Without a configuration we have nothing to update
+	if [ ! -e "$SLAPD_CONF" ]; then
+		echo "  Did not find slapd.conf to update modules" >&2
+		return 0
+	fi
+
+	# If the modulepath directive is already used in slapd.conf we assume 
+	# that the configuration was already adjusted
+	if  grep -q ^modulepath $SLAPD_CONF; then return 0; fi
+
+	# If the user does not want us to do the module config we bail out 
+	db_get slapd/autoconf_modules || true
+	if [ "$RET" != "true" ]; then return 0; fi
+	
+	echo -n "  Updating config for dynamic backends... " >&2
+	new_conf=`mktemp -q ${SLAPD_CONF}.XXXXXX`
+	cat <<-EOF >$new_conf
+		# Loading of backend modules - automatically generated
+		
+		modulepath      /usr/lib/ldap
+	EOF
+	read_slapd_conf < $SLAPD_CONF | sed -n >>"$new_conf" \
+	  's/^database[[:space:]]\+\([a-z]\+\)/moduleload      back_\1/p'
+	echo >>$new_conf
+	cat $SLAPD_CONF >>$new_conf
+	install_new_slapd_conf "$new_conf"
+	echo done. >&2
+}
+# }}}
+configure_v2_protocol_support() {					# {{{
+# Adds the "allow bind_v2" directive to the configuration if the user decided
+# he wants to have ldap v2 enabled.
+
+	local new_conf
+
+	db_get slapd/allow_ldap_v2
+	if [ "$RET" != "true" ]; then return 0; fi
+
+	echo -n "  Enabling LDAPv2 support... " >&2
+
+	# Check if already enabled
+	if read_slapd_conf < $SLAPD_CONF | \
+			grep -q -E '^allow[[:space:]][^#]*bind_v2'; then
+		echo "already enabled." >&2
+		return 0
+	fi
+
+	# Create a temporary file for the new config
+	new_conf=`mktemp -q ${SLAPD_CONF}.XXXXXX`
+
+	# If there is an existing global allow command, add our option
+	if extend_existing_allow_directive < $SLAPD_CONF > $new_conf; then
+		# Succeeded
+		echo -n "updated existing allow line" >&2
+	else
+		# That failed, so we have to add a new line for it
+		echo '# Allow LDAPv2 binds' > $new_conf
+		echo 'allow bind_v2' >> $new_conf
+		echo >> $new_conf
+		cat $SLAPD_CONF >> $new_conf
+		echo -n "done" >&2
+	fi
+
+	# Activate the new configuration file
+	install_new_slapd_conf "$new_conf"
+	echo . >&2
+}
+# }}}
+extend_existing_allow_directive() {					# {{{
+# Filter the config file for an allow directive and add "bind_v2" to it
+# if found.
+
+	local script
+	script='
+		$done = 0;
+		while (<>) {
+			$done = 1 if s/^allow/allow bind_v2/;
+			last if m/^database/;
+			print;
+		}
+		exit ! $done;'
+
+	perl -e "$script" || return 1
+}
+# }}}
+fix_ldif() {								# {{{
+# Fix the directory when upgrading from before 2.1 and the root
+# dn has no structural objectclass
+# Usage: fix_ldif <old-ldif-file> <new-ldif-file>
+
+	local location fixed_location
+	location="$1"
+	fixed_location="$2"
+
+	db_get shared/organization
+	organization="$RET"
+	if [ -z "$organization" ]; then organization=Unknown; fi
+	
+	/usr/share/slapd/fix_ldif -w -o "$organization" \
+		< "$location" > "$fixed_location"
+}
+# }}}
+assign_permissions() {							# {{{
+# Apply the same permissions as on a reference file to another file. 
+# Usage: apply_permissions <original> <new>
+
+	chmod --reference="$1" "$2"
+	chown --reference="$1" "$2"
+}
+# }}}
+update_access_config_directives() {					# {{{
+# Update the config file for some changes done for 2.2.x (vs. 2.1.x):
+# access to attribute=<attr> becomes access to attrs=<attr>
+# access to dn=".*,..." becomes access to dn.regex=".*,..."
+
+# For now only the main configuration file is fixed, includes are not 
+# handled.
+
+	local new_conf
+
+	# Check if we have to apply these changes
+	# First changed in Debian release 2.2.23, better update if we are
+	# upgrading something older.
+	if previous_version_newer 2.2.23; then
+		return 0
+	fi
+
+	# Without a configuration we have nothing to update
+	if [ ! -e "$SLAPD_CONF" ]; then
+		echo >&2 \
+		  "  Did not find slapd.conf to update access directives."
+		return 0
+	fi
+
+	echo -n "  Updating config access directives... " >&2
+	new_conf="`mktemp -q ${SLAPD_CONF}.XXXXXX`"
+
+	perl -p \
+		-e 'm/^\S/ && ($acl=0);' \
+		-e 'm/^access\s+to/ && ($acl=1);' \
+		-e 'if ($acl) { s/dn=/dn.regex=/g; s/attribute=/attrs=/g; }' \
+		< "$SLAPD_CONF" >"$new_conf"
+	install_new_slapd_conf "$new_conf"
+	echo done. >&2
+
+} # }}}
+stop_slapd() {								# {{{
+# Make sure slapd is shut down before mucking with the db files
+# and whatnot...
+# Usage: stop_slapd
+# XXX: Why are we stopping slapd manually? That should be done via 
+# the init.d script and invoke-rc.d. Leaving this alone for now 
+# -- Torsten
+
+	# Find out the name of slapd's pid file
+  	if [ -z "$SLAPD_PIDFILE" ] && [ -f "$SLAPD_CONF" ]; then
+    		SLAPD_PIDFILE=`read_slapd_conf < $SLAPD_CONF \
+			| sed -ne 's/^pidfile[[:space:]]\+\(.\+\)/\1/p'`
+  	fi
+
+	# Use the pidfile if it is there, if not then just do without
+  	if [ -z "$SLAPD_PIDFILE" ]; then
+    		start-stop-daemon --stop --retry 10 --quiet --oknodo \
+			--exec /usr/sbin/slapd >&2
+  	else
+    		start-stop-daemon --stop --retry 10 --quiet --oknodo \
+			--pidfile "$SLAPD_PIDFILE" >&2
+	fi
+}
+
+# }}}
+install_new_slapd_conf() {						# {{{
+# Installs a given file as new slapd.conf configuration file. 
+# Usage: install_new_slapd_conf <newfile>
+
+	local conf_new
+	conf_new="$1"
+
+	backup_config_once
+
+	# Make sure we keep the permissions of an old slapd.conf
+	if [ -e "$SLAPD_CONF" ]; then
+		assign_permissions "$SLAPD_CONF" "$conf_new"
+	fi
+	mv "$conf_new" "$SLAPD_CONF"
+}
+# }}}
+backup_config_once() {							# {{{
+# Create a backup of the current configuration files. 
+# Usage: backup_config_once
+
+	local backupdir
+
+	if [ -z "$FLAG_CONFIG_BACKED_UP" ]; then
+		backupdir=`database_dumping_destdir`
+		if [ -e "$SLAPD_CONF" ]; then
+			cp -a "$SLAPD_CONF" "$backupdir"
+		fi
+		FLAG_CONFIG_BACKED_UP=yes
+	fi
+}
+
+# }}}
+
+
+# Set up the defaults for our templates
+set_defaults_for_unseen_entries() {
+  DOMAIN=`hostname -d` || true
+  if [ -z "$DOMAIN" ]; then DOMAIN='nodomain'; fi
+
+  db_fget slapd/domain seen
+  if [ "$RET" = false ]; then
+    db_set slapd/domain "$DOMAIN"
+  fi
+
+  db_fget shared/organization seen
+  if [ "$RET" = false ]; then
+    db_set shared/organization "$DOMAIN"
+  fi
+}
+
+# Check if the user wants to configure slapd manually
+manual_configuration_wanted() {
+  db_input low slapd/no_configuration || true
+  db_go || true
+  db_get slapd/no_configuration
+  no_configuration="$RET"
+  
+  if [ "$no_configuration" = "true" ]; then
+    return 0
+  fi
+  return 1
+}
+ 
+# Query the information we need to create an initial directory
+query_initial_config() {
+  while true; do
+    db_input medium slapd/domain || true
+    db_input medium shared/organization || true
+    db_input high slapd/password1 || true
+    db_input high slapd/password2 || true
+    db_input low slapd/backend || true
+    db_input low slapd/purge_database || true
+    # XXX - should be done more general, but for now this should do
+    # the trick
+    if [ -e "/var/lib/ldap" ] && ! is_empty_dir /var/lib/ldap; then
+      db_input low slapd/move_old_database || true
+    fi
+    db_go || true
+
+    if validate_initial_config; then
+      break
+    fi
+  done
+}
+ 
+# Make sure the values entered make sense
+validate_initial_config() {
+  local invalid
+  invalid=""
+ 
+  # Make sure the domain name is valid
+  # The regexp doesn't work for UTF-8 domain names, but for that to
+  # work, we would also need to Base64 encode it in the LDIF; since
+  # we're not doing it at the moment, this should be fine for now
+  db_get slapd/domain
+  if [ -z "$RET" ] || ! echo "$RET" | grep -q '^[a-zA-Z0-9.-]*$'; then
+    db_fset slapd/domain seen false
+    invalid=true
+  fi
+ 
+  # Suffix and Organization may not be empty
+  db_get shared/organization
+  if [ -z "$RET" ]; then
+    db_fset shared/organization seen false
+    invalid=true
+  fi
+
+  # Make sure the passwords match
+  local pass1 pass2
+  db_get slapd/password1
+  pass1="$RET"
+  db_get slapd/password2
+  pass2="$RET"
+  
+  if [ "$pass1" != "$pass2" ]; then
+    db_fset slapd/password1 seen false
+    db_fset slapd/password2 seen false
+    invalid=true
+  fi
+
+  # Tell the user
+  if [ "$invalid" ]; then
+    db_fset slapd/invalid_config seen false
+    db_input critical slapd/invalid_config || true
+    db_go || true
+    db_get slapd/invalid_config
+    if [ "$RET" != "true" ]; then
+      db_set slapd/no_configuration true
+      invalid=
+    fi
+  fi
+
+  if [ "$invalid" ]; then 
+    return 1
+  else
+    return 0
+  fi
+}
+
+crypt_admin_pass() {							# {{{
+# Store the encrypted admin password into the debconf db
+# Usage: crypt_admin_pass
+# XXX: This is the standard unix crypt. Maybe we can get something stronger?
+
+  	db_get slapd/password1
+  	db_set slapd/internal/adminpw `create_password_hash "$RET"`
+	# Wipe out the passwords after using them
+	db_set slapd/password1 ""
+	db_set slapd/password2 ""
+}
+
+# }}}
+create_password_hash() {						# {{{
+# Create the password hash for the given password
+# Usage: hash=`create_password_hash "$password"`
+
+  	perl - "$1" <<'EOF'
+# ---------------
+sub GenRandom {
+	local ($len) = @_;
+      	local ($char, $data, @chars);
+      	@chars = split(//, "abcdefghijklmnopqrstuvwxyz"
+                         . "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");
+    
+      	open(RD, "</dev/urandom") or die "Failed to open random source";
+      	$data = "";
+      	while ($len--) {
+        	read(RD, $char, 1) == 1 or die "Failed to read random data";
+		$data .= $chars[ord($char) % @chars];
+      	}
+    
+      	close(RD);
+      	return $data;
+}
+print crypt($ARGV[0], GenRandom(2));
+EOF
+# --------------
+}
+
+# }}}
+slave_databases_without_updateref() {					# {{{
+# Read the configuration of the slapd server and check if there are any
+# slave backends without updateref specified.
+# Usage: if slave_databases_without_updateref; then ... fi
+
+	(read_slapd_conf < $SLAPD_CONF && echo database) | \
+    	while read command data; do
+      		case $command in
+      		database)
+        		if [ -n "$backend" ] && [ -n "$updatedn" ] \
+				    && [ -z "$updateref" ]; then
+		  		return 0
+			fi
+			backend="$data"
+        		updatedn=""
+			updateref=""
+        		;;
+      		updatedn)
+        		updatedn="$data"
+        		;;
+      		updateref)
+        		updateref="$data"
+        		;;
+      		esac
+    	done || return 0
+
+  	return 1
+}
+
+# }}}
+previous_version_older() {						# {{{
+# Check if the previous version is newer than the reference version passed.
+# If we are not upgrading the previous version is assumed to be newer than
+# any reference version.
+# Usage: previous_version_newer <package version>
+	
+	if dpkg --compare-versions "$OLD_VERSION" lt-nl "$1"; then
+		return 0
+	else
+		return 1
+	fi
+} 
+
+# }}}
+previous_version_newer() {						# {{{
+# Check if the previous version is newer than the reference version passed.
+# If we are not upgrading the previous version is assumed to be newer than
+# any reference version.
+# Usage: previous_version_newer <package version>
+	
+	if dpkg --compare-versions "$OLD_VERSION" gt-nl "$1"; then
+		return 0
+	else
+		return 1
+	fi
+} # }}}
+supported_backend() {							# {{{
+# Check if upgrading a database in the named backend is supported by
+# our scripts.
+# Usage: if supported_backend "backend"; then ... fi
+
+	case "$1" in ldbm|bdb|hdb) return 0; esac
+	return 1
+}
+
+# }}}
+is_initial_configuration() {						# {{{
+# Check if this is the initial configuration and not an upgrade of an 
+# existing configuration
+# Usage: if is_initial_configuration "$@"; then ... fi from top level
+
+	# Plain installation
+	if [ "$1" = configure ] && [ -z "$2" ]; then
+		return 0
+  	fi
+	# Configuration via dpkg-reconfigure
+	if [ "$1" = reconfigure ] || [ "$DEBCONF_RECONFIGURE" ]; then
+    		return 0
+  	fi
+  	return 1
+}
+
+# }}}
+is_empty_dir() {							# {{{
+# Check if a path refers to an empty directory
+# Usage: if is_empty_dir "$dir"; then ... fi
+
+	output=`find "$1" -type d -maxdepth 0 -empty 2>/dev/null`
+  	if [ "$output" ]; then
+    		return 0
+  	else
+    		return 1
+  	fi
+}
+
+# }}}
+
+# ===== Global variables ================================================ {{{
+#
+# At some points we need to know which version we are upgrading from if
+# any. More precisely we only care about the configuration and data we 
+# might have laying around. Some parts also want to know which mode the
+# script is running in.
+
+MODE="$1"		# install, upgrade, etc. - see debian-policy
+OLD_VERSION="$2"
+
+# Source the init script configuration
+# See example file debian/slapd.default for variables defined here
+if [ -f "/etc/default/slapd" ]; then
+  	. /etc/default/slapd
+fi
+
+# Load the default location of the slapd config file
+if [ -z "$SLAPD_CONF" ]; then
+  	SLAPD_CONF="/etc/ldap/slapd.conf"
+fi
+
+# }}}
+
+# ----- Handling diagnostic output ------------------------------------ {{{
+#
+# Often you want to run a program while you are showing progress 
+# information to the user. If the program you are running outputs some 
+# diagnostics it will mess up your screen. 
+#
+# This is what the following functions are designed for. When running the
+# program, use capture_diagnostics to store what the program outputs to 
+# stderr and use release_diagnostics to write out the captured output.
+
+
+capture_diagnostics() {							# {{{
+# Run the command passed and capture the diagnostic output in a temporary
+# file. You can dump that file using release_diagnostics.
+
+	# Create the temporary file
+	local tmpfile
+	tmpfile=`mktemp`
+	exec 7<>"$tmpfile"
+	rm "$tmpfile"
+
+	# Run the program and capture stderr. If the program fails the 
+	# function fails with the same status.
+	"$@" 2>&7 || return $?
+}
+
+# }}}
+release_diagnostics() {							# {{{
+# Dump the diagnostic output captured via capture_diagnostics, optionally
+# prefixing each line.
+# Usage: release_diagnostics "prefix"
+
+	local script
+	script='
+		seek STDIN, 0, 0;
+		print "$ARGV[0]$_" while (<STDIN>);';
+	perl -e "$script" "$1" <&7
+}
+
+# }}}
+
+
+# }}}
+
+# vim: set sw=8 foldmethod=marker: 
+
diff -urN openldap-2.3.35/debian/slapd.templates openldap-2.3.35_new/debian/slapd.templates
--- openldap-2.3.35/debian/slapd.templates	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/slapd.templates	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,222 @@
+Template: slapd/no_configuration
+Type: boolean
+Default: false
+_Description: Omit OpenLDAP server configuration?
+ If you enable this option, no initial configuration or database will be
+ created for you.
+
+Template: slapd/dump_database
+Type: select
+Choices: always, when needed, never
+Default: when needed
+_Description: Dump databases to file on upgrade:
+ Before upgrading to a new version of the OpenLDAP server the data of 
+ your LDAP directories can be dumped to plain text files (LDIF format)
+ which is a standardized description of that data (LDIF stands for
+ LDAP Data Interchange Format).
+ .
+ Selecting "always" will make the maintainer scripts dump your
+ databases before upgrading unconditionally. Selecting "when needed"
+ will only dump the database if the new version is incompatible with
+ the old database format and it has to be reimported. The "never"
+ choice will just go ahead without ever dumping your database.
+
+Template: slapd/dump_database_destdir
+Type: string
+Default: /var/backups/slapd-VERSION
+_Description: Directory to dump databases:
+ Please specify the directory where the LDAP databases will be exported.
+ Within this directory several LDIF files are created which correspond
+ to the search bases located on the server. Make sure you have enough
+ free space on the partition the directory is located.  The first
+ occurrence of the string "VERSION" is replaced with the server version
+ you are upgrading from. The default is /var/backups/slapd-VERSION
+
+Template: slapd/move_old_database
+Type: boolean
+Default: true
+_Description: Move old database?
+ There are still files in /var/lib/ldap which will probably break
+ the configuration process. If you enable this option, the maintainer
+ scripts will move the old database files out of the way before
+ creating a new database.
+
+Template: slapd/invalid_config
+Type: boolean
+Default: true
+_Description: Invalid configuration. Retry configuration?
+ The configuration you entered is invalid. Make sure that the DNS domain name
+ has a valid syntax, the organization is not left empty and that the admin
+ passwords match. If you decide not to retry the configuration the LDAP server
+ will not be set up. Run "dpkg-reconfigure" if you want to retry later.
+
+Template: slapd/domain
+Type: string
+_Description: DNS domain name:
+ The DNS domain name is used to construct the base DN of your LDAP directory.
+ Entering foo.bar.org will give you the base DN dc=foo, dc=bar, dc=org.
+
+Template: shared/organization
+Type: string
+_Description: Name of your organization:
+ Whatever you enter here will be stored as the name of your organization in
+ the base DN of your LDAP directory.
+
+Template: slapd/password1
+Type: password
+_Description: Admin password:
+  Please enter the password for the admin entry in your LDAP directory.
+
+Template: slapd/password2
+Type: password
+_Description: Confirm password:
+ Please reenter the admin password for your LDAP directory for
+ verification.
+
+Template: slapd/password_mismatch
+Type: note
+_Description: Password mismatch
+ The admin password and its confirmation must match. Please note that
+ differences such as uppercase/lowercase and added whitespace matter.
+
+Template: slapd/purge_database
+Type: boolean
+Default: false
+_Description: Do you want your database to be removed when slapd is purged?
+
+Template: slapd/internal/adminpw
+Type: password
+_Description: Encrypted admin password:
+
+Template: slapd/autoconf_modules
+Type: boolean
+Default: true
+_Description: Change configuration to load backend modules?
+ Starting with OpenLDAP 2.1 backends are not longer built into the
+ server but are instead dynamically loaded at startup. This means that
+ the slapd configuration has to be changed to load the modules for the
+ backends you are using.
+ .
+ If you choose this option, an attempt to fix the configuration will be
+ made. If you don't select this, you *must* fix your configuration file
+ yourself or slapd (and slapcat if you are upgrading from an older version)
+ will fail and the package will not be installed. For more information, 
+ read /usr/share/doc/slapd/README.Debian.
+
+Template: slapd/allow_ldap_v2
+Type: boolean
+Default: false
+_Description: Allow LDAPv2 protocol?
+ The slapd daemon now disables the old LDAPv2 protocol by default.
+ Programs and users are generally expected to be upgraded to LDAPv3.
+ If you have old programs which have not been moved to use LDAPv3
+ and you still need LDAPv2 support then select this option and
+ 'allow bind_v2' will be added to your slapd.conf to tell slapd to
+ accept LDAPv2 connections.
+
+Template: slapd/fix_directory
+Type: boolean
+Default: true
+_Description: Fix LDAP directory on upgrade?
+ The installation scripts of the old OpenLDAP 2.0 packages create a
+ directory that does not conform to the ldap schema. The new version is
+ more strict about this and you won't be able to access your directory
+ after the upgrade without fixing it.
+ .
+ If you choose this option, an attempt to fix it for you will occur.
+
+Template: slapd/suffix_change
+Type: boolean
+Default: false
+_Description: Move aside current database and create a new one?
+ You have specified a directory suffix (domain) that doesn't match the
+ one currently in /etc/ldap/slapd.conf.  Changing the directory suffix
+ requires moving aside the current LDAP database and creating a new
+ one.  Please confirm whether you want to abandon the current database
+ (a backup will be made).
+
+Template: slapd/upgrade_slapcat_failure
+Type: note
+_Description: slapcat failed during upgrade
+ An error occurred during the attempt to upgrade your LDAP directory.
+ This error occurred when performing the 'slapcat' which attempts to
+ extract your LDAP directory.  This failure could be because of an
+ incorrect config file.  For example, if the appropriate moduleload
+ lines for your backend database type are missing.  This failure
+ will cause 'slapadd' later to fail too.  The old database files are
+ about to be moved to /var/backups.  If you want to try this upgrade
+ again then move the old database files back into place, fix whatever
+ caused slapcat to fail, and run:
+  slapcat | /usr/share/slapd/fix_ldif -w -o "$organization" > $location
+ .
+ Then move the database files back to a backup area and then try running
+ slapadd from $location.
+
+Template: slapd/upgrade_slapadd_failure
+Type: note
+_Description: slapadd failed during upgrade
+ An error occurred during the attempt to upgrade your LDAP directory.
+ This error occurred when performing the 'slapadd' which attempts to
+ populate an empty new LDAP directory using the information from your
+ original LDAP directory.  Your original LDAP directory files have
+ been saved in /var/backups.  The results of the attempted upgrade
+ is the ldif file in /var/backups.  slapadd may have failed due to
+ a configuration problem (in which case slapcat would have failed
+ too) or due to a problem in the LDIF file.  If the problem was with the
+ LDIF file, you may be able to fix it and attempt the slapadd again.
+
+Template: slapd/slave_databases_require_updateref
+Type: note
+_Description: Slave databases require updateref option
+ In your slapd configuration file at least one database is
+ configured as slave, and the updateref option is not set.
+ The updateref option specifies the referral(s) to pass back
+ when slapd is asked to modify a replicated local database.
+ See slapd.conf(5) for more details.
+ .
+ Starting with version 2.1.23, slapd requires the updateref
+ option to be set on slaves. You should make sure to fix
+ your slapd.conf configuration file.
+
+Template: slapd/migrate_ldbm_to_bdb
+Type: boolean
+Default: true
+_Description: Change backend type from LDBM to BDB?
+ The LDBM backend type has been deprecated in OpenLDAP 2.2 and has shown to not
+ work well. BDB is the recommended choice of the OpenLDAP developers.
+ .
+ When using the BDB backend make sure you configure BDB properly. For
+ information to do so, see /usr/share/doc/slapd/README.DB_CONFIG.gz
+ .
+ If you enable this option an attempt will be made to update your 
+ configuration to use BDB instead of LDBM and convert your databases.
+
+Template: slapd/backend
+Type: select
+Choices: BDB, HDB, LDBM
+Default: BDB
+_Description: Database backend to use:
+ The BDB backend is the recommended choice of the OpenLDAP developers while
+ support of the old LDBM backend is phasing out. When using the BDB backend
+ make sure that you configure the underlying database for your requirements.
+ Look into /usr/share/doc/slapd/README.DB_CONFIG.gz
+ .
+ HDB is the next generation of BDB which might replace it sometime in 
+ the future. There are some problems still in the HDB code of the 2.2
+ series of OpenLDAP so you should probably stick to BDB until version 2.3.
+ .
+ The BDB backend (back-bdb) and LDBM backend (back-ldbm) are comparable in
+ purpose and back-bdb evolved from experience gained from back-ldbm, but the
+ two are quite distinct today. They both store entries based on a 32-bit entry
+ ID key, and they use a dn2id table to map from DNs to entry IDs. They both
+ perform attribute indexing using the same code, and store index data as lists
+ of entry IDs. As such, the LDAP-specific features they offer are nearly
+ identical. The differences are in the APIs used to implement the databases.
+ back-ldbm uses a generic database API that can plug into several different
+ database packages. In Debian, it's built against BerkeleyDB (BDB). While
+ BerkeleyDB supports this generic interface, it also offers a much richer API
+ that has a lot more power and a lot more complexity. back-bdb is written
+ specifically for the full BDB API, and uses some of BDB's more advanced
+ features to offer transaction processing, fine grained locking, and other
+ features that offer improved concurrency and reliability. For more
+ information, see /usr/share/doc/slapd/README.DB_CONFIG.gz
diff -urN openldap-2.3.35/debian/tests/create_account openldap-2.3.35_new/debian/tests/create_account
--- openldap-2.3.35/debian/tests/create_account	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/tests/create_account	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,24 @@
+#! /usr/bin/perl -w
+
+# Shows how to create an entry on the LDAP server
+
+$host = "localhost";			# LDAP server
+$basedn = "dc=galaxy";			# Base DN
+$admindn = "cn=admin, $basedn";		# Admin entry
+$adminpass = "foo";			# Password
+
+use Net::LDAP;
+
+$ldap = Net::LDAP->new("$host", onerror => "die");
+$ldap->bind($admindn, password => $adminpass);
+
+# Create "ou=People" entry if not there
+
+$results = $ldap->search(base => "$basedn", 
+	filter => "ou=People", scope => "one");
+unless ($results->count > 0) {
+	$ldap->add("ou=People, $basedn", attr => [
+		  ou => "People", 
+		  objectClass => [ "top", "organizationalUnit" ]
+		]);
+}
diff -urN openldap-2.3.35/debian/tests/find_unused_functions openldap-2.3.35_new/debian/tests/find_unused_functions
--- openldap-2.3.35/debian/tests/find_unused_functions	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/tests/find_unused_functions	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,30 @@
+#! /usr/bin/perl -w
+
+use autouse Data::Dumper, qw{Dumper};
+
+# Script to find the unused shell functions in slapd.scripts-common
+
+our @code;
+
+# Get all shell code from maintainer scripts
+
+foreach my $file ((<slapd.*rm>, <slapd.*inst>, <slapd.config>, 
+	<slapd.scripts-common>)) {
+	open SCRIPT, "<$file" or
+		die "Can't open $file: $!";
+	push @code, <SCRIPT>;
+	close SCRIPT;
+}
+
+# Find all function declarations
+
+our @functions = map { /^(\w+)\s*\(\).*$/;  } @code;
+
+# Find unused functions
+
+foreach $function (@functions) {
+	@occurences  = grep /$function/, @code;
+	@invocations = grep { !/^$function\s*\(\)/ and !/#.*$function/ }
+				@occurences;
+	print "$function\n" if @invocations == 0;
+}
diff -urN openldap-2.3.35/debian/tests/hammer_slapd openldap-2.3.35_new/debian/tests/hammer_slapd
--- openldap-2.3.35/debian/tests/hammer_slapd	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/tests/hammer_slapd	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,98 @@
+#! /usr/bin/perl -w
+
+use Net::LDAP;
+use Data::Dumper;
+
+$host = "localhost";			# LDAP server
+$basedn = "dc=galaxy";			# Base DN
+$admindn = "cn=admin, $basedn";		# Admin entry
+$adminpass = "foo";			# Password
+$group = $ARGV[0] || "People";
+
+$ldap = Net::LDAP->new("$host", onerror => "die");
+$ldap->bind($admindn, password => $adminpass);
+
+sub create_group {
+	$results = $ldap->search(base => "$basedn", 
+		filter => "ou=$group", scope => "one");
+	unless ($results->count > 0) {
+		$ldap->add("ou=$group, $basedn", attr => [
+			  ou => "$group", 
+			  objectClass => [ "top", "organizationalUnit" ]
+			]);
+	}
+}
+
+sub invent_name {
+	our @words;
+	unless (@words) {
+		open WORDS, "/usr/share/dict/british-english-large";
+		@words = grep /^[A-Z]\w{0,11}$/, <WORDS>;
+		map { chomp } @words;
+		close WORDS;
+	}
+
+	my $index = int(rand(@words));
+	$index = int(rand(@words)) while not defined $words[$index];
+	my $word = $words[$index];
+	delete $words[$index];
+	return $word;
+}
+
+sub invent_names {
+	our @names;
+
+	foreach (1..1000) {
+		push @names, { cn => invent_name, sn => invent_name };
+	}
+}
+
+sub create_entries {
+	foreach my $name (@names) {
+		create_account(%$name);
+	}
+}
+
+sub create_account {
+	our $uid; 
+	$uid = 1000 if not defined $uid;
+
+	my %id = @_;
+	my $login = $id{cn};
+	$login =~ tr/A-Z/a-z/;
+	$ldap->add("uid=$login, ou=$group, $basedn", attr => [
+		%id, 
+		objectClass => [ "top", "person", "posixAccount" ], 
+		uid => $login, 
+		uidNumber => $uid++, 
+		gidNumber => 1000, 
+		homeDirectory => "/home/$login" ]);
+}
+
+sub delete_entries {
+	foreach my $name (@names) {
+		delete_account(%$name);
+	}
+}
+
+sub delete_account {
+	my %id = @_;
+	my $login = $id{cn};
+	$login =~ tr/A-Z/a-z/;
+	$ldap->delete("uid=$login, ou=$group, $basedn");
+}
+
+sub search_entries {
+	foreach (1..10000) {
+		my $num = int(rand(@names));
+		$login = $names[$num]->{cn};
+		$login =~ tr/A-Z/a-z/;
+		$ldap->search(base => "$basedn", filter => "uid=$login");
+	}
+}
+
+create_group;
+invent_names;
+create_entries;
+search_entries;
+delete_entries;
diff -urN openldap-2.3.35/debian/TODO openldap-2.3.35_new/debian/TODO
--- openldap-2.3.35/debian/TODO	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/TODO	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,32 @@
+openldap2.2 (2.2.23-4) unstable; urgency=low
+
+  * debian/slapd.NEWS: Summarize the upstream changes and make clear that
+    the upgrade may be problemated. Sketch the upgrade procedure.
+  * debian/README.Debian: Explain what to check for if upgrading fails and
+    how to recover.
+  * CARLO: debian/slapd.scripts-common: Handle all UTF-8 supported characters
+    in organization field by converting the locale specific input into
+    utf-8 and base64 encoding the result (closes: #236097).
+  * Maintainer scripts: Handle the configuration to enable ldif dumping
+    correctly: Dump if requested and only slapadd the data if it is 
+    supposed to be there.
+  * Check ITS#3267 (possible data loss) and apply the patch to the 
+    package.
+  * CARLO: Escape special chars in the names of backup LDIF files using
+    the %xx syntax.
+  * Check lintian warning: Postinst uses db_input. I think the usage is
+    okay as it is an error message IIRC which is also output using cat
+    in case debconf is not available.
+
+ -- Torsten Landschoff <torsten@debian.org>  Sun,  3 Apr 2005 20:24:52 +0200
+
+openldap2.2 (2.2.23-5) unstable; urgency=low
+
+  * Refactoring of the maintainer scripts. Goals:
+    + No more direct access to global variables but accessor functions
+      to check for invalid uses. Example: Don't use $OLD_VERSION but 
+      `get_previous_version`. That way invalid uses can easily be flagged
+      if that information is not available anymore.
+  * Remove perl script to hash a password and use slappasswd instead.
+
+ -- Torsten Landschoff <torsten@debian.org>  Sun,  3 Apr 2005 20:24:52 +0200
diff -urN openldap-2.3.35/debian/USE-CASES openldap-2.3.35_new/debian/USE-CASES
--- openldap-2.3.35/debian/USE-CASES	1969-12-31 21:00:00.000000000 -0300
+++ openldap-2.3.35_new/debian/USE-CASES	2007-04-12 17:21:34.000000000 -0300
@@ -0,0 +1,7 @@
+Some ideas what to check and what the desired results would be:
+
+- running dpkg-reconfigure with an already configured slapd
+
+  Should either backup the database or ask before killing it. 
+  Same for slapd.conf. Neither old configuration or old database 
+  should be lost without the user confirming that this is what he wants.
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_bdb-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/back_bdb-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_bdb-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/back_bdb-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_bdb.so e openldap-2.3.35_new/debian/usr/lib/ldap/back_bdb.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_dnssrv-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/back_dnssrv-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_dnssrv-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/back_dnssrv-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_dnssrv.so e openldap-2.3.35_new/debian/usr/lib/ldap/back_dnssrv.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_hdb-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/back_hdb-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_hdb-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/back_hdb-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_hdb.so e openldap-2.3.35_new/debian/usr/lib/ldap/back_hdb.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_ldbm-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/back_ldbm-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_ldbm-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/back_ldbm-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_ldbm.so e openldap-2.3.35_new/debian/usr/lib/ldap/back_ldbm.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_meta-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/back_meta-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_meta-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/back_meta-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_meta.so e openldap-2.3.35_new/debian/usr/lib/ldap/back_meta.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_monitor-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/back_monitor-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_monitor-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/back_monitor-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_monitor.so e openldap-2.3.35_new/debian/usr/lib/ldap/back_monitor.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_null-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/back_null-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_null-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/back_null-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_null.so e openldap-2.3.35_new/debian/usr/lib/ldap/back_null.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_passwd-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/back_passwd-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_passwd-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/back_passwd-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_passwd.so e openldap-2.3.35_new/debian/usr/lib/ldap/back_passwd.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_perl-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/back_perl-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_perl-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/back_perl-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_perl.so e openldap-2.3.35_new/debian/usr/lib/ldap/back_perl.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_shell-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/back_shell-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_shell-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/back_shell-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_shell.so e openldap-2.3.35_new/debian/usr/lib/ldap/back_shell.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_sql-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/back_sql-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_sql-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/back_sql-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/back_sql.so e openldap-2.3.35_new/debian/usr/lib/ldap/back_sql.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/dyngroup-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/dyngroup-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/dyngroup-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/dyngroup-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/dyngroup.so e openldap-2.3.35_new/debian/usr/lib/ldap/dyngroup.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/pcache-2.3.so.0 e openldap-2.3.35_new/debian/usr/lib/ldap/pcache-2.3.so.0 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/pcache-2.3.so.0.2.23 e openldap-2.3.35_new/debian/usr/lib/ldap/pcache-2.3.so.0.2.23 diferem
Arquivos binrios openldap-2.3.35/debian/usr/lib/ldap/pcache.so e openldap-2.3.35_new/debian/usr/lib/ldap/pcache.so diferem
Arquivos binrios openldap-2.3.35/debian/usr/sbin/slapacl e openldap-2.3.35_new/debian/usr/sbin/slapacl diferem
Arquivos binrios openldap-2.3.35/debian/usr/sbin/slapadd e openldap-2.3.35_new/debian/usr/sbin/slapadd diferem
Arquivos binrios openldap-2.3.35/debian/usr/sbin/slapauth e openldap-2.3.35_new/debian/usr/sbin/slapauth diferem
Arquivos binrios openldap-2.3.35/debian/usr/sbin/slapcat e openldap-2.3.35_new/debian/usr/sbin/slapcat diferem
Arquivos binrios openldap-2.3.35/debian/usr/sbin/slapd e openldap-2.3.35_new/debian/usr/sbin/slapd diferem
Arquivos binrios openldap-2.3.35/debian/usr/sbin/slapdn e openldap-2.3.35_new/debian/usr/sbin/slapdn diferem
Arquivos binrios openldap-2.3.35/debian/usr/sbin/slapindex e openldap-2.3.35_new/debian/usr/sbin/slapindex diferem
Arquivos binrios openldap-2.3.35/debian/usr/sbin/slappasswd e openldap-2.3.35_new/debian/usr/sbin/slappasswd diferem
Arquivos binrios openldap-2.3.35/debian/usr/sbin/slaptest e openldap-2.3.35_new/debian/usr/sbin/slaptest diferem
Arquivos binrios openldap-2.3.35/debian/usr/sbin/slurpd e openldap-2.3.35_new/debian/usr/sbin/slurpd diferem
